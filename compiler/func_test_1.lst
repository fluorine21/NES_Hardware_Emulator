AS65 Assembler for R6502 [1.42].                                     Page    1
------------------------------ func_test_1.a65 -------------------------------

6109 lines read, no errors in pass 1.
                        ;
                        ; 6 5 0 2   F U N C T I O N A L   T E S T
                        ;
                        ; Copyright (C) 2012-2020  Klaus Dormann
                        ;
                        ; This program is free software: you can redistribute 
                        ; it under the terms of the GNU General Public License
                        ; the Free Software Foundation, either version 3 of th
                        ; (at your option) any later version.
                        ;
                        ; This program is distributed in the hope that it will
                        ; but WITHOUT ANY WARRANTY; without even the implied w
                        ; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
                        ; GNU General Public License for more details.
                        ;
                        ; You should have received a copy of the GNU General P
                        ; along with this program.  If not, see <http://www.gn
                        
                        
                        ; This program is designed to test all opcodes of a 65
                        ; addressing modes with focus on propper setting of th
                        ; register bits.
                        ; 
                        ; version 05-jan-2020
                        ; contact info at http://2m5.de or email K@2m5.de
                        ;
                        ; assembled with AS65 written by Frank A. Kingswood
                        ; The assembler as65_142.zip can be obtained from my G
                        ; command line switches: -l -m -s2 -w -h0
                        ;                         |  |  |   |  no page headers
                        ;                         |  |  |   wide listing (133 
                        ;                         |  |  write intel hex file i
                        ;                         |  expand macros in listing
                        ;                         generate pass2 listing
                        ;
                        ; No IO - should be run from a monitor with access to 
                        ; To run load intel hex image with a load command, tha
                        ; (code_segment) and enter a go command.
                        ; Loop on program counter determines error or successf
                        ; Check listing for relevant traps (jump/branch *).
                        ; Please note that in early tests some instructions wi
                        ; they are actually tested!
                        ;
                        ; RESET, NMI or IRQ should not occur and will be trapp
                        ; Tests documented behavior of the original NMOS 6502 
                        ; opcodes. Additional opcodes of newer versions of the
                        ; not be tested. Decimal ops will only be tested with 
                        ; N V Z flags will be ignored.
                        ;
                        ; Debugging hints:
                        ;     Most of the code is written sequentially. if you
                        ;   immediately preceeding code for the instruction to
                        ;   tested first, flags are checked second by pushing 
                        ;   pulling them to the accumulator after the result w
                        ;   flags are no longer valid for the tested instructi
                        ;     If the tested instruction was indexed, the relev
                        ;   also be checked. Opposed to the flags, X and Y reg
                        ;
                        ; versions:
                        ;   28-jul-2012  1st version distributed for testing
                        ;   29-jul-2012  fixed references to location 0, now #
AS65 Assembler for R6502 [1.42].                                     Page    2
------------------------------ func_test_1.a65 -------------------------------

                        ;                added license - GPLv3
                        ;   30-jul-2012  added configuration options
                        ;   01-aug-2012  added trap macro to allow user to cha
                        ;   01-dec-2012  fixed trap in branch field must be a 
                        ;   02-mar-2013  fixed PLA flags not tested
                        ;   19-jul-2013  allowed ROM vectors to be loaded when
                        ;                added test sequence check to detect i
                        ;   23-jul-2013  added RAM integrity check option
                        ;   16-aug-2013  added error report to standard output
                        ;   13-dec-2014  added binary/decimal opcode table swi
                        ;   14-dec-2014  improved relative address test
                        ;   23-aug-2015  added option to disable self modifyin
                        ;   24-aug-2015  all self modifying immediate opcodes 
                        ;                added small branch offset pretest
                        ;   21-oct-2015  added option to disable decimal mode 
                        ;   04-dec-2017  fixed BRK only tested with interrupts
                        ;                added option to skip the remainder of
                        ;                in report.i65
                        ;   05-jan-2020  fixed shifts not testing zero result 
                        ;                is shifted out
                        
                        ; C O N F I G U R A T I O N
                        
                        ;ROM_vectors writable (0=no, 1=yes)
                        ;if ROM vectors can not be used interrupts will not be
                        ;as a consequence BRK can not be tested but will be em
0001 =                  ROM_vectors = 1
                        
                        ;load_data_direct (0=move from code segment, 1=load di
                        ;loading directly is preferred but may not be supporte
                        ;0 produces only consecutive object code, 1 is not sui
0001 =                  load_data_direct = 1
                        
                        ;I_flag behavior (0=force enabled, 1=force disabled, 2
                        ;change) 2 requires extra code and is not recommended.
                        ;tested if you allow changing the interrupt status (I_
0003 =                  I_flag = 3
                        
                        ;configure memory - try to stay away from memory used 
                        ;zero_page memory start address, $52 (82) consecutive 
                        ;                                add 2 if I_flag = 2
0000 =                  zero_page = $0  
                        
                        ;data_segment memory start address, $7B (123) consecut
0200 =                  data_segment = $200  
                            if (data_segment & $ff) != 0
                                ERROR ERROR ERROR low byte of data_segment MUS
                            endif  
                        
                        ;code_segment memory start address, 13.1kB of consecut
                        ;                                   add 2.5 kB if I_fl
0400 =                  code_segment = $400  
                        
                        ;self modifying code may be disabled to allow running 
                        ;0=part of the code is self modifying and must reside 
                        ;1=tests disabled: branch range
0001 =                  disable_selfmod = 1
                        
                        ;report errors through I/O channel (0=use standard sel
                        ;report.i65 as I/O channel, add 3.5 kB)
0000 =                  report = 0
                        
AS65 Assembler for R6502 [1.42].                                     Page    3
------------------------------ func_test_1.a65 -------------------------------

                        ;RAM integrity test option. Checks for undesired RAM w
                        ;set lowest non RAM or RAM mirror address page (-1=dis
                        ;leave disabled if a monitor, OS or background interru
ffff =                  ram_top = -1
                        
                        ;disable test decimal mode ADC & SBC, 0=enable, 1=disa
                        ;2=disable including decimal flag in processor status
0001 =                  disable_decimal = 1
                        
                                noopt       ;do not take shortcuts
                        
                        ;macros for error & success traps to allow user modifi
                        ;example:
                        ;trap    macro
                        ;        jsr my_error_handler
                        ;        endm
                        ;trap_eq macro
                        ;        bne skip\?
                        ;        trap           ;failed equal (zero)
                        ;skip\?
                        ;        endm
                        ;
                        ; my_error_handler should pop the calling address from
                        ; putting larger portions of code (more than 3 bytes) 
                        ; may lead to branch range problems for some tests.
                            if report = 0
                        trap    macro
                                jmp *           ;failed anyway
                                endm
                        trap_eq macro
                                beq *           ;failed equal (zero)
                        		endm
                        trap_ne macro
                                bne *         ;failed not equal (non zero)
                        		endm
                        trap_cs macro
                                bcs *           ;failed carry set
                        		endm
                        trap_cc macro
                                bcc *           ;failed carry clear
                        		endm
                        trap_mi macro
                                bmi *         ;failed minus (bit 7 set)
                        		endm
                        trap_pl macro
                                bpl *          ;failed plus (bit 7 clear)
                        		endm
                        trap_vs macro
                                bvs *           ;failed overflow set
                        		endm
                        trap_vc macro
                                bvc *           ;failed overflow clear
                        		endm
                        ; please observe that during the test the stack gets i
                        ; therefore a RTS inside the success macro is not poss
                        success macro
                                jmp *           ;test passed, no errors
                                endm
                            endif
                            if report = 1
                        trap    macro
                                jsr report_error
AS65 Assembler for R6502 [1.42].                                     Page    4
------------------------------ func_test_1.a65 -------------------------------

                                endm
                        trap_eq macro
                                bne skip\?
                                trap           ;failed equal (zero)
                        skip\?
                                endm
                        trap_ne macro
                                beq skip\?
                                trap            ;failed not equal (non zero)
                        skip\?
                                endm
                        trap_cs macro
                                bcc skip\?
                                trap            ;failed carry set
                        skip\?
                                endm
                        trap_cc macro
                                bcs skip\?
                                trap            ;failed carry clear
                        skip\?
                                endm
                        trap_mi macro
                                bpl skip\?
                                trap            ;failed minus (bit 7 set)
                        skip\?
                                endm
                        trap_pl macro
                                bmi skip\?
                                trap            ;failed plus (bit 7 clear)
                        skip\?
                                endm
                        trap_vs macro
                                bvc skip\?
                                trap            ;failed overflow set
                        skip\?
                                endm
                        trap_vc macro
                                bvs skip\?
                                trap            ;failed overflow clear
                        skip\?
                                endm
                        ; please observe that during the test the stack gets i
                        ; therefore a RTS inside the success macro is not poss
                        success macro
                                jsr report_success
                                endm
                            endif
                        
                        
0001 =                  carry   equ %00000001   ;flag bits in status
0002 =                  zero    equ %00000010
0004 =                  intdis  equ %00000100
0008 =                  decmode equ %00001000
0010 =                  break   equ %00010000
0020 =                  reserv  equ %00100000
0040 =                  overfl  equ %01000000
0080 =                  minus   equ %10000000
                        
0001 =                  fc      equ carry
0002 =                  fz      equ zero
0003 =                  fzc     equ carry+zero
0040 =                  fv      equ overfl
AS65 Assembler for R6502 [1.42].                                     Page    5
------------------------------ func_test_1.a65 -------------------------------

0042 =                  fvz     equ overfl+zero
0080 =                  fn      equ minus
0081 =                  fnc     equ minus+carry
0082 =                  fnz     equ minus+zero
0083 =                  fnzc    equ minus+zero+carry
00c0 =                  fnv     equ minus+overfl
                        
0030 =                  fao     equ break+reserv    ;bits always on after PHP,
0034 =                  fai     equ fao+intdis      ;+ forced interrupt disabl
0038 =                  faod    equ fao+decmode     ;+ ignore decimal
003c =                  faid    equ fai+decmode     ;+ ignore decimal
00ff =                  m8      equ $ff             ;8 bit mask
00fb =                  m8i     equ $ff&~intdis     ;8 bit mask - interrupt di
                        
                        ;macros to allow masking of status bits.
                        ;masking test of decimal bit
                        ;masking of interrupt enable/disable on load and compa
                        ;masking of always on bits after PHP or BRK (unused & 
                            if disable_decimal < 2
                                if I_flag = 0
                        load_flag   macro
                                    lda #\1&m8i         ;force enable interrup
                                    endm
                        cmp_flag    macro
                                    cmp #(\1|fao)&m8i   ;I_flag is always enab
                                    endm
                        eor_flag    macro
                                    eor #(\1&m8i|fao)   ;mask I, invert expect
                                    endm
                                endif
                                if I_flag = 1
                        load_flag   macro
                                    lda #\1|intdis      ;force disable interru
                                    endm
                        cmp_flag    macro
                                    cmp #(\1|fai)&m8    ;I_flag is always disa
                                    endm
                        eor_flag    macro
                                    eor #(\1|fai)       ;invert expected flags
                                    endm
                                endif
                                if I_flag = 2
                        load_flag   macro
                                    lda #\1
                                    ora flag_I_on       ;restore I-flag
                                    and flag_I_off
                                    endm
                        cmp_flag    macro
                                    eor flag_I_on       ;I_flag is never chang
                                    cmp #(\1|fao)&m8i   ;expected flags + alwa
                                    endm
                        eor_flag    macro
                                    eor flag_I_on       ;I_flag is never chang
                                    eor #(\1&m8i|fao)   ;mask I, invert expect
                                    endm
                                endif
                                if I_flag = 3
                        load_flag   macro
                                    lda #\1             ;allow test to change 
                                    endm
                        cmp_flag    macro
                                    cmp #(\1|fao)&m8    ;expected flags + alwa
AS65 Assembler for R6502 [1.42].                                     Page    6
------------------------------ func_test_1.a65 -------------------------------

                                    endm
                        eor_flag    macro
                                    eor #\1|fao         ;invert expected flags
                                    endm
                                endif
                            else
                                if I_flag = 0
                        load_flag   macro
                                    lda #\1&m8i         ;force enable interrup
                                    endm
                        cmp_flag    macro
                                    ora #decmode        ;ignore decimal mode b
                                    cmp #(\1|faod)&m8i  ;I_flag is always enab
                                    endm
                        eor_flag    macro
                                    ora #decmode        ;ignore decimal mode b
                                    eor #(\1&m8i|faod)  ;mask I, invert expect
                                    endm
                                endif
                                if I_flag = 1
                        load_flag   macro
                                    lda #\1|intdis      ;force disable interru
                                    endm
                        cmp_flag    macro
                                    ora #decmode        ;ignore decimal mode b
                                    cmp #(\1|faid)&m8   ;I_flag is always disa
                                    endm
                        eor_flag    macro
                                    ora #decmode        ;ignore decimal mode b
                                    eor #(\1|faid)      ;invert expected flags
                                    endm
                                endif
                                if I_flag = 2
                        load_flag   macro
                                    lda #\1
                                    ora flag_I_on       ;restore I-flag
                                    and flag_I_off
                                    endm
                        cmp_flag    macro
                                    eor flag_I_on       ;I_flag is never chang
                                    ora #decmode        ;ignore decimal mode b
                                    cmp #(\1|faod)&m8i  ;expected flags + alwa
                                    endm
                        eor_flag    macro
                                    eor flag_I_on       ;I_flag is never chang
                                    ora #decmode        ;ignore decimal mode b
                                    eor #(\1&m8i|faod)  ;mask I, invert expect
                                    endm
                                endif
                                if I_flag = 3
                        load_flag   macro
                                    lda #\1             ;allow test to change 
                                    endm
                        cmp_flag    macro
                                    ora #decmode        ;ignore decimal mode b
                                    cmp #(\1|faod)&m8   ;expected flags + alwa
                                    endm
                        eor_flag    macro
                                    ora #decmode        ;ignore decimal mode b
                                    eor #\1|faod        ;invert expected flags
                                    endm
                                endif
AS65 Assembler for R6502 [1.42].                                     Page    7
------------------------------ func_test_1.a65 -------------------------------

                            endif
                        
                        ;macros to set (register|memory|zeropage) & status
                        set_stat    macro       ;setting flags in the processo
                                    load_flag \1
                                    pha         ;use stack to load status
                                    plp
                                    endm
                        
                        set_a       macro       ;precharging accu & status
                                    load_flag \2
                                    pha         ;use stack to load status
                                    lda #\1     ;precharge accu
                                    plp
                                    endm
                        
                        set_x       macro       ;precharging index & status
                                    load_flag \2
                                    pha         ;use stack to load status
                                    ldx #\1     ;precharge index x
                                    plp
                                    endm
                        
                        set_y       macro       ;precharging index & status
                                    load_flag \2
                                    pha         ;use stack to load status
                                    ldy #\1     ;precharge index y
                                    plp
                                    endm
                        
                        set_ax      macro       ;precharging indexed accu & im
                                    load_flag \2
                                    pha         ;use stack to load status
                                    lda \1,x    ;precharge accu
                                    plp
                                    endm
                        
                        set_ay      macro       ;precharging indexed accu & im
                                    load_flag \2
                                    pha         ;use stack to load status
                                    lda \1,y    ;precharge accu
                                    plp
                                    endm
                        
                        set_z       macro       ;precharging indexed zp & imme
                                    load_flag \2
                                    pha         ;use stack to load status
                                    lda \1,x    ;load to zeropage
                                    sta zpt
                                    plp
                                    endm
                        
                        set_zx      macro       ;precharging zp,x & immediate 
                                    load_flag \2
                                    pha         ;use stack to load status
                                    lda \1,x    ;load to indexed zeropage
                                    sta zpt,x
                                    plp
                                    endm
                        
                        set_abs     macro       ;precharging indexed memory & 
                                    load_flag \2
AS65 Assembler for R6502 [1.42].                                     Page    8
------------------------------ func_test_1.a65 -------------------------------

                                    pha         ;use stack to load status
                                    lda \1,x    ;load to memory
                                    sta abst
                                    plp
                                    endm
                        
                        set_absx    macro       ;precharging abs,x & immediate
                                    load_flag \2
                                    pha         ;use stack to load status
                                    lda \1,x    ;load to indexed memory
                                    sta abst,x
                                    plp
                                    endm
                        
                        ;macros to test (register|memory|zeropage) & status & 
                        tst_stat    macro       ;testing flags in the processo
                                    php         ;save status
                                    pla         ;use stack to retrieve status
                                    pha
                                    cmp_flag \1
                                    trap_ne
                                    plp         ;restore status
                                    endm
                                    
                        tst_a       macro       ;testing result in accu & flag
                                    php         ;save flags
                                    cmp #\1     ;test result
                                    trap_ne
                                    pla         ;load status
                                    pha
                                    cmp_flag \2
                                    trap_ne
                                    plp         ;restore status
                                    endm
                        
                        tst_x       macro       ;testing result in x index & f
                                    php         ;save flags
                                    cpx #\1     ;test result
                                    trap_ne
                                    pla         ;load status
                                    pha
                                    cmp_flag \2
                                    trap_ne
                                    plp         ;restore status
                                    endm
                        
                        tst_y       macro       ;testing result in y index & f
                                    php         ;save flags
                                    cpy #\1     ;test result
                                    trap_ne
                                    pla         ;load status
                                    pha
                                    cmp_flag \2
                                    trap_ne
                                    plp         ;restore status
                                    endm
                        
                        tst_ax      macro       ;indexed testing result in acc
                                    php         ;save flags
                                    cmp \1,x    ;test result
                                    trap_ne
                                    pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page    9
------------------------------ func_test_1.a65 -------------------------------

                                    eor_flag \3
                                    cmp \2,x    ;test flags
                                    trap_ne     ;
                                    endm
                        
                        tst_ay      macro       ;indexed testing result in acc
                                    php         ;save flags
                                    cmp \1,y    ;test result
                                    trap_ne     ;
                                    pla         ;load status
                                    eor_flag \3
                                    cmp \2,y    ;test flags
                                    trap_ne
                                    endm
                                
                        tst_z       macro       ;indexed testing result in zp 
                                    php         ;save flags
                                    lda zpt
                                    cmp \1,x    ;test result
                                    trap_ne
                                    pla         ;load status
                                    eor_flag \3
                                    cmp \2,x    ;test flags
                                    trap_ne
                                    endm
                        
                        tst_zx      macro       ;testing result in zp,x & flag
                                    php         ;save flags
                                    lda zpt,x
                                    cmp \1,x    ;test result
                                    trap_ne
                                    pla         ;load status
                                    eor_flag \3
                                    cmp \2,x    ;test flags
                                    trap_ne
                                    endm
                        
                        tst_abs     macro       ;indexed testing result in mem
                                    php         ;save flags
                                    lda abst
                                    cmp \1,x    ;test result
                                    trap_ne
                                    pla         ;load status
                                    eor_flag \3
                                    cmp \2,x    ;test flags
                                    trap_ne
                                    endm
                        
                        tst_absx    macro       ;testing result in abs,x & fla
                                    php         ;save flags
                                    lda abst,x
                                    cmp \1,x    ;test result
                                    trap_ne
                                    pla         ;load status
                                    eor_flag \3
                                    cmp \2,x    ;test flags
                                    trap_ne
                                    endm
                                    
                        ; RAM integrity test
                        ;   verifies that none of the previous tests has alter
                        ;   designated write areas.
AS65 Assembler for R6502 [1.42].                                     Page   10
------------------------------ func_test_1.a65 -------------------------------

                        ;   uses zpt word as indirect pointer, zpt+2 word as c
                                if ram_top > -1
                        check_ram   macro 
                                    cld
                                    lda #0
                                    sta zpt         ;set low byte of indirect 
                                    sta zpt+3       ;checksum high byte
                                  if disable_selfmod = 0
                                    sta range_adr   ;reset self modifying code
                                  endif
                                    clc
                                    ldx #zp_bss-zero_page ;zeropage - write te
                        ccs3\?      adc zero_page,x
                                    bcc ccs2\?
                                    inc zpt+3       ;carry to high byte
                                    clc
                        ccs2\?      inx
                                    bne ccs3\?
                                    ldx #hi(abs1)   ;set high byte of indirect
                                    stx zpt+1
                                    ldy #lo(abs1)   ;data after write & execut
                        ccs5\?      adc (zpt),y
                                    bcc ccs4\?
                                    inc zpt+3       ;carry to high byte
                                    clc
                        ccs4\?      iny
                                    bne ccs5\?
                                    inx             ;advance RAM high address
                                    stx zpt+1
                                    cpx #ram_top
                                    bne ccs5\?
                                    sta zpt+2       ;checksum low is
                                    cmp ram_chksm   ;checksum low expected
                                    trap_ne         ;checksum mismatch
                                    lda zpt+3       ;checksum high is
                                    cmp ram_chksm+1 ;checksum high expected
                                    trap_ne         ;checksum mismatch
                                    endm            
                                else
                        check_ram   macro
                                    ;RAM check disabled - RAM size not set
                                    endm
                                endif
                        
                        next_test   macro           ;make sure, tests don't ju
                                    lda test_case   ;previous test
                                    cmp #test_num
                                    trap_ne         ;test is out of sequence
                        test_num = test_num + 1
                                    lda #test_num   ;*** next tests' number
                                    sta test_case
                                    ;check_ram       ;uncomment to find altere
                                    endm
                        
                            if load_data_direct = 1
                                data
                            else
                                bss                 ;uninitialized segment, co
                            endif
0000 =                          org zero_page
                        ;break test interrupt save
0000 : 00               irq_a   ds  1               ;a register
AS65 Assembler for R6502 [1.42].                                     Page   11
------------------------------ func_test_1.a65 -------------------------------

0001 : 00               irq_x   ds  1               ;x register
                            if I_flag = 2
                        ;masking for I bit in status
                        flag_I_on   ds  1           ;or mask to load flags   
                        flag_I_off  ds  1           ;and mask to load flags
                            endif
0002 :                  zpt                         ;6 bytes store/modify test
                        ;add/subtract operand generation and result/flag predi
0002 : 00               adfc    ds  1               ;carry flag before op
0003 : 00               ad1     ds  1               ;operand 1 - accumulator
0004 : 00               ad2     ds  1               ;operand 2 - memory / imme
0005 : 00               adrl    ds  1               ;expected result bits 0-7
0006 : 00               adrh    ds  1               ;expected result bit 8 (ca
0007 : 00               adrf    ds  1               ;expected flags NV0000ZC (
0008 : 00               sb2     ds  1               ;operand 2 complemented fo
0009 :                  zp_bss
0009 : 8001             zps     db  $80,1           ;additional shift pattern 
000b : c3824100         zp1     db  $c3,$82,$41,0   ;test patterns for LDx BIT
000f : 7f               zp7f    db  $7f             ;test pattern for compare 
                        ;logical zeropage operands
0010 : 001f7180         zpOR    db  0,$1f,$71,$80   ;test pattern for OR
0014 : 0fff7f80         zpAN    db  $0f,$ff,$7f,$80 ;test pattern for AND
0018 : ff0f8f8f         zpEO    db  $ff,$0f,$8f,$8f ;test pattern for EOR
                        ;indirect addressing pointers
001c : 1802             ind1    dw  abs1            ;indirect pointer to patte
001e : 1902                     dw  abs1+1
0020 : 1a02                     dw  abs1+2
0022 : 1b02                     dw  abs1+3
0024 : 1c02                     dw  abs7f
0026 : 2001             inw1    dw  abs1-$f8        ;indirect pointer for wrap
0028 : 0302             indt    dw  abst            ;indirect pointer to store
002a : 0402                     dw  abst+1
002c : 0502                     dw  abst+2
002e : 0602                     dw  abst+3
0030 : 0b01             inwt    dw  abst-$f8        ;indirect pointer for wrap
0032 : 5f02             indAN   dw  absAN           ;indirect pointer to AND p
0034 : 6002                     dw  absAN+1
0036 : 6102                     dw  absAN+2
0038 : 6202                     dw  absAN+3
003a : 6302             indEO   dw  absEO           ;indirect pointer to EOR p
003c : 6402                     dw  absEO+1
003e : 6502                     dw  absEO+2
0040 : 6602                     dw  absEO+3
0042 : 5b02             indOR   dw  absOR           ;indirect pointer to OR pa
0044 : 5c02                     dw  absOR+1
0046 : 5d02                     dw  absOR+2
0048 : 5e02                     dw  absOR+3
                        ;add/subtract indirect pointers
004a : 0302             adi2    dw  ada2            ;indirect pointer to opera
004c : 0402             sbi2    dw  sba2            ;indirect pointer to compl
004e : 0401             adiy2   dw  ada2-$ff        ;with offset for indirect 
0050 : 0501             sbiy2   dw  sba2-$ff
0052 :                  zp_bss_end
                           
0200 =                          org data_segment
0200 : 00               test_case   ds  1           ;current test number
0201 : 0000             ram_chksm   ds  2           ;checksum for RAM integrit
                        ;add/subtract operand copy - abs tests write area
0203 :                  abst                        ;6 bytes store/modify test
0203 : 00               ada2    ds  1               ;operand 2
0204 : 00               sba2    ds  1               ;operand 2 complemented fo
0205 : 00000000                 ds  4               ;fill remaining bytes
AS65 Assembler for R6502 [1.42].                                     Page   12
------------------------------ func_test_1.a65 -------------------------------

0209 :                  data_bss
                            if load_data_direct = 1
0209 : 2900             ex_andi and #0              ;execute immediate opcodes
020b : 60                       rts
020c : 4900             ex_eori eor #0              ;execute immediate opcodes
020e : 60                       rts
020f : 0900             ex_orai ora #0              ;execute immediate opcodes
0211 : 60                       rts
0212 : 6900             ex_adci adc #0              ;execute immediate opcodes
0214 : 60                       rts
0215 : e900             ex_sbci sbc #0              ;execute immediate opcodes
0217 : 60                       rts
                            else
                        ex_andi ds  3
                        ex_eori ds  3
                        ex_orai ds  3
                        ex_adci ds  3
                        ex_sbci ds  3
                            endif
                        ;zps    db  $80,1           ;additional shift patterns
0218 : c3824100         abs1    db  $c3,$82,$41,0   ;test patterns for LDx BIT
021c : 7f               abs7f   db  $7f             ;test pattern for compare
                        ;loads
021d : 80800002         fLDx    db  fn,fn,0,fz              ;expected flags fo
                        ;shifts
0221 :                  rASL                                ;expected result A
0221 : 000286048200     rROL    db  0,2,$86,$04,$82,0
0227 : 010387058301     rROLc   db  1,3,$87,$05,$83,1       ;expected result R
022d :                  rLSR                                ;expected result L
022d : 400061412000     rROR    db  $40,0,$61,$41,$20,0
0233 : c080e1c1a080     rRORc   db  $c0,$80,$e1,$c1,$a0,$80 ;expected result R
0239 :                  fASL                                ;expected flags fo
0239 : 030081018002     fROL    db  fzc,0,fnc,fc,fn,fz      ;no carry in
023f : 010081018000     fROLc   db  fc,0,fnc,fc,fn,0        ;carry in 
0245 :                  fLSR 
0245 : 000301000102     fROR    db  0,fzc,fc,0,fc,fz        ;no carry in
024b : 808181808180     fRORc   db  fn,fnc,fnc,fn,fnc,fn    ;carry in
                        ;increments (decrements)
0251 : 7f80ff0001       rINC    db  $7f,$80,$ff,0,1         ;expected result f
0256 : 0080800200       fINC    db  0,fn,fn,fz,0            ;expected flags fo
                        ;logical memory operand
025b : 001f7180         absOR   db  0,$1f,$71,$80           ;test pattern for 
025f : 0fff7f80         absAN   db  $0f,$ff,$7f,$80         ;test pattern for 
0263 : ff0f8f8f         absEO   db  $ff,$0f,$8f,$8f         ;test pattern for 
                        ;logical accu operand
0267 : 00f11f00         absORa  db  0,$f1,$1f,0             ;test pattern for 
026b : f0ffffff         absANa  db  $f0,$ff,$ff,$ff         ;test pattern for 
026f : fff0f00f         absEOa  db  $ff,$f0,$f0,$0f         ;test pattern for 
                        ;logical results
0273 : 00ff7f80         absrlo  db  0,$ff,$7f,$80
0277 : 02800080         absflo  db  fz,fn,0,fn
027b :                  data_bss_end
                        
                        
                                code
0400 =                          org code_segment
0400 : d8               start   cld
0401 : a2ff                     ldx #$ff
0403 : 9a                       txs
0404 : a900                     lda #0          ;*** test 0 = initialize
0406 : 8d0002                   sta test_case
0000 =                  test_num = 0
AS65 Assembler for R6502 [1.42].                                     Page   13
------------------------------ func_test_1.a65 -------------------------------

                        
                        ;stop interrupts before initializing BSS
                            if I_flag = 1
                                sei
                            endif
                            
                        ;initialize I/O for report channel
                            if report = 1
                                jsr report_init
                            endif
                            
                        ;pretest small branch offset
0409 : a205                     ldx #5
040b : 4c3304                   jmp psb_test
040e :                  psb_bwok
040e : a005                     ldy #5
0410 : d008                     bne psb_forw
                                trap        ;branch should be taken
                        
0415 : 88                       dey         ;forward landing zone
0416 : 88                       dey
0417 : 88                       dey
0418 : 88                       dey
0419 : 88                       dey
041a :                  psb_forw
041a : 88                       dey
041b : 88                       dey
041c : 88                       dey
041d : 88                       dey
041e : 88                       dey
041f : f017                     beq psb_fwok
                                trap        ;forward offset
                        
                        
0424 : ca                       dex         ;backward landing zone
0425 : ca                       dex
0426 : ca                       dex
0427 : ca                       dex
0428 : ca                       dex
0429 :                  psb_back
0429 : ca                       dex
042a : ca                       dex
042b : ca                       dex
042c : ca                       dex
042d : ca                       dex
042e : f0de                     beq psb_bwok
                                trap        ;backward offset
                        
0433 :                  psb_test
0433 : d0f4                     bne psb_back
                                trap        ;branch should be taken
                        
0438 :                  psb_fwok
                                
                        ;initialize BSS segment
                            if load_data_direct != 1
                                ldx #zp_end-zp_init-1
                        ld_zp   lda zp_init,x
                                sta zp_bss,x
                                dex
                                bpl ld_zp
                                ldx #data_end-data_init-1
AS65 Assembler for R6502 [1.42].                                     Page   14
------------------------------ func_test_1.a65 -------------------------------

                        ld_data lda data_init,x
                                sta data_bss,x
                                dex
                                bpl ld_data
                              if ROM_vectors = 1
                                ldx #5
                        ld_vect lda vec_init,x
                                sta vec_bss,x
                                dex
                                bpl ld_vect
                              endif
                            endif
                        
                        ;retain status of interrupt flag
                            if I_flag = 2
                                php
                                pla
                                and #4          ;isolate flag
                                sta flag_I_on   ;or mask
                                eor #lo(~4)     ;reverse
                                sta flag_I_off  ;and mask
                            endif
                                
                        ;generate checksum for RAM integrity test
                            if ram_top > -1
                                lda #0 
                                sta zpt         ;set low byte of indirect poin
                                sta ram_chksm+1 ;checksum high byte
                              if disable_selfmod = 0
                                sta range_adr   ;reset self modifying code
                              endif
                                clc
                                ldx #zp_bss-zero_page ;zeropage - write test a
                        gcs3    adc zero_page,x
                                bcc gcs2
                                inc ram_chksm+1 ;carry to high byte
                                clc
                        gcs2    inx
                                bne gcs3
                                ldx #hi(abs1)   ;set high byte of indirect poi
                                stx zpt+1
                                ldy #lo(abs1)   ;data after write & execute te
                        gcs5    adc (zpt),y
                                bcc gcs4
                                inc ram_chksm+1 ;carry to high byte
                                clc
                        gcs4    iny
                                bne gcs5
                                inx             ;advance RAM high address
                                stx zpt+1
                                cpx #ram_top
                                bne gcs5
                                sta ram_chksm   ;checksum complete
                            endif
                                next_test            
                        
                        
                            if disable_selfmod = 0
                        ;testing relative addressing with BEQ
                                ldy #$fe        ;testing maximum range, not -1
                        range_loop
                                dey             ;next relative address
AS65 Assembler for R6502 [1.42].                                     Page   15
------------------------------ func_test_1.a65 -------------------------------

                                tya
                                tax             ;precharge count to end of loo
                                bpl range_fw    ;calculate relative address
                                clc             ;avoid branch self or to relat
                                adc #2
                                nop             ;offset landing zone - tolerat
                                nop
                                nop
                                nop
                                nop
                        range_fw
                                nop
                                nop
                                nop
                                nop
                                nop
                                eor #$7f        ;complement except sign
                                sta range_adr   ;load into test target
                                lda #0          ;should set zero flag in statu
                                jmp range_op
                                
                                dex             ; offset landing zone - backwa
                                dex
                                dex
                                dex
                                dex
                                ;relative address target field with branch und
                                dex             ;-128 - max backward
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-120
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-110
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-100
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
AS65 Assembler for R6502 [1.42].                                     Page   16
------------------------------ func_test_1.a65 -------------------------------

                                dex
                                dex
                                dex
                                dex             ;-90
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-80
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-70
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-60
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-50
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-40
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
AS65 Assembler for R6502 [1.42].                                     Page   17
------------------------------ func_test_1.a65 -------------------------------

                                dex
                                dex             ;-30
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-20
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-10
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;-3
                        range_op                ;test target with zero flag=0,
                        range_adr   = *+1       ;modifiable relative address
                                beq *+64        ;+64 if called without modific
                                dex             ;+0
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+10
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+20
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
AS65 Assembler for R6502 [1.42].                                     Page   18
------------------------------ func_test_1.a65 -------------------------------

                                dex             ;+30
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+40
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+50
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+60
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+70
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+80
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+90
                                dex
AS65 Assembler for R6502 [1.42].                                     Page   19
------------------------------ func_test_1.a65 -------------------------------

                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+100
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+110
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex             ;+120
                                dex
                                dex
                                dex
                                dex
                                dex
                                dex
                                nop             ;offset landing zone - forward
                                nop
                                nop
                                nop
                                nop
                                beq range_ok    ;+127 - max forward
                                trap            ; bad range
                                nop             ;offset landing zone - tolerat
                                nop
                                nop
                                nop
                                nop
                        range_ok
                                nop
                                nop
                                nop
                                nop
                                nop
                                cpy #0
                                beq range_end   
                                jmp range_loop
                        range_end               ;range test successful
                            endif
                                next_test
                        
                        
                        ;partial test BNE & CMP, CPX, CPY immediate
AS65 Assembler for R6502 [1.42].                                     Page   20
------------------------------ func_test_1.a65 -------------------------------

0450 : c001                     cpy #1          ;testing BNE true
0452 : d003                     bne test_bne
                                trap 
                        
0457 :                  test_bne
0457 : a900                     lda #0 
0459 : c900                     cmp #0          ;test compare immediate 
                                trap_ne
                        
                                trap_cc
                        
                                trap_mi
                        
0461 : c901                     cmp #1
                                trap_eq 
                        
                                trap_cs
                        
                                trap_pl
                        
0469 : aa                       tax 
046a : e000                     cpx #0          ;test compare x immediate
                                trap_ne
                        
                                trap_cc
                        
                                trap_mi
                        
0472 : e001                     cpx #1
                                trap_eq 
                        
                                trap_cs
                        
                                trap_pl
                        
047a : a8                       tay 
047b : c000                     cpy #0          ;test compare y immediate
                                trap_ne
                        
                                trap_cc
                        
                                trap_mi
                        
0483 : c001                     cpy #1
                                trap_eq 
                        
                                trap_cs
                        
                                trap_pl
                        
                                next_test
                        
                        ;testing stack operations PHA PHP PLA PLP
                                    
0497 : a2ff                     ldx #$ff        ;initialize stack
0499 : 9a                       txs
049a : a955                     lda #$55
049c : 48                       pha
049d : a9aa                     lda #$aa
049f : 48                       pha
04a0 : cdfe01                   cmp $1fe        ;on stack ?
                                trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   21
------------------------------ func_test_1.a65 -------------------------------

                        
04a5 : ba                       tsx
04a6 : 8a                       txa             ;overwrite accu
04a7 : c9fd                     cmp #$fd        ;sp decremented?
                                trap_ne
                        
04ab : 68                       pla
04ac : c9aa                     cmp #$aa        ;successful retreived from sta
                                trap_ne
                        
04b0 : 68                       pla
04b1 : c955                     cmp #$55
                                trap_ne
                        
04b5 : cdff01                   cmp $1ff        ;remains on stack?
                                trap_ne
                        
04ba : ba                       tsx
04bb : e0ff                     cpx #$ff        ;sp incremented?
                                trap_ne
                        
                                next_test
                        
                        
                        ;testing branch decisions BPL BMI BVC BVS BCC BCS BNE 
                                set_stat $ff    ;all on
                        
04cf : 101a                     bpl nbr1        ;branches should not be taken
04d1 : 501b                     bvc nbr2
04d3 : 901c                     bcc nbr3
04d5 : d01d                     bne nbr4
04d7 : 3003                     bmi br1         ;branches should be taken
                                trap 
                        
04dc : 7003             br1     bvs br2
                                trap 
                        
04e1 : b003             br2     bcs br3
                                trap 
                        
04e6 : f00f             br3     beq br4
                                trap 
                        
04eb :                  nbr1
                                trap            ;previous bpl taken 
                        
04ee :                  nbr2
                                trap            ;previous bvc taken
                        
04f1 :                  nbr3
                                trap            ;previous bcc taken
                        
04f4 :                  nbr4
                                trap            ;previous bne taken
                        
04f7 : 08               br4     php
04f8 : ba                       tsx
04f9 : e0fe                     cpx #$fe        ;sp after php?
                                trap_ne
                        
04fd : 68                       pla
                                cmp_flag $ff    ;returned all flags on?
AS65 Assembler for R6502 [1.42].                                     Page   22
------------------------------ func_test_1.a65 -------------------------------

                        
                                trap_ne
                        
0502 : ba                       tsx
0503 : e0ff                     cpx #$ff        ;sp after php?
                                trap_ne
                        
                                set_stat 0      ;all off
                        
050b : 301a                     bmi nbr11       ;branches should not be taken
050d : 701b                     bvs nbr12
050f : b01c                     bcs nbr13
0511 : f01d                     beq nbr14
0513 : 1003                     bpl br11        ;branches should be taken
                                trap 
                        
0518 : 5003             br11    bvc br12
                                trap 
                        
051d : 9003             br12    bcc br13
                                trap 
                        
0522 : d00f             br13    bne br14
                                trap 
                        
0527 :                  nbr11
                                trap            ;previous bmi taken 
                        
052a :                  nbr12
                                trap            ;previous bvs taken 
                        
052d :                  nbr13
                                trap            ;previous bcs taken 
                        
0530 :                  nbr14
                                trap            ;previous beq taken 
                        
0533 : 08               br14    php
0534 : 68                       pla
                                ;cmp_flag 0      ;flags off except break (push
0535 : c900                     cmp #0
                        		trap_ne
                        
                                ;crosscheck flags
                                set_stat zero
                        
053d : d002                     bne brzs1
053f : f003                     beq brzs2
0541 :                  brzs1
                                trap            ;branch zero/non zero
                        
0544 : b002             brzs2   bcs brzs3
0546 : 9003                     bcc brzs4
0548 :                  brzs3
                                trap            ;branch carry/no carry
                        
054b : 3002             brzs4   bmi brzs5
054d : 1003                     bpl brzs6
054f :                  brzs5
                                trap            ;branch minus/plus
                        
0552 : 7002             brzs6   bvs brzs7
AS65 Assembler for R6502 [1.42].                                     Page   23
------------------------------ func_test_1.a65 -------------------------------

0554 : 5003                     bvc brzs8
0556 :                  brzs7
                                trap            ;branch overflow/no overflow
                        
0559 :                  brzs8
                                set_stat carry
                        
055d : f002                     beq brcs1
055f : d003                     bne brcs2
0561 :                  brcs1
                                trap            ;branch zero/non zero
                        
0564 : 9002             brcs2   bcc brcs3
0566 : b003                     bcs brcs4
0568 :                  brcs3
                                trap            ;branch carry/no carry
                        
056b : 3002             brcs4   bmi brcs5
056d : 1003                     bpl brcs6
056f :                  brcs5
                                trap            ;branch minus/plus
                        
0572 : 7002             brcs6   bvs brcs7
0574 : 5003                     bvc brcs8
0576 :                  brcs7
                                trap            ;branch overflow/no overflow
                        
                        
0579 :                  brcs8
                                set_stat minus
                        
057d : f002                     beq brmi1
057f : d003                     bne brmi2
0581 :                  brmi1
                                trap            ;branch zero/non zero
                        
0584 : b002             brmi2   bcs brmi3
0586 : 9003                     bcc brmi4
0588 :                  brmi3
                                trap            ;branch carry/no carry
                        
058b : 1002             brmi4   bpl brmi5
058d : 3003                     bmi brmi6
058f :                  brmi5
                                trap            ;branch minus/plus
                        
0592 : 7002             brmi6   bvs brmi7
0594 : 5003                     bvc brmi8
0596 :                  brmi7
                                trap            ;branch overflow/no overflow
                        
0599 :                  brmi8
                                set_stat overfl
                        
059d : f002                     beq brvs1
059f : d003                     bne brvs2
05a1 :                  brvs1
                                trap            ;branch zero/non zero
                        
05a4 : b002             brvs2   bcs brvs3
05a6 : 9003                     bcc brvs4
05a8 :                  brvs3
AS65 Assembler for R6502 [1.42].                                     Page   24
------------------------------ func_test_1.a65 -------------------------------

                                trap            ;branch carry/no carry
                        
05ab : 3002             brvs4   bmi brvs5
05ad : 1003                     bpl brvs6
05af :                  brvs5
                                trap            ;branch minus/plus
                        
05b2 : 5002             brvs6   bvc brvs7
05b4 : 7003                     bvs brvs8
05b6 :                  brvs7
                                trap            ;branch overflow/no overflow
                        
05b9 :                  brvs8
                                set_stat $ff-zero
                        
05bd : f002                     beq brzc1
05bf : d003                     bne brzc2
05c1 :                  brzc1
                                trap            ;branch zero/non zero
                        
05c4 : 9002             brzc2   bcc brzc3
05c6 : b003                     bcs brzc4
05c8 :                  brzc3
                                trap            ;branch carry/no carry
                        
05cb : 1002             brzc4   bpl brzc5
05cd : 3003                     bmi brzc6
05cf :                  brzc5
                                trap            ;branch minus/plus
                        
05d2 : 5002             brzc6   bvc brzc7
05d4 : 7003                     bvs brzc8
05d6 :                  brzc7
                                trap            ;branch overflow/no overflow
                        
05d9 :                  brzc8
                                set_stat $ff-carry
                        
05dd : d002                     bne brcc1
05df : f003                     beq brcc2
05e1 :                  brcc1
                                trap            ;branch zero/non zero
                        
05e4 : b002             brcc2   bcs brcc3
05e6 : 9003                     bcc brcc4
05e8 :                  brcc3
                                trap            ;branch carry/no carry
                        
05eb : 1002             brcc4   bpl brcc5
05ed : 3003                     bmi brcc6
05ef :                  brcc5
                                trap            ;branch minus/plus
                        
05f2 : 5002             brcc6   bvc brcc7
05f4 : 7003                     bvs brcc8
05f6 :                  brcc7
                                trap            ;branch overflow/no overflow
                        
05f9 :                  brcc8
                                set_stat $ff-minus
                        
05fd : d002                     bne brpl1
AS65 Assembler for R6502 [1.42].                                     Page   25
------------------------------ func_test_1.a65 -------------------------------

05ff : f003                     beq brpl2
0601 :                  brpl1
                                trap            ;branch zero/non zero
                        
0604 : 9002             brpl2   bcc brpl3
0606 : b003                     bcs brpl4
0608 :                  brpl3
                                trap            ;branch carry/no carry
                        
060b : 3002             brpl4   bmi brpl5
060d : 1003                     bpl brpl6
060f :                  brpl5
                                trap            ;branch minus/plus
                        
0612 : 5002             brpl6   bvc brpl7
0614 : 7003                     bvs brpl8
0616 :                  brpl7
                                trap            ;branch overflow/no overflow
                        
0619 :                  brpl8
                                set_stat $ff-overfl
                        
061d : d002                     bne brvc1
061f : f003                     beq brvc2
0621 :                  brvc1
                                trap            ;branch zero/non zero
                        
0624 : 9002             brvc2   bcc brvc3
0626 : b003                     bcs brvc4
0628 :                  brvc3
                                trap            ;branch carry/no carry
                        
062b : 1002             brvc4   bpl brvc5
062d : 3003                     bmi brvc6
062f :                  brvc5
                                trap            ;branch minus/plus
                        
0632 : 7002             brvc6   bvs brvc7
0634 : 5003                     bvc brvc8
0636 :                  brvc7
                                trap            ;branch overflow/no overflow
                        
0639 :                  brvc8
                                next_test
                        
                        
                        ; test PHA does not alter flags or accumulator but PLA
0645 : a255                     ldx #$55        ;x & y protected
0647 : a0aa                     ldy #$aa
                                set_a 1,$ff     ;push
                        
064f : 48                       pha
                                tst_a 1,$ff
                        
                                set_a 0,0
                        
0662 : 48                       pha
                                tst_a 0,0
                        
                                set_a $ff,$ff
                        
0675 : 48                       pha
AS65 Assembler for R6502 [1.42].                                     Page   26
------------------------------ func_test_1.a65 -------------------------------

                                tst_a $ff,$ff
                        
                                set_a 1,0
                        
0688 : 48                       pha
                                tst_a 1,0
                        
                                set_a 0,$ff
                        
069b : 48                       pha
                                tst_a 0,$ff
                        
                                set_a $ff,0
                        
06ae : 48                       pha
                                tst_a $ff,0
                        
                                set_a 0,$ff     ;pull
                        
06c1 : 68                       pla
                                tst_a $ff,$ff-zero
                        
                                set_a $ff,0
                        
06d4 : 68                       pla
                                tst_a 0,zero
                        
                                set_a $fe,$ff
                        
06e7 : 68                       pla
                                tst_a 1,$ff-zero-minus
                        
                                set_a 0,0
                        
06fa : 68                       pla
                                tst_a $ff,minus
                        
                                set_a $ff,$ff
                        
070d : 68                       pla
                                tst_a 0,$ff-minus
                        
                                set_a $fe,0
                        
0720 : 68                       pla
                                tst_a 1,0
                        
072d : e055                     cpx #$55        ;x & y unchanged?
                                trap_ne
                        
0731 : c0aa                     cpy #$aa
                                trap_ne
                        
                                next_test
                        
                         
                        ; partial pretest EOR #
                                set_a $3c,0
                        
0747 : 49c3                     eor #$c3
                                tst_a $ff,fn
                        
AS65 Assembler for R6502 [1.42].                                     Page   27
------------------------------ func_test_1.a65 -------------------------------

                                set_a $c3,0
                        
075b : 49c3                     eor #$c3
                                tst_a 0,fz
                        
                                next_test
                        
                        
                        ; PC modifying instructions except branches (NOP, JMP,
                        ; testing NOP
0775 : a224                     ldx #$24
0777 : a042                     ldy #$42
                                set_a $18,0
                        
077f : ea                       nop
                                tst_a $18,0
                        
078c : e024                     cpx #$24
                                trap_ne
                        
0790 : c042                     cpy #$42
                                trap_ne
                        
0794 : a2db                     ldx #$db
0796 : a0bd                     ldy #$bd
                                set_a $e7,$ff
                        
079e : ea                       nop
                                tst_a $e7,$ff
                        
07ab : e0db                     cpx #$db
                                trap_ne
                        
07af : c0bd                     cpy #$bd
                                trap_ne
                        
                                next_test
                        
                                
                        ; jump absolute
                                set_stat $0
                        
07c3 : a946                     lda #'F'
07c5 : a241                     ldx #'A'
07c7 : a052                     ldy #'R'        ;N=0, V=0, Z=0, C=0
07c9 : 4c8333                   jmp test_far
07cc : ea                       nop
07cd : ea                       nop
                                trap_ne         ;runover protection
                        
07d0 : e8                       inx
07d1 : e8                       inx
07d2 :                  far_ret 
                                trap_eq         ;returned flags OK?
                        
                                trap_pl
                        
                                trap_cc
                        
                                trap_vc
                        
07da : c9ec                     cmp #('F'^$aa)  ;returned registers OK?
AS65 Assembler for R6502 [1.42].                                     Page   28
------------------------------ func_test_1.a65 -------------------------------

                                trap_ne
                        
07de : e042                     cpx #('A'+1)
                                trap_ne
                        
07e2 : c04f                     cpy #('R'-3)
                                trap_ne
                        
07e6 : ca                       dex
07e7 : c8                       iny
07e8 : c8                       iny
07e9 : c8                       iny
07ea : 49aa                     eor #$aa        ;N=0, V=1, Z=0, C=1
07ec : 4cf507                   jmp test_near
07ef : ea                       nop
07f0 : ea                       nop
                                trap_ne         ;runover protection
                        
07f3 : e8                       inx
07f4 : e8                       inx
07f5 :                  test_near
                                trap_eq         ;passed flags OK?
                        
                                trap_mi
                        
                                trap_cc
                        
                                trap_vc
                        
07fd : c946                     cmp #'F'        ;passed registers OK?
                                trap_ne
                        
0801 : e041                     cpx #'A'
                                trap_ne
                        
0805 : c052                     cpy #'R'
                                trap_ne
                        
                                next_test
                        
                                
                        ; jump indirect
                                set_stat 0
                        
0819 : a949                     lda #'I'
081b : a24e                     ldx #'N'
081d : a044                     ldy #'D'        ;N=0, V=0, Z=0, C=0
081f : 6cb233                   jmp (ptr_tst_ind)
0822 : ea                       nop
                                trap_ne         ;runover protection
                        
0825 : 88                       dey
0826 : 88                       dey
0827 :                  ind_ret 
0827 : 08                       php             ;either SP or Y count will fai
0828 : 88                       dey
0829 : 88                       dey
082a : 88                       dey
082b : 28                       plp
                                trap_eq         ;returned flags OK?
                        
                                trap_pl
AS65 Assembler for R6502 [1.42].                                     Page   29
------------------------------ func_test_1.a65 -------------------------------

                        
                                trap_cc
                        
                                trap_vc
                        
0834 : c9e3                     cmp #('I'^$aa)  ;returned registers OK?
                                trap_ne
                        
0838 : e04f                     cpx #('N'+1)
                                trap_ne
                        
083c : c03e                     cpy #('D'-6)
                                trap_ne
                        
0840 : ba                       tsx             ;SP check
0841 : e0ff                     cpx #$ff
                                trap_ne
                        
                                next_test
                        
                        
                        ; jump subroutine & return from subroutine
                                set_stat 0
                        
0855 : a94a                     lda #'J'
0857 : a253                     ldx #'S'
0859 : a052                     ldy #'R'        ;N=0, V=0, Z=0, C=0
085b : 20f133                   jsr test_jsr
085d =                  jsr_ret = *-1           ;last address of jsr = return 
085e : 08                       php             ;either SP or Y count will fai
085f : 88                       dey
0860 : 88                       dey
0861 : 88                       dey
0862 : 28                       plp
                                trap_eq         ;returned flags OK?
                        
                                trap_pl
                        
                                trap_cc
                        
                                trap_vc
                        
086b : c9e0                     cmp #('J'^$aa)  ;returned registers OK?
                                trap_ne
                        
086f : e054                     cpx #('S'+1)
                                trap_ne
                        
0873 : c04c                     cpy #('R'-6)
                                trap_ne
                        
0877 : ba                       tsx             ;sp?
0878 : e0ff                     cpx #$ff
                                trap_ne
                        
                                next_test
                        
                        
                        ; break & return from interrupt
                            if ROM_vectors = 1
                                load_flag 0     ;with interrupts enabled if al
                        
AS65 Assembler for R6502 [1.42].                                     Page   30
------------------------------ func_test_1.a65 -------------------------------

088a : 48                       pha
088b : a942                     lda #'B'
088d : a252                     ldx #'R'
088f : a04b                     ldy #'K'
0891 : 28                       plp             ;N=0, V=0, Z=0, C=0
0892 : 00                       brk
                            else
                                lda #hi brk_ret0 ;emulated break
                                pha
                                lda #lo brk_ret0
                                pha
                                load_flag fao    ;set break & unused on stack
                                pha
                                load_flag intdis ;during interrupt
                                pha
                                lda #'B'
                                ldx #'R'
                                ldy #'K'
                                plp             ;N=0, V=0, Z=0, C=0
                                jmp irq_trap
                            endif
0893 : 88                       dey             ;should not be executed
0894 :                  brk_ret0                ;address of break return
0894 : 08                       php             ;either SP or Y count will fai
0895 : 88                       dey
0896 : 88                       dey
0897 : 88                       dey
0898 : c9e8                     cmp #'B'^$aa    ;returned registers OK?
                                ;the IRQ vector was never executed if A & X st
                                trap_ne
                        
089c : e053                     cpx #'R'+1
                                trap_ne
                        
08a0 : c045                     cpy #'K'-6
                                trap_ne
                        
08a4 : 68                       pla             ;returned flags OK (unchanged)
                                cmp_flag 0
                        
                                trap_ne
                        
08a9 : ba                       tsx             ;sp?
08aa : e0ff                     cpx #$ff
                                trap_ne
                        
                            if ROM_vectors = 1
                                load_flag $ff   ;with interrupts disabled if a
                        
08b0 : 48                       pha
08b1 : a9bd                     lda #$ff-'B'
08b3 : a2ad                     ldx #$ff-'R'
08b5 : a0b4                     ldy #$ff-'K'
08b7 : 28                       plp             ;N=1, V=1, Z=1, C=1
08b8 : 00                       brk
                            else
                                lda #hi brk_ret1 ;emulated break
                                pha
                                lda #lo brk_ret1
                                pha
                                load_flag $ff
                                pha             ;set break & unused on stack
AS65 Assembler for R6502 [1.42].                                     Page   31
------------------------------ func_test_1.a65 -------------------------------

                                pha             ;actual flags
                                lda #$ff-'B'
                                ldx #$ff-'R'
                                ldy #$ff-'K'
                                plp             ;N=1, V=1, Z=1, C=1
                                jmp irq_trap
                            endif
08b9 : 88                       dey             ;should not be executed
08ba :                  brk_ret1                ;address of break return
08ba : 08                       php             ;either SP or Y count will fai
08bb : 88                       dey
08bc : 88                       dey
08bd : 88                       dey
08be : c917                     cmp #($ff-'B')^$aa  ;returned registers OK?
                                ;the IRQ vector was never executed if A & X st
                                trap_ne
                        
08c2 : e0ae                     cpx #$ff-'R'+1
                                trap_ne
                        
08c6 : c0ae                     cpy #$ff-'K'-6
                                trap_ne
                        
08ca : 68                       pla             ;returned flags OK (unchanged)
                                cmp_flag $ff
                        
                                trap_ne
                        
08cf : ba                       tsx             ;sp?
08d0 : e0ff                     cpx #$ff
                                trap_ne
                        
                                next_test
                        
                         
                        ; test set and clear flags CLC CLI CLD CLV SEC SEI SED
                                set_stat $ff
                        
08e4 : 18                       clc
                                tst_stat $ff-carry
                        
08ed : 38                       sec
                                tst_stat $ff
                        
                            if I_flag = 3
08f6 : 58                       cli
                                tst_stat $ff-intdis
                        
08ff : 78                       sei
                                tst_stat $ff
                        
                            endif
0908 : d8                       cld
                                tst_stat $ff-decmode
                        
0911 : f8                       sed
                                tst_stat $ff
                        
091a : b8                       clv
                                tst_stat $ff-overfl
                        
                                set_stat 0
AS65 Assembler for R6502 [1.42].                                     Page   32
------------------------------ func_test_1.a65 -------------------------------

                        
                                tst_stat 0
                        
092f : 38                       sec
                                tst_stat carry
                        
0938 : 18                       clc
                                tst_stat 0  
                        
                            if I_flag = 3
0941 : 78                       sei
                                tst_stat intdis
                        
094a : 58                       cli
                                tst_stat 0
                        
                            endif  
0953 : f8                       sed
                                tst_stat decmode
                        
095c : d8                       cld
                                tst_stat 0  
                        
                                set_stat overfl
                        
                                tst_stat overfl
                        
0971 : b8                       clv
                                tst_stat 0
                        
                                next_test
                        
                        ; testing index register increment/decrement and trans
                        ; INX INY DEX DEY TAX TXA TAY TYA 
0986 : a2fe                     ldx #$fe
                                set_stat $ff
                        
098c : e8                       inx             ;ff
                                tst_x $ff,$ff-zero
                        
0999 : e8                       inx             ;00
                                tst_x 0,$ff-minus
                        
09a6 : e8                       inx             ;01
                                tst_x 1,$ff-minus-zero
                        
09b3 : ca                       dex             ;00
                                tst_x 0,$ff-minus
                        
09c0 : ca                       dex             ;ff
                                tst_x $ff,$ff-zero
                        
09cd : ca                       dex             ;fe
                                set_stat 0
                        
09d2 : e8                       inx             ;ff
                                tst_x $ff,minus
                        
09df : e8                       inx             ;00
                                tst_x 0,zero
                        
09ec : e8                       inx             ;01
AS65 Assembler for R6502 [1.42].                                     Page   33
------------------------------ func_test_1.a65 -------------------------------

                                tst_x 1,0
                        
09f9 : ca                       dex             ;00
                                tst_x 0,zero
                        
0a06 : ca                       dex             ;ff
                                tst_x $ff,minus
                        
                        
0a13 : a0fe                     ldy #$fe
                                set_stat $ff
                        
0a19 : c8                       iny             ;ff
                                tst_y $ff,$ff-zero
                        
0a26 : c8                       iny             ;00
                                tst_y 0,$ff-minus
                        
0a33 : c8                       iny             ;01
                                tst_y 1,$ff-minus-zero
                        
0a40 : 88                       dey             ;00
                                tst_y 0,$ff-minus
                        
0a4d : 88                       dey             ;ff
                                tst_y $ff,$ff-zero
                        
0a5a : 88                       dey             ;fe
                                set_stat 0
                        
0a5f : c8                       iny             ;ff
                                tst_y $ff,0+minus
                        
0a6c : c8                       iny             ;00
                                tst_y 0,zero
                        
0a79 : c8                       iny             ;01
                                tst_y 1,0
                        
0a86 : 88                       dey             ;00
                                tst_y 0,zero
                        
0a93 : 88                       dey             ;ff
                                tst_y $ff,minus
                        
                                        
0aa0 : a2ff                     ldx #$ff
                                set_stat $ff
                        
0aa6 : 8a                       txa
                                tst_a $ff,$ff-zero
                        
0ab3 : 08                       php
0ab4 : e8                       inx             ;00
0ab5 : 28                       plp
0ab6 : 8a                       txa
                                tst_a 0,$ff-minus
                        
0ac3 : 08                       php
0ac4 : e8                       inx             ;01
0ac5 : 28                       plp
0ac6 : 8a                       txa
AS65 Assembler for R6502 [1.42].                                     Page   34
------------------------------ func_test_1.a65 -------------------------------

                                tst_a 1,$ff-minus-zero
                        
                                set_stat 0
                        
0ad7 : 8a                       txa
                                tst_a 1,0
                        
0ae4 : 08                       php
0ae5 : ca                       dex             ;00
0ae6 : 28                       plp
0ae7 : 8a                       txa
                                tst_a 0,zero
                        
0af4 : 08                       php
0af5 : ca                       dex             ;ff
0af6 : 28                       plp
0af7 : 8a                       txa
                                tst_a $ff,minus
                        
                                                
0b04 : a0ff                     ldy #$ff
                                set_stat $ff
                        
0b0a : 98                       tya
                                tst_a $ff,$ff-zero
                        
0b17 : 08                       php
0b18 : c8                       iny             ;00
0b19 : 28                       plp
0b1a : 98                       tya
                                tst_a 0,$ff-minus
                        
0b27 : 08                       php
0b28 : c8                       iny             ;01
0b29 : 28                       plp
0b2a : 98                       tya
                                tst_a 1,$ff-minus-zero
                        
                                set_stat 0
                        
0b3b : 98                       tya
                                tst_a 1,0
                        
0b48 : 08                       php
0b49 : 88                       dey             ;00
0b4a : 28                       plp
0b4b : 98                       tya
                                tst_a 0,zero
                        
0b58 : 08                       php
0b59 : 88                       dey             ;ff
0b5a : 28                       plp
0b5b : 98                       tya
                                tst_a $ff,minus
                        
                        
                                load_flag $ff
                        
0b6a : 48                       pha
0b6b : a2ff                     ldx #$ff        ;ff
0b6d : 8a                       txa
0b6e : 28                       plp             
AS65 Assembler for R6502 [1.42].                                     Page   35
------------------------------ func_test_1.a65 -------------------------------

0b6f : a8                       tay
                                tst_y $ff,$ff-zero
                        
0b7c : 08                       php
0b7d : e8                       inx             ;00
0b7e : 8a                       txa
0b7f : 28                       plp
0b80 : a8                       tay
                                tst_y 0,$ff-minus
                        
0b8d : 08                       php
0b8e : e8                       inx             ;01
0b8f : 8a                       txa
0b90 : 28                       plp
0b91 : a8                       tay
                                tst_y 1,$ff-minus-zero
                        
                                load_flag 0
                        
0ba0 : 48                       pha
0ba1 : a900                     lda #0
0ba3 : 8a                       txa
0ba4 : 28                       plp
0ba5 : a8                       tay
                                tst_y 1,0
                        
0bb2 : 08                       php
0bb3 : ca                       dex             ;00
0bb4 : 8a                       txa
0bb5 : 28                       plp
0bb6 : a8                       tay
                                tst_y 0,zero
                        
0bc3 : 08                       php
0bc4 : ca                       dex             ;ff
0bc5 : 8a                       txa
0bc6 : 28                       plp
0bc7 : a8                       tay
                                tst_y $ff,minus
                        
                        
                        
                                load_flag $ff
                        
0bd6 : 48                       pha
0bd7 : a0ff                     ldy #$ff        ;ff
0bd9 : 98                       tya
0bda : 28                       plp
0bdb : aa                       tax
                                tst_x $ff,$ff-zero
                        
0be8 : 08                       php
0be9 : c8                       iny             ;00
0bea : 98                       tya
0beb : 28                       plp
0bec : aa                       tax
                                tst_x 0,$ff-minus
                        
0bf9 : 08                       php
0bfa : c8                       iny             ;01
0bfb : 98                       tya
0bfc : 28                       plp
AS65 Assembler for R6502 [1.42].                                     Page   36
------------------------------ func_test_1.a65 -------------------------------

0bfd : aa                       tax
                                tst_x 1,$ff-minus-zero
                        
                                load_flag 0
                        
0c0c : 48                       pha
0c0d : a900                     lda #0          ;preset status
0c0f : 98                       tya
0c10 : 28                       plp
0c11 : aa                       tax
                                tst_x 1,0
                        
0c1e : 08                       php
0c1f : 88                       dey             ;00
0c20 : 98                       tya
0c21 : 28                       plp
0c22 : aa                       tax
                                tst_x 0,zero
                        
0c2f : 08                       php
0c30 : 88                       dey             ;ff
0c31 : 98                       tya
0c32 : 28                       plp
0c33 : aa                       tax
                                tst_x $ff,minus
                        
                                next_test
                        
                             
                        ;TSX sets NZ - TXS does not
                        ;  This section also tests for proper stack wrap aroun
0c4c : a201                     ldx #1          ;01
                                set_stat $ff
                        
0c52 : 9a                       txs
0c53 : 08                       php
0c54 : ad0101                   lda $101
                                cmp_flag $ff
                        
                                trap_ne
                        
                                set_stat 0
                        
0c5f : 9a                       txs
0c60 : 08                       php
0c61 : ad0101                   lda $101
                                cmp_flag 0
                        
                                trap_ne
                        
0c68 : ca                       dex             ;00
                                set_stat $ff
                        
0c6d : 9a                       txs
0c6e : 08                       php
0c6f : ad0001                   lda $100
                                cmp_flag $ff
                        
                                trap_ne
                        
                                set_stat 0
                        
AS65 Assembler for R6502 [1.42].                                     Page   37
------------------------------ func_test_1.a65 -------------------------------

0c7a : 9a                       txs
0c7b : 08                       php
0c7c : ad0001                   lda $100
                                cmp_flag 0
                        
                                trap_ne
                        
0c83 : ca                       dex             ;ff
                                set_stat $ff
                        
0c88 : 9a                       txs
0c89 : 08                       php
0c8a : adff01                   lda $1ff
                                cmp_flag $ff
                        
                                trap_ne
                        
                                set_stat 0
                        
0c95 : 9a                       txs
0c96 : 08                       php
0c97 : adff01                   lda $1ff
                                cmp_flag 0
                        
                                
0c9c : a201                     ldx #1
0c9e : 9a                       txs             ;sp=01
                                set_stat $ff
                        
0ca3 : ba                       tsx             ;clears Z, N
0ca4 : 08                       php             ;sp=00
0ca5 : e001                     cpx #1
                                trap_ne
                        
0ca9 : ad0101                   lda $101
                                cmp_flag $ff-minus-zero
                        
                                trap_ne
                        
                                set_stat $ff
                        
0cb4 : ba                       tsx             ;clears N, sets Z
0cb5 : 08                       php             ;sp=ff
0cb6 : e000                     cpx #0
                                trap_ne
                        
0cba : ad0001                   lda $100
                                cmp_flag $ff-minus
                        
                                trap_ne
                        
                                set_stat $ff
                        
0cc5 : ba                       tsx             ;clears N, sets Z
0cc6 : 08                       php             ;sp=fe
0cc7 : e0ff                     cpx #$ff
                                trap_ne
                        
0ccb : adff01                   lda $1ff
                                cmp_flag $ff-zero
                        
                                trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   38
------------------------------ func_test_1.a65 -------------------------------

                        
                                
0cd2 : a201                     ldx #1
0cd4 : 9a                       txs             ;sp=01
                                set_stat 0
                        
0cd9 : ba                       tsx             ;clears Z, N
0cda : 08                       php             ;sp=00
0cdb : e001                     cpx #1
                                trap_ne
                        
0cdf : ad0101                   lda $101
                                cmp_flag 0
                        
                                trap_ne
                        
                                set_stat 0
                        
0cea : ba                       tsx             ;clears N, sets Z
0ceb : 08                       php             ;sp=ff
0cec : e000                     cpx #0
                                trap_ne
                        
0cf0 : ad0001                   lda $100
                                cmp_flag zero
                        
                                trap_ne
                        
                                set_stat 0
                        
0cfb : ba                       tsx             ;clears N, sets Z
0cfc : 08                       php             ;sp=fe
0cfd : e0ff                     cpx #$ff
                                trap_ne
                        
0d01 : adff01                   lda $1ff
                                cmp_flag minus
                        
                                trap_ne
                        
0d08 : 68                       pla             ;sp=ff
                                next_test
                        
                                
                        ; testing index register load & store LDY LDX STY STX 
                        ; LDX / STX - zp,y / abs,y
0d15 : a003                     ldy #3
0d17 :                  tldx    
                                set_stat 0
                        
0d1b : b60b                     ldx zp1,y
0d1d : 08                       php         ;test stores do not alter flags
0d1e : 8a                       txa
0d1f : 49c3                     eor #$c3
0d21 : 28                       plp
0d22 : 990302                   sta abst,y
0d25 : 08                       php         ;flags after load/store sequence
0d26 : 49c3                     eor #$c3
0d28 : d91802                   cmp abs1,y  ;test result
                                trap_ne
                        
0d2d : 68                       pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page   39
------------------------------ func_test_1.a65 -------------------------------

                                eor_flag 0
                        
0d30 : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
0d35 : 88                       dey
0d36 : 10df                     bpl tldx                  
                        
0d38 : a003                     ldy #3
0d3a :                  tldx1   
                                set_stat $ff
                        
0d3e : b60b                     ldx zp1,y
0d40 : 08                       php         ;test stores do not alter flags
0d41 : 8a                       txa
0d42 : 49c3                     eor #$c3
0d44 : 28                       plp
0d45 : 990302                   sta abst,y
0d48 : 08                       php         ;flags after load/store sequence
0d49 : 49c3                     eor #$c3
0d4b : d91802                   cmp abs1,y  ;test result
                                trap_ne
                        
0d50 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0d53 : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
0d58 : 88                       dey
0d59 : 10df                     bpl tldx1                  
                        
0d5b : a003                     ldy #3
0d5d :                  tldx2   
                                set_stat 0
                        
0d61 : be1802                   ldx abs1,y
0d64 : 08                       php         ;test stores do not alter flags
0d65 : 8a                       txa
0d66 : 49c3                     eor #$c3
0d68 : aa                       tax
0d69 : 28                       plp
0d6a : 9602                     stx zpt,y
0d6c : 08                       php         ;flags after load/store sequence
0d6d : 49c3                     eor #$c3
0d6f : d90b00                   cmp zp1,y   ;test result
                                trap_ne
                        
0d74 : 68                       pla         ;load status
                                eor_flag 0
                        
0d77 : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
0d7c : 88                       dey
0d7d : 10de                     bpl tldx2                  
                        
0d7f : a003                     ldy #3
0d81 :                  tldx3   
                                set_stat $ff
                        
0d85 : be1802                   ldx abs1,y
AS65 Assembler for R6502 [1.42].                                     Page   40
------------------------------ func_test_1.a65 -------------------------------

0d88 : 08                       php         ;test stores do not alter flags
0d89 : 8a                       txa
0d8a : 49c3                     eor #$c3
0d8c : aa                       tax
0d8d : 28                       plp
0d8e : 9602                     stx zpt,y
0d90 : 08                       php         ;flags after load/store sequence
0d91 : 49c3                     eor #$c3
0d93 : d90b00                   cmp zp1,y   ;test result
                                trap_ne
                        
0d98 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0d9b : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
0da0 : 88                       dey
0da1 : 10de                     bpl tldx3
                                
0da3 : a003                     ldy #3      ;testing store result
0da5 : a200                     ldx #0
0da7 : b90200           tstx    lda zpt,y
0daa : 49c3                     eor #$c3
0dac : d90b00                   cmp zp1,y
                                trap_ne     ;store to zp data
                        
0db1 : 9602                     stx zpt,y   ;clear                
0db3 : b90302                   lda abst,y
0db6 : 49c3                     eor #$c3
0db8 : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
0dbd : 8a                       txa
0dbe : 990302                   sta abst,y  ;clear                
0dc1 : 88                       dey
0dc2 : 10e3                     bpl tstx
                                next_test
                        
                                
                        ; indexed wraparound test (only zp should wrap)
0dd0 : a0fd                     ldy #3+$fa
0dd2 : b611             tldx4   ldx zp1-$fa&$ff,y   ;wrap on indexed zp
0dd4 : 8a                       txa
0dd5 : 990901                   sta abst-$fa,y      ;no STX abs,y!
0dd8 : 88                       dey
0dd9 : c0fa                     cpy #$fa
0ddb : b0f5                     bcs tldx4                  
0ddd : a0fd                     ldy #3+$fa
0ddf : be1e01           tldx5   ldx abs1-$fa,y      ;no wrap on indexed abs
0de2 : 9608                     stx zpt-$fa&$ff,y
0de4 : 88                       dey
0de5 : c0fa                     cpy #$fa
0de7 : b0f6                     bcs tldx5                  
0de9 : a003                     ldy #3      ;testing wraparound result
0deb : a200                     ldx #0
0ded : b90200           tstx1   lda zpt,y
0df0 : d90b00                   cmp zp1,y
                                trap_ne     ;store to zp data
                        
0df5 : 9602                     stx zpt,y   ;clear                
0df7 : b90302                   lda abst,y
AS65 Assembler for R6502 [1.42].                                     Page   41
------------------------------ func_test_1.a65 -------------------------------

0dfa : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
0dff : 8a                       txa
0e00 : 990302                   sta abst,y  ;clear                
0e03 : 88                       dey
0e04 : 10e7                     bpl tstx1
                                next_test
                        
                                
                        ; LDY / STY - zp,x / abs,x
0e12 : a203                     ldx #3
0e14 :                  tldy    
                                set_stat 0
                        
0e18 : b40b                     ldy zp1,x
0e1a : 08                       php         ;test stores do not alter flags
0e1b : 98                       tya
0e1c : 49c3                     eor #$c3
0e1e : 28                       plp
0e1f : 9d0302                   sta abst,x
0e22 : 08                       php         ;flags after load/store sequence
0e23 : 49c3                     eor #$c3
0e25 : dd1802                   cmp abs1,x  ;test result
                                trap_ne
                        
0e2a : 68                       pla         ;load status
                                eor_flag 0
                        
0e2d : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
0e32 : ca                       dex
0e33 : 10df                     bpl tldy                  
                        
0e35 : a203                     ldx #3
0e37 :                  tldy1   
                                set_stat $ff
                        
0e3b : b40b                     ldy zp1,x
0e3d : 08                       php         ;test stores do not alter flags
0e3e : 98                       tya
0e3f : 49c3                     eor #$c3
0e41 : 28                       plp
0e42 : 9d0302                   sta abst,x
0e45 : 08                       php         ;flags after load/store sequence
0e46 : 49c3                     eor #$c3
0e48 : dd1802                   cmp abs1,x  ;test result
                                trap_ne
                        
0e4d : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0e50 : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
0e55 : ca                       dex
0e56 : 10df                     bpl tldy1                  
                        
0e58 : a203                     ldx #3
0e5a :                  tldy2   
                                set_stat 0
AS65 Assembler for R6502 [1.42].                                     Page   42
------------------------------ func_test_1.a65 -------------------------------

                        
0e5e : bc1802                   ldy abs1,x
0e61 : 08                       php         ;test stores do not alter flags
0e62 : 98                       tya
0e63 : 49c3                     eor #$c3
0e65 : a8                       tay
0e66 : 28                       plp
0e67 : 9402                     sty zpt,x
0e69 : 08                       php         ;flags after load/store sequence
0e6a : 49c3                     eor #$c3
0e6c : d50b                     cmp zp1,x   ;test result
                                trap_ne
                        
0e70 : 68                       pla         ;load status
                                eor_flag 0
                        
0e73 : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
0e78 : ca                       dex
0e79 : 10df                     bpl tldy2                  
                        
0e7b : a203                     ldx #3
0e7d :                  tldy3
                                set_stat $ff
                        
0e81 : bc1802                   ldy abs1,x
0e84 : 08                       php         ;test stores do not alter flags
0e85 : 98                       tya
0e86 : 49c3                     eor #$c3
0e88 : a8                       tay
0e89 : 28                       plp
0e8a : 9402                     sty zpt,x
0e8c : 08                       php         ;flags after load/store sequence
0e8d : 49c3                     eor #$c3
0e8f : d50b                     cmp zp1,x   ;test result
                                trap_ne
                        
0e93 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0e96 : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
0e9b : ca                       dex
0e9c : 10df                     bpl tldy3
                        
0e9e : a203                     ldx #3      ;testing store result
0ea0 : a000                     ldy #0
0ea2 : b502             tsty    lda zpt,x
0ea4 : 49c3                     eor #$c3
0ea6 : d50b                     cmp zp1,x
                                trap_ne     ;store to zp,x data
                        
0eaa : 9402                     sty zpt,x   ;clear                
0eac : bd0302                   lda abst,x
0eaf : 49c3                     eor #$c3
0eb1 : dd1802                   cmp abs1,x
                                trap_ne     ;store to abs,x data
                        
0eb6 : 8a                       txa
0eb7 : 9d0302                   sta abst,x  ;clear                
AS65 Assembler for R6502 [1.42].                                     Page   43
------------------------------ func_test_1.a65 -------------------------------

0eba : ca                       dex
0ebb : 10e5                     bpl tsty
                                next_test
                        
                        
                        ; indexed wraparound test (only zp should wrap)
0ec9 : a2fd                     ldx #3+$fa
0ecb : b411             tldy4   ldy zp1-$fa&$ff,x   ;wrap on indexed zp
0ecd : 98                       tya
0ece : 9d0901                   sta abst-$fa,x      ;no STX abs,x!
0ed1 : ca                       dex
0ed2 : e0fa                     cpx #$fa
0ed4 : b0f5                     bcs tldy4                  
0ed6 : a2fd                     ldx #3+$fa
0ed8 : bc1e01           tldy5   ldy abs1-$fa,x      ;no wrap on indexed abs
0edb : 9408                     sty zpt-$fa&$ff,x
0edd : ca                       dex
0ede : e0fa                     cpx #$fa
0ee0 : b0f6                     bcs tldy5                  
0ee2 : a203                     ldx #3      ;testing wraparound result
0ee4 : a000                     ldy #0
0ee6 : b502             tsty1   lda zpt,x
0ee8 : d50b                     cmp zp1,x
                                trap_ne     ;store to zp,x data
                        
0eec : 9402                     sty zpt,x   ;clear                
0eee : bd0302                   lda abst,x
0ef1 : dd1802                   cmp abs1,x
                                trap_ne     ;store to abs,x data
                        
0ef6 : 8a                       txa
0ef7 : 9d0302                   sta abst,x  ;clear                
0efa : ca                       dex
0efb : 10e9                     bpl tsty1
                                next_test
                        
                        
                        ; LDX / STX - zp / abs / #
                                set_stat 0  
                        
0f0d : a60b                     ldx zp1
0f0f : 08                       php         ;test stores do not alter flags
0f10 : 8a                       txa
0f11 : 49c3                     eor #$c3
0f13 : aa                       tax
0f14 : 28                       plp
0f15 : 8e0302                   stx abst
0f18 : 08                       php         ;flags after load/store sequence
0f19 : 49c3                     eor #$c3
0f1b : aa                       tax
0f1c : e0c3                     cpx #$c3    ;test result
                                trap_ne
                        
0f20 : 68                       pla         ;load status
                                eor_flag 0
                        
0f23 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
0f2c : a60c                     ldx zp1+1
AS65 Assembler for R6502 [1.42].                                     Page   44
------------------------------ func_test_1.a65 -------------------------------

0f2e : 08                       php         ;test stores do not alter flags
0f2f : 8a                       txa
0f30 : 49c3                     eor #$c3
0f32 : aa                       tax
0f33 : 28                       plp
0f34 : 8e0402                   stx abst+1
0f37 : 08                       php         ;flags after load/store sequence
0f38 : 49c3                     eor #$c3
0f3a : aa                       tax
0f3b : e082                     cpx #$82    ;test result
                                trap_ne
                        
0f3f : 68                       pla         ;load status
                                eor_flag 0
                        
0f42 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
0f4b : a60d                     ldx zp1+2
0f4d : 08                       php         ;test stores do not alter flags
0f4e : 8a                       txa
0f4f : 49c3                     eor #$c3
0f51 : aa                       tax
0f52 : 28                       plp
0f53 : 8e0502                   stx abst+2
0f56 : 08                       php         ;flags after load/store sequence
0f57 : 49c3                     eor #$c3
0f59 : aa                       tax
0f5a : e041                     cpx #$41    ;test result
                                trap_ne
                        
0f5e : 68                       pla         ;load status
                                eor_flag 0
                        
0f61 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
0f6a : a60e                     ldx zp1+3
0f6c : 08                       php         ;test stores do not alter flags
0f6d : 8a                       txa
0f6e : 49c3                     eor #$c3
0f70 : aa                       tax
0f71 : 28                       plp
0f72 : 8e0602                   stx abst+3
0f75 : 08                       php         ;flags after load/store sequence
0f76 : 49c3                     eor #$c3
0f78 : aa                       tax
0f79 : e000                     cpx #0      ;test result
                                trap_ne
                        
0f7d : 68                       pla         ;load status
                                eor_flag 0
                        
0f80 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat $ff
AS65 Assembler for R6502 [1.42].                                     Page   45
------------------------------ func_test_1.a65 -------------------------------

                        
0f89 : a60b                     ldx zp1  
0f8b : 08                       php         ;test stores do not alter flags
0f8c : 8a                       txa
0f8d : 49c3                     eor #$c3
0f8f : aa                       tax
0f90 : 28                       plp
0f91 : 8e0302                   stx abst  
0f94 : 08                       php         ;flags after load/store sequence
0f95 : 49c3                     eor #$c3
0f97 : aa                       tax
0f98 : e0c3                     cpx #$c3    ;test result
                                trap_ne     ;
                        
0f9c : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0f9f : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
0fa8 : a60c                     ldx zp1+1
0faa : 08                       php         ;test stores do not alter flags
0fab : 8a                       txa
0fac : 49c3                     eor #$c3
0fae : aa                       tax
0faf : 28                       plp
0fb0 : 8e0402                   stx abst+1
0fb3 : 08                       php         ;flags after load/store sequence
0fb4 : 49c3                     eor #$c3
0fb6 : aa                       tax
0fb7 : e082                     cpx #$82    ;test result
                                trap_ne
                        
0fbb : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0fbe : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
0fc7 : a60d                     ldx zp1+2
0fc9 : 08                       php         ;test stores do not alter flags
0fca : 8a                       txa
0fcb : 49c3                     eor #$c3
0fcd : aa                       tax
0fce : 28                       plp
0fcf : 8e0502                   stx abst+2
0fd2 : 08                       php         ;flags after load/store sequence
0fd3 : 49c3                     eor #$c3
0fd5 : aa                       tax
0fd6 : e041                     cpx #$41    ;test result
                                trap_ne     ;
                        
0fda : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0fdd : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
AS65 Assembler for R6502 [1.42].                                     Page   46
------------------------------ func_test_1.a65 -------------------------------

                                set_stat $ff
                        
0fe6 : a60e                     ldx zp1+3
0fe8 : 08                       php         ;test stores do not alter flags
0fe9 : 8a                       txa
0fea : 49c3                     eor #$c3
0fec : aa                       tax
0fed : 28                       plp
0fee : 8e0602                   stx abst+3
0ff1 : 08                       php         ;flags after load/store sequence
0ff2 : 49c3                     eor #$c3
0ff4 : aa                       tax
0ff5 : e000                     cpx #0      ;test result
                                trap_ne
                        
0ff9 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
0ffc : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat 0
                        
1005 : ae1802                   ldx abs1  
1008 : 08                       php         ;test stores do not alter flags
1009 : 8a                       txa
100a : 49c3                     eor #$c3
100c : aa                       tax
100d : 28                       plp
100e : 8602                     stx zpt  
1010 : 08                       php         ;flags after load/store sequence
1011 : 49c3                     eor #$c3
1013 : c50b                     cmp zp1     ;test result
                                trap_ne
                        
1017 : 68                       pla         ;load status
                                eor_flag 0
                        
101a : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1023 : ae1902                   ldx abs1+1
1026 : 08                       php         ;test stores do not alter flags
1027 : 8a                       txa
1028 : 49c3                     eor #$c3
102a : aa                       tax
102b : 28                       plp
102c : 8603                     stx zpt+1
102e : 08                       php         ;flags after load/store sequence
102f : 49c3                     eor #$c3
1031 : c50c                     cmp zp1+1   ;test result
                                trap_ne
                        
1035 : 68                       pla         ;load status
                                eor_flag 0
                        
1038 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
AS65 Assembler for R6502 [1.42].                                     Page   47
------------------------------ func_test_1.a65 -------------------------------

                                set_stat 0
                        
1041 : ae1a02                   ldx abs1+2
1044 : 08                       php         ;test stores do not alter flags
1045 : 8a                       txa
1046 : 49c3                     eor #$c3
1048 : aa                       tax
1049 : 28                       plp
104a : 8604                     stx zpt+2
104c : 08                       php         ;flags after load/store sequence
104d : 49c3                     eor #$c3
104f : c50d                     cmp zp1+2   ;test result
                                trap_ne
                        
1053 : 68                       pla         ;load status
                                eor_flag 0
                        
1056 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
105f : ae1b02                   ldx abs1+3
1062 : 08                       php         ;test stores do not alter flags
1063 : 8a                       txa
1064 : 49c3                     eor #$c3
1066 : aa                       tax
1067 : 28                       plp
1068 : 8605                     stx zpt+3
106a : 08                       php         ;flags after load/store sequence
106b : 49c3                     eor #$c3
106d : c50e                     cmp zp1+3   ;test result
                                trap_ne
                        
1071 : 68                       pla         ;load status
                                eor_flag 0
                        
1074 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat $ff
                        
107d : ae1802                   ldx abs1  
1080 : 08                       php         ;test stores do not alter flags
1081 : 8a                       txa
1082 : 49c3                     eor #$c3
1084 : aa                       tax
1085 : 28                       plp
1086 : 8602                     stx zpt  
1088 : 08                       php         ;flags after load/store sequence
1089 : 49c3                     eor #$c3
108b : aa                       tax
108c : e40b                     cpx zp1     ;test result
                                trap_ne
                        
1090 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1093 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
AS65 Assembler for R6502 [1.42].                                     Page   48
------------------------------ func_test_1.a65 -------------------------------

                                set_stat $ff
                        
109c : ae1902                   ldx abs1+1
109f : 08                       php         ;test stores do not alter flags
10a0 : 8a                       txa
10a1 : 49c3                     eor #$c3
10a3 : aa                       tax
10a4 : 28                       plp
10a5 : 8603                     stx zpt+1
10a7 : 08                       php         ;flags after load/store sequence
10a8 : 49c3                     eor #$c3
10aa : aa                       tax
10ab : e40c                     cpx zp1+1   ;test result
                                trap_ne
                        
10af : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
10b2 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
10bb : ae1a02                   ldx abs1+2
10be : 08                       php         ;test stores do not alter flags
10bf : 8a                       txa
10c0 : 49c3                     eor #$c3
10c2 : aa                       tax
10c3 : 28                       plp
10c4 : 8604                     stx zpt+2
10c6 : 08                       php         ;flags after load/store sequence
10c7 : 49c3                     eor #$c3
10c9 : aa                       tax
10ca : e40d                     cpx zp1+2   ;test result
                                trap_ne
                        
10ce : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
10d1 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
10da : ae1b02                   ldx abs1+3
10dd : 08                       php         ;test stores do not alter flags
10de : 8a                       txa
10df : 49c3                     eor #$c3
10e1 : aa                       tax
10e2 : 28                       plp
10e3 : 8605                     stx zpt+3
10e5 : 08                       php         ;flags after load/store sequence
10e6 : 49c3                     eor #$c3
10e8 : aa                       tax
10e9 : e40e                     cpx zp1+3   ;test result
                                trap_ne
                        
10ed : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
10f0 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   49
------------------------------ func_test_1.a65 -------------------------------

                        
                        
                                set_stat 0  
                        
10f9 : a2c3                     ldx #$c3
10fb : 08                       php
10fc : ec1802                   cpx abs1    ;test result
                                trap_ne
                        
1101 : 68                       pla         ;load status
                                eor_flag 0
                        
1104 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
110d : a282                     ldx #$82
110f : 08                       php
1110 : ec1902                   cpx abs1+1  ;test result
                                trap_ne
                        
1115 : 68                       pla         ;load status
                                eor_flag 0
                        
1118 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1121 : a241                     ldx #$41
1123 : 08                       php
1124 : ec1a02                   cpx abs1+2  ;test result
                                trap_ne
                        
1129 : 68                       pla         ;load status
                                eor_flag 0
                        
112c : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1135 : a200                     ldx #0
1137 : 08                       php
1138 : ec1b02                   cpx abs1+3  ;test result
                                trap_ne
                        
113d : 68                       pla         ;load status
                                eor_flag 0
                        
1140 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat $ff
                        
1149 : a2c3                     ldx #$c3  
114b : 08                       php
114c : ec1802                   cpx abs1    ;test result
                                trap_ne
                        
AS65 Assembler for R6502 [1.42].                                     Page   50
------------------------------ func_test_1.a65 -------------------------------

1151 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1154 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
115d : a282                     ldx #$82
115f : 08                       php
1160 : ec1902                   cpx abs1+1  ;test result
                                trap_ne
                        
1165 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1168 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1171 : a241                     ldx #$41
1173 : 08                       php
1174 : ec1a02                   cpx abs1+2  ;test result
                                trap_ne
                        
1179 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
117c : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1185 : a200                     ldx #0
1187 : 08                       php
1188 : ec1b02                   cpx abs1+3  ;test result
                                trap_ne
                        
118d : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1190 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
1195 : a200                     ldx #0
1197 : a502                     lda zpt  
1199 : 49c3                     eor #$c3
119b : c50b                     cmp zp1  
                                trap_ne     ;store to zp data
                        
119f : 8602                     stx zpt     ;clear                
11a1 : ad0302                   lda abst  
11a4 : 49c3                     eor #$c3
11a6 : cd1802                   cmp abs1  
                                trap_ne     ;store to abs data
                        
11ab : 8e0302                   stx abst    ;clear                
11ae : a503                     lda zpt+1
11b0 : 49c3                     eor #$c3
11b2 : c50c                     cmp zp1+1
AS65 Assembler for R6502 [1.42].                                     Page   51
------------------------------ func_test_1.a65 -------------------------------

                                trap_ne     ;store to zp data
                        
11b6 : 8603                     stx zpt+1   ;clear                
11b8 : ad0402                   lda abst+1
11bb : 49c3                     eor #$c3
11bd : cd1902                   cmp abs1+1
                                trap_ne     ;store to abs data
                        
11c2 : 8e0402                   stx abst+1  ;clear                
11c5 : a504                     lda zpt+2
11c7 : 49c3                     eor #$c3
11c9 : c50d                     cmp zp1+2
                                trap_ne     ;store to zp data
                        
11cd : 8604                     stx zpt+2   ;clear                
11cf : ad0502                   lda abst+2
11d2 : 49c3                     eor #$c3
11d4 : cd1a02                   cmp abs1+2
                                trap_ne     ;store to abs data
                        
11d9 : 8e0502                   stx abst+2  ;clear                
11dc : a505                     lda zpt+3
11de : 49c3                     eor #$c3
11e0 : c50e                     cmp zp1+3
                                trap_ne     ;store to zp data
                        
11e4 : 8605                     stx zpt+3   ;clear                
11e6 : ad0602                   lda abst+3
11e9 : 49c3                     eor #$c3
11eb : cd1b02                   cmp abs1+3
                                trap_ne     ;store to abs data
                        
11f0 : 8e0602                   stx abst+3  ;clear                
                                next_test
                        
                        
                        ; LDY / STY - zp / abs / #
                                set_stat 0
                        
1203 : a40b                     ldy zp1  
1205 : 08                       php         ;test stores do not alter flags
1206 : 98                       tya
1207 : 49c3                     eor #$c3
1209 : a8                       tay
120a : 28                       plp
120b : 8c0302                   sty abst  
120e : 08                       php         ;flags after load/store sequence
120f : 49c3                     eor #$c3
1211 : a8                       tay
1212 : c0c3                     cpy #$c3    ;test result
                                trap_ne
                        
1216 : 68                       pla         ;load status
                                eor_flag 0
                        
1219 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1222 : a40c                     ldy zp1+1
1224 : 08                       php         ;test stores do not alter flags
AS65 Assembler for R6502 [1.42].                                     Page   52
------------------------------ func_test_1.a65 -------------------------------

1225 : 98                       tya
1226 : 49c3                     eor #$c3
1228 : a8                       tay
1229 : 28                       plp
122a : 8c0402                   sty abst+1
122d : 08                       php         ;flags after load/store sequence
122e : 49c3                     eor #$c3
1230 : a8                       tay
1231 : c082                     cpy #$82    ;test result
                                trap_ne
                        
1235 : 68                       pla         ;load status
                                eor_flag 0
                        
1238 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1241 : a40d                     ldy zp1+2
1243 : 08                       php         ;test stores do not alter flags
1244 : 98                       tya
1245 : 49c3                     eor #$c3
1247 : a8                       tay
1248 : 28                       plp
1249 : 8c0502                   sty abst+2
124c : 08                       php         ;flags after load/store sequence
124d : 49c3                     eor #$c3
124f : a8                       tay
1250 : c041                     cpy #$41    ;test result
                                trap_ne
                        
1254 : 68                       pla         ;load status
                                eor_flag 0
                        
1257 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1260 : a40e                     ldy zp1+3
1262 : 08                       php         ;test stores do not alter flags
1263 : 98                       tya
1264 : 49c3                     eor #$c3
1266 : a8                       tay
1267 : 28                       plp
1268 : 8c0602                   sty abst+3
126b : 08                       php         ;flags after load/store sequence
126c : 49c3                     eor #$c3
126e : a8                       tay
126f : c000                     cpy #0      ;test result
                                trap_ne
                        
1273 : 68                       pla         ;load status
                                eor_flag 0
                        
1276 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat $ff
                        
AS65 Assembler for R6502 [1.42].                                     Page   53
------------------------------ func_test_1.a65 -------------------------------

127f : a40b                     ldy zp1  
1281 : 08                       php         ;test stores do not alter flags
1282 : 98                       tya
1283 : 49c3                     eor #$c3
1285 : a8                       tay
1286 : 28                       plp
1287 : 8c0302                   sty abst  
128a : 08                       php         ;flags after load/store sequence
128b : 49c3                     eor #$c3
128d : a8                       tay
128e : c0c3                     cpy #$c3    ;test result
                                trap_ne
                        
1292 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1295 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
129e : a40c                     ldy zp1+1
12a0 : 08                       php         ;test stores do not alter flags
12a1 : 98                       tya
12a2 : 49c3                     eor #$c3
12a4 : a8                       tay
12a5 : 28                       plp
12a6 : 8c0402                   sty abst+1
12a9 : 08                       php         ;flags after load/store sequence
12aa : 49c3                     eor #$c3
12ac : a8                       tay
12ad : c082                     cpy #$82   ;test result
                                trap_ne
                        
12b1 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
12b4 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
12bd : a40d                     ldy zp1+2
12bf : 08                       php         ;test stores do not alter flags
12c0 : 98                       tya
12c1 : 49c3                     eor #$c3
12c3 : a8                       tay
12c4 : 28                       plp
12c5 : 8c0502                   sty abst+2
12c8 : 08                       php         ;flags after load/store sequence
12c9 : 49c3                     eor #$c3
12cb : a8                       tay
12cc : c041                     cpy #$41    ;test result
                                trap_ne
                        
12d0 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
12d3 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat $ff
AS65 Assembler for R6502 [1.42].                                     Page   54
------------------------------ func_test_1.a65 -------------------------------

                        
12dc : a40e                     ldy zp1+3
12de : 08                       php         ;test stores do not alter flags
12df : 98                       tya
12e0 : 49c3                     eor #$c3
12e2 : a8                       tay
12e3 : 28                       plp
12e4 : 8c0602                   sty abst+3
12e7 : 08                       php         ;flags after load/store sequence
12e8 : 49c3                     eor #$c3
12ea : a8                       tay
12eb : c000                     cpy #0      ;test result
                                trap_ne
                        
12ef : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
12f2 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                                
                                set_stat 0
                        
12fb : ac1802                   ldy abs1  
12fe : 08                       php         ;test stores do not alter flags
12ff : 98                       tya
1300 : 49c3                     eor #$c3
1302 : a8                       tay
1303 : 28                       plp
1304 : 8402                     sty zpt  
1306 : 08                       php         ;flags after load/store sequence
1307 : 49c3                     eor #$c3
1309 : a8                       tay
130a : c40b                     cpy zp1     ;test result
                                trap_ne
                        
130e : 68                       pla         ;load status
                                eor_flag 0
                        
1311 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
131a : ac1902                   ldy abs1+1
131d : 08                       php         ;test stores do not alter flags
131e : 98                       tya
131f : 49c3                     eor #$c3
1321 : a8                       tay
1322 : 28                       plp
1323 : 8403                     sty zpt+1
1325 : 08                       php         ;flags after load/store sequence
1326 : 49c3                     eor #$c3
1328 : a8                       tay
1329 : c40c                     cpy zp1+1   ;test result
                                trap_ne
                        
132d : 68                       pla         ;load status
                                eor_flag 0
                        
1330 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   55
------------------------------ func_test_1.a65 -------------------------------

                        
                                set_stat 0
                        
1339 : ac1a02                   ldy abs1+2
133c : 08                       php         ;test stores do not alter flags
133d : 98                       tya
133e : 49c3                     eor #$c3
1340 : a8                       tay
1341 : 28                       plp
1342 : 8404                     sty zpt+2
1344 : 08                       php         ;flags after load/store sequence
1345 : 49c3                     eor #$c3
1347 : a8                       tay
1348 : c40d                     cpy zp1+2   ;test result
                                trap_ne
                        
134c : 68                       pla         ;load status
                                eor_flag 0
                        
134f : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1358 : ac1b02                   ldy abs1+3
135b : 08                       php         ;test stores do not alter flags
135c : 98                       tya
135d : 49c3                     eor #$c3
135f : a8                       tay
1360 : 28                       plp
1361 : 8405                     sty zpt+3
1363 : 08                       php         ;flags after load/store sequence
1364 : 49c3                     eor #$c3
1366 : a8                       tay
1367 : c40e                     cpy zp1+3   ;test result
                                trap_ne
                        
136b : 68                       pla         ;load status
                                eor_flag 0
                        
136e : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat $ff
                        
1377 : ac1802                   ldy abs1  
137a : 08                       php         ;test stores do not alter flags
137b : 98                       tya
137c : 49c3                     eor #$c3
137e : a8                       tay
137f : 28                       plp
1380 : 8402                     sty zpt  
1382 : 08                       php         ;flags after load/store sequence
1383 : 49c3                     eor #$c3
1385 : a8                       tay
1386 : c50b                     cmp zp1     ;test result
                                trap_ne
                        
138a : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
AS65 Assembler for R6502 [1.42].                                     Page   56
------------------------------ func_test_1.a65 -------------------------------

138d : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1396 : ac1902                   ldy abs1+1
1399 : 08                       php         ;test stores do not alter flags
139a : 98                       tya
139b : 49c3                     eor #$c3
139d : a8                       tay
139e : 28                       plp
139f : 8403                     sty zpt+1
13a1 : 08                       php         ;flags after load/store sequence
13a2 : 49c3                     eor #$c3
13a4 : a8                       tay
13a5 : c50c                     cmp zp1+1   ;test result
                                trap_ne
                        
13a9 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
13ac : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
13b5 : ac1a02                   ldy abs1+2
13b8 : 08                       php         ;test stores do not alter flags
13b9 : 98                       tya
13ba : 49c3                     eor #$c3
13bc : a8                       tay
13bd : 28                       plp
13be : 8404                     sty zpt+2
13c0 : 08                       php         ;flags after load/store sequence
13c1 : 49c3                     eor #$c3
13c3 : a8                       tay
13c4 : c50d                     cmp zp1+2   ;test result
                                trap_ne
                        
13c8 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
13cb : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
13d4 : ac1b02                   ldy abs1+3
13d7 : 08                       php         ;test stores do not alter flags
13d8 : 98                       tya
13d9 : 49c3                     eor #$c3
13db : a8                       tay
13dc : 28                       plp
13dd : 8405                     sty zpt+3
13df : 08                       php         ;flags after load/store sequence
13e0 : 49c3                     eor #$c3
13e2 : a8                       tay
13e3 : c50e                     cmp zp1+3   ;test result
                                trap_ne
                        
13e7 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
AS65 Assembler for R6502 [1.42].                                     Page   57
------------------------------ func_test_1.a65 -------------------------------

                        
13ea : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                        
                                set_stat 0
                        
13f3 : a0c3                     ldy #$c3  
13f5 : 08                       php
13f6 : cc1802                   cpy abs1    ;test result
                                trap_ne
                        
13fb : 68                       pla         ;load status
                                eor_flag 0
                        
13fe : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1407 : a082                     ldy #$82
1409 : 08                       php
140a : cc1902                   cpy abs1+1  ;test result
                                trap_ne
                        
140f : 68                       pla         ;load status
                                eor_flag 0
                        
1412 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
141b : a041                     ldy #$41
141d : 08                       php
141e : cc1a02                   cpy abs1+2  ;test result
                                trap_ne
                        
1423 : 68                       pla         ;load status
                                eor_flag 0
                        
1426 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
142f : a000                     ldy #0
1431 : 08                       php
1432 : cc1b02                   cpy abs1+3  ;test result
                                trap_ne
                        
1437 : 68                       pla         ;load status
                                eor_flag 0
                        
143a : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat $ff
                        
1443 : a0c3                     ldy #$c3  
AS65 Assembler for R6502 [1.42].                                     Page   58
------------------------------ func_test_1.a65 -------------------------------

1445 : 08                       php
1446 : cc1802                   cpy abs1    ;test result
                                trap_ne
                        
144b : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
144e : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1457 : a082                     ldy #$82
1459 : 08                       php
145a : cc1902                   cpy abs1+1  ;test result
                                trap_ne
                        
145f : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1462 : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
146b : a041                     ldy #$41
146d : 08                       php
146e : cc1a02                   cpy abs1+2   ;test result
                                trap_ne
                        
1473 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1476 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
147f : a000                     ldy #0
1481 : 08                       php
1482 : cc1b02                   cpy abs1+3  ;test result
                                trap_ne
                        
1487 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
148a : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                                
148f : a000                     ldy #0
1491 : a502                     lda zpt  
1493 : 49c3                     eor #$c3
1495 : c50b                     cmp zp1  
                                trap_ne     ;store to zp   data
                        
1499 : 8402                     sty zpt     ;clear                
149b : ad0302                   lda abst  
149e : 49c3                     eor #$c3
14a0 : cd1802                   cmp abs1  
                                trap_ne     ;store to abs   data
                        
AS65 Assembler for R6502 [1.42].                                     Page   59
------------------------------ func_test_1.a65 -------------------------------

14a5 : 8c0302                   sty abst    ;clear                
14a8 : a503                     lda zpt+1
14aa : 49c3                     eor #$c3
14ac : c50c                     cmp zp1+1
                                trap_ne     ;store to zp+1 data
                        
14b0 : 8403                     sty zpt+1   ;clear                
14b2 : ad0402                   lda abst+1
14b5 : 49c3                     eor #$c3
14b7 : cd1902                   cmp abs1+1
                                trap_ne     ;store to abs+1 data
                        
14bc : 8c0402                   sty abst+1  ;clear                
14bf : a504                     lda zpt+2
14c1 : 49c3                     eor #$c3
14c3 : c50d                     cmp zp1+2
                                trap_ne     ;store to zp+2 data
                        
14c7 : 8404                     sty zpt+2   ;clear                
14c9 : ad0502                   lda abst+2
14cc : 49c3                     eor #$c3
14ce : cd1a02                   cmp abs1+2
                                trap_ne     ;store to abs+2 data
                        
14d3 : 8c0502                   sty abst+2  ;clear                
14d6 : a505                     lda zpt+3
14d8 : 49c3                     eor #$c3
14da : c50e                     cmp zp1+3
                                trap_ne     ;store to zp+3 data
                        
14de : 8405                     sty zpt+3   ;clear                
14e0 : ad0602                   lda abst+3
14e3 : 49c3                     eor #$c3
14e5 : cd1b02                   cmp abs1+3
                                trap_ne     ;store to abs+3 data
                        
14ea : 8c0602                   sty abst+3  ;clear                
                                next_test
                        
                        
                        ; testing load / store accumulator LDA / STA all addre
                        ; LDA / STA - zp,x / abs,x
14f9 : a203                     ldx #3
14fb :                  tldax    
                                set_stat 0
                        
14ff : b50b                     lda zp1,x
1501 : 08                       php         ;test stores do not alter flags
1502 : 49c3                     eor #$c3
1504 : 28                       plp
1505 : 9d0302                   sta abst,x
1508 : 08                       php         ;flags after load/store sequence
1509 : 49c3                     eor #$c3
150b : dd1802                   cmp abs1,x  ;test result
                                trap_ne
                        
1510 : 68                       pla         ;load status
                                eor_flag 0
                        
1513 : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
AS65 Assembler for R6502 [1.42].                                     Page   60
------------------------------ func_test_1.a65 -------------------------------

1518 : ca                       dex
1519 : 10e0                     bpl tldax                  
                        
151b : a203                     ldx #3
151d :                  tldax1   
                                set_stat $ff
                        
1521 : b50b                     lda zp1,x
1523 : 08                       php         ;test stores do not alter flags
1524 : 49c3                     eor #$c3
1526 : 28                       plp
1527 : 9d0302                   sta abst,x
152a : 08                       php         ;flags after load/store sequence
152b : 49c3                     eor #$c3
152d : dd1802                   cmp abs1,x   ;test result
                                trap_ne
                        
1532 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1535 : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
153a : ca                       dex
153b : 10e0                     bpl tldax1                  
                        
153d : a203                     ldx #3
153f :                  tldax2   
                                set_stat 0
                        
1543 : bd1802                   lda abs1,x
1546 : 08                       php         ;test stores do not alter flags
1547 : 49c3                     eor #$c3
1549 : 28                       plp
154a : 9502                     sta zpt,x
154c : 08                       php         ;flags after load/store sequence
154d : 49c3                     eor #$c3
154f : d50b                     cmp zp1,x   ;test result
                                trap_ne
                        
1553 : 68                       pla         ;load status
                                eor_flag 0
                        
1556 : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
155b : ca                       dex
155c : 10e1                     bpl tldax2                  
                        
155e : a203                     ldx #3
1560 :                  tldax3
                                set_stat $ff
                        
1564 : bd1802                   lda abs1,x
1567 : 08                       php         ;test stores do not alter flags
1568 : 49c3                     eor #$c3
156a : 28                       plp
156b : 9502                     sta zpt,x
156d : 08                       php         ;flags after load/store sequence
156e : 49c3                     eor #$c3
1570 : d50b                     cmp zp1,x   ;test result
                                trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   61
------------------------------ func_test_1.a65 -------------------------------

                        
1574 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1577 : dd1d02                   cmp fLDx,x  ;test flags
                                trap_ne
                        
157c : ca                       dex
157d : 10e1                     bpl tldax3
                        
157f : a203                     ldx #3      ;testing store result
1581 : a000                     ldy #0
1583 : b502             tstax   lda zpt,x
1585 : 49c3                     eor #$c3
1587 : d50b                     cmp zp1,x
                                trap_ne     ;store to zp,x data
                        
158b : 9402                     sty zpt,x   ;clear                
158d : bd0302                   lda abst,x
1590 : 49c3                     eor #$c3
1592 : dd1802                   cmp abs1,x
                                trap_ne     ;store to abs,x data
                        
1597 : 8a                       txa
1598 : 9d0302                   sta abst,x  ;clear                
159b : ca                       dex
159c : 10e5                     bpl tstax
                                next_test
                        
                        
                        ; LDA / STA - (zp),y / abs,y / (zp,x)
15aa : a003                     ldy #3
15ac :                  tlday    
                                set_stat 0
                        
15b0 : b11c                     lda (ind1),y
15b2 : 08                       php         ;test stores do not alter flags
15b3 : 49c3                     eor #$c3
15b5 : 28                       plp
15b6 : 990302                   sta abst,y
15b9 : 08                       php         ;flags after load/store sequence
15ba : 49c3                     eor #$c3
15bc : d91802                   cmp abs1,y  ;test result
                                trap_ne
                        
15c1 : 68                       pla         ;load status
                                eor_flag 0
                        
15c4 : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
15c9 : 88                       dey
15ca : 10e0                     bpl tlday                  
                        
15cc : a003                     ldy #3
15ce :                  tlday1   
                                set_stat $ff
                        
15d2 : b11c                     lda (ind1),y
15d4 : 08                       php         ;test stores do not alter flags
15d5 : 49c3                     eor #$c3
15d7 : 28                       plp
AS65 Assembler for R6502 [1.42].                                     Page   62
------------------------------ func_test_1.a65 -------------------------------

15d8 : 990302                   sta abst,y
15db : 08                       php         ;flags after load/store sequence
15dc : 49c3                     eor #$c3
15de : d91802                   cmp abs1,y  ;test result
                                trap_ne
                        
15e3 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
15e6 : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
15eb : 88                       dey
15ec : 10e0                     bpl tlday1                  
                        
15ee : a003                     ldy #3      ;testing store result
15f0 : a200                     ldx #0
15f2 : b90302           tstay   lda abst,y
15f5 : 49c3                     eor #$c3
15f7 : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
15fc : 8a                       txa
15fd : 990302                   sta abst,y  ;clear                
1600 : 88                       dey
1601 : 10ef                     bpl tstay
                        
1603 : a003                     ldy #3
1605 :                  tlday2   
                                set_stat 0
                        
1609 : b91802                   lda abs1,y
160c : 08                       php         ;test stores do not alter flags
160d : 49c3                     eor #$c3
160f : 28                       plp
1610 : 9128                     sta (indt),y
1612 : 08                       php         ;flags after load/store sequence
1613 : 49c3                     eor #$c3
1615 : d11c                     cmp (ind1),y    ;test result
                                trap_ne
                        
1619 : 68                       pla         ;load status
                                eor_flag 0
                        
161c : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
1621 : 88                       dey
1622 : 10e1                     bpl tlday2                  
                        
1624 : a003                     ldy #3
1626 :                  tlday3   
                                set_stat $ff
                        
162a : b91802                   lda abs1,y
162d : 08                       php         ;test stores do not alter flags
162e : 49c3                     eor #$c3
1630 : 28                       plp
1631 : 9128                     sta (indt),y
1633 : 08                       php         ;flags after load/store sequence
1634 : 49c3                     eor #$c3
1636 : d11c                     cmp (ind1),y   ;test result
AS65 Assembler for R6502 [1.42].                                     Page   63
------------------------------ func_test_1.a65 -------------------------------

                                trap_ne
                        
163a : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
163d : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
1642 : 88                       dey
1643 : 10e1                     bpl tlday3
                                
1645 : a003                     ldy #3      ;testing store result
1647 : a200                     ldx #0
1649 : b90302           tstay1  lda abst,y
164c : 49c3                     eor #$c3
164e : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
1653 : 8a                       txa
1654 : 990302                   sta abst,y  ;clear                
1657 : 88                       dey
1658 : 10ef                     bpl tstay1
                                
165a : a206                     ldx #6
165c : a003                     ldy #3
165e :                  tldax4   
                                set_stat 0
                        
1662 : a11c                     lda (ind1,x)
1664 : 08                       php         ;test stores do not alter flags
1665 : 49c3                     eor #$c3
1667 : 28                       plp
1668 : 8128                     sta (indt,x)
166a : 08                       php         ;flags after load/store sequence
166b : 49c3                     eor #$c3
166d : d91802                   cmp abs1,y  ;test result
                                trap_ne
                        
1672 : 68                       pla         ;load status
                                eor_flag 0
                        
1675 : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
167a : ca                       dex
167b : ca                       dex
167c : 88                       dey
167d : 10df                     bpl tldax4                  
                        
167f : a206                     ldx #6
1681 : a003                     ldy #3
1683 :                  tldax5
                                set_stat $ff
                        
1687 : a11c                     lda (ind1,x)
1689 : 08                       php         ;test stores do not alter flags
168a : 49c3                     eor #$c3
168c : 28                       plp
168d : 8128                     sta (indt,x)
168f : 08                       php         ;flags after load/store sequence
1690 : 49c3                     eor #$c3
1692 : d91802                   cmp abs1,y  ;test result
AS65 Assembler for R6502 [1.42].                                     Page   64
------------------------------ func_test_1.a65 -------------------------------

                                trap_ne
                        
1697 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
169a : d91d02                   cmp fLDx,y  ;test flags
                                trap_ne
                        
169f : ca                       dex
16a0 : ca                       dex
16a1 : 88                       dey
16a2 : 10df                     bpl tldax5
                        
16a4 : a003                     ldy #3      ;testing store result
16a6 : a200                     ldx #0
16a8 : b90302           tstay2  lda abst,y
16ab : 49c3                     eor #$c3
16ad : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
16b2 : 8a                       txa
16b3 : 990302                   sta abst,y  ;clear                
16b6 : 88                       dey
16b7 : 10ef                     bpl tstay2
                                next_test
                        
                        
                        ; indexed wraparound test (only zp should wrap)
16c5 : a2fd                     ldx #3+$fa
16c7 : b511             tldax6  lda zp1-$fa&$ff,x   ;wrap on indexed zp
16c9 : 9d0901                   sta abst-$fa,x      ;no STX abs,x!
16cc : ca                       dex
16cd : e0fa                     cpx #$fa
16cf : b0f6                     bcs tldax6                  
16d1 : a2fd                     ldx #3+$fa
16d3 : bd1e01           tldax7  lda abs1-$fa,x      ;no wrap on indexed abs
16d6 : 9508                     sta zpt-$fa&$ff,x
16d8 : ca                       dex
16d9 : e0fa                     cpx #$fa
16db : b0f6                     bcs tldax7
                                                  
16dd : a203                     ldx #3      ;testing wraparound result
16df : a000                     ldy #0
16e1 : b502             tstax1  lda zpt,x
16e3 : d50b                     cmp zp1,x
                                trap_ne     ;store to zp,x data
                        
16e7 : 9402                     sty zpt,x   ;clear                
16e9 : bd0302                   lda abst,x
16ec : dd1802                   cmp abs1,x
                                trap_ne     ;store to abs,x data
                        
16f1 : 8a                       txa
16f2 : 9d0302                   sta abst,x  ;clear                
16f5 : ca                       dex
16f6 : 10e9                     bpl tstax1
                        
16f8 : a0fb                     ldy #3+$f8
16fa : a2fe                     ldx #6+$f8
16fc : a124             tlday4  lda (ind1-$f8&$ff,x) ;wrap on indexed zp indir
16fe : 990b01                   sta abst-$f8,y
1701 : ca                       dex
AS65 Assembler for R6502 [1.42].                                     Page   65
------------------------------ func_test_1.a65 -------------------------------

1702 : ca                       dex
1703 : 88                       dey
1704 : c0f8                     cpy #$f8
1706 : b0f4                     bcs tlday4
1708 : a003                     ldy #3      ;testing wraparound result
170a : a200                     ldx #0
170c : b90302           tstay4  lda abst,y
170f : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
1714 : 8a                       txa
1715 : 990302                   sta abst,y  ;clear                
1718 : 88                       dey
1719 : 10f1                     bpl tstay4
                                
171b : a0fb                     ldy #3+$f8
171d : b92001           tlday5  lda abs1-$f8,y  ;no wrap on indexed abs
1720 : 9130                     sta (inwt),y
1722 : 88                       dey
1723 : c0f8                     cpy #$f8
1725 : b0f6                     bcs tlday5                  
1727 : a003                     ldy #3      ;testing wraparound result
1729 : a200                     ldx #0
172b : b90302           tstay5  lda abst,y
172e : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
1733 : 8a                       txa
1734 : 990302                   sta abst,y  ;clear                
1737 : 88                       dey
1738 : 10f1                     bpl tstay5
                        
173a : a0fb                     ldy #3+$f8
173c : a2fe                     ldx #6+$f8
173e : b126             tlday6  lda (inw1),y    ;no wrap on zp indirect indexe
1740 : 8130                     sta (indt-$f8&$ff,x)
1742 : ca                       dex
1743 : ca                       dex
1744 : 88                       dey
1745 : c0f8                     cpy #$f8
1747 : b0f5                     bcs tlday6
1749 : a003                     ldy #3      ;testing wraparound result
174b : a200                     ldx #0
174d : b90302           tstay6  lda abst,y
1750 : d91802                   cmp abs1,y
                                trap_ne     ;store to abs data
                        
1755 : 8a                       txa
1756 : 990302                   sta abst,y  ;clear                
1759 : 88                       dey
175a : 10f1                     bpl tstay6
                                next_test
                        
                        
                        ; LDA / STA - zp / abs / #
                                set_stat 0  
                        
176c : a50b                     lda zp1
176e : 08                       php         ;test stores do not alter flags
176f : 49c3                     eor #$c3
1771 : 28                       plp
1772 : 8d0302                   sta abst
AS65 Assembler for R6502 [1.42].                                     Page   66
------------------------------ func_test_1.a65 -------------------------------

1775 : 08                       php         ;flags after load/store sequence
1776 : 49c3                     eor #$c3
1778 : c9c3                     cmp #$c3    ;test result
                                trap_ne
                        
177c : 68                       pla         ;load status
                                eor_flag 0
                        
177f : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1788 : a50c                     lda zp1+1
178a : 08                       php         ;test stores do not alter flags
178b : 49c3                     eor #$c3
178d : 28                       plp
178e : 8d0402                   sta abst+1
1791 : 08                       php         ;flags after load/store sequence
1792 : 49c3                     eor #$c3
1794 : c982                     cmp #$82    ;test result
                                trap_ne
                        
1798 : 68                       pla         ;load status
                                eor_flag 0
                        
179b : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
17a4 : a50d                     lda zp1+2
17a6 : 08                       php         ;test stores do not alter flags
17a7 : 49c3                     eor #$c3
17a9 : 28                       plp
17aa : 8d0502                   sta abst+2
17ad : 08                       php         ;flags after load/store sequence
17ae : 49c3                     eor #$c3
17b0 : c941                     cmp #$41    ;test result
                                trap_ne
                        
17b4 : 68                       pla         ;load status
                                eor_flag 0
                        
17b7 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
17c0 : a50e                     lda zp1+3
17c2 : 08                       php         ;test stores do not alter flags
17c3 : 49c3                     eor #$c3
17c5 : 28                       plp
17c6 : 8d0602                   sta abst+3
17c9 : 08                       php         ;flags after load/store sequence
17ca : 49c3                     eor #$c3
17cc : c900                     cmp #0      ;test result
                                trap_ne
                        
17d0 : 68                       pla         ;load status
                                eor_flag 0
                        
AS65 Assembler for R6502 [1.42].                                     Page   67
------------------------------ func_test_1.a65 -------------------------------

17d3 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
17dc : a50b                     lda zp1  
17de : 08                       php         ;test stores do not alter flags
17df : 49c3                     eor #$c3
17e1 : 28                       plp
17e2 : 8d0302                   sta abst  
17e5 : 08                       php         ;flags after load/store sequence
17e6 : 49c3                     eor #$c3
17e8 : c9c3                     cmp #$c3    ;test result
                                trap_ne
                        
17ec : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
17ef : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
17f8 : a50c                     lda zp1+1
17fa : 08                       php         ;test stores do not alter flags
17fb : 49c3                     eor #$c3
17fd : 28                       plp
17fe : 8d0402                   sta abst+1
1801 : 08                       php         ;flags after load/store sequence
1802 : 49c3                     eor #$c3
1804 : c982                     cmp #$82    ;test result
                                trap_ne
                        
1808 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
180b : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1814 : a50d                     lda zp1+2
1816 : 08                       php         ;test stores do not alter flags
1817 : 49c3                     eor #$c3
1819 : 28                       plp
181a : 8d0502                   sta abst+2
181d : 08                       php         ;flags after load/store sequence
181e : 49c3                     eor #$c3
1820 : c941                     cmp #$41    ;test result
                                trap_ne
                        
1824 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1827 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1830 : a50e                     lda zp1+3
1832 : 08                       php         ;test stores do not alter flags
1833 : 49c3                     eor #$c3
AS65 Assembler for R6502 [1.42].                                     Page   68
------------------------------ func_test_1.a65 -------------------------------

1835 : 28                       plp
1836 : 8d0602                   sta abst+3
1839 : 08                       php         ;flags after load/store sequence
183a : 49c3                     eor #$c3
183c : c900                     cmp #0      ;test result
                                trap_ne
                        
1840 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1843 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
184c : ad1802                   lda abs1  
184f : 08                       php         ;test stores do not alter flags
1850 : 49c3                     eor #$c3
1852 : 28                       plp
1853 : 8502                     sta zpt  
1855 : 08                       php         ;flags after load/store sequence
1856 : 49c3                     eor #$c3
1858 : c50b                     cmp zp1     ;test result
                                trap_ne
                        
185c : 68                       pla         ;load status
                                eor_flag 0
                        
185f : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1868 : ad1902                   lda abs1+1
186b : 08                       php         ;test stores do not alter flags
186c : 49c3                     eor #$c3
186e : 28                       plp
186f : 8503                     sta zpt+1
1871 : 08                       php         ;flags after load/store sequence
1872 : 49c3                     eor #$c3
1874 : c50c                     cmp zp1+1   ;test result
                                trap_ne
                        
1878 : 68                       pla         ;load status
                                eor_flag 0
                        
187b : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1884 : ad1a02                   lda abs1+2
1887 : 08                       php         ;test stores do not alter flags
1888 : 49c3                     eor #$c3
188a : 28                       plp
188b : 8504                     sta zpt+2
188d : 08                       php         ;flags after load/store sequence
188e : 49c3                     eor #$c3
1890 : c50d                     cmp zp1+2   ;test result
                                trap_ne
                        
1894 : 68                       pla         ;load status
AS65 Assembler for R6502 [1.42].                                     Page   69
------------------------------ func_test_1.a65 -------------------------------

                                eor_flag 0
                        
1897 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
18a0 : ad1b02                   lda abs1+3
18a3 : 08                       php         ;test stores do not alter flags
18a4 : 49c3                     eor #$c3
18a6 : 28                       plp
18a7 : 8505                     sta zpt+3
18a9 : 08                       php         ;flags after load/store sequence
18aa : 49c3                     eor #$c3
18ac : c50e                     cmp zp1+3   ;test result
                                trap_ne
                        
18b0 : 68                       pla         ;load status
                                eor_flag 0
                        
18b3 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
18bc : ad1802                   lda abs1  
18bf : 08                       php         ;test stores do not alter flags
18c0 : 49c3                     eor #$c3
18c2 : 28                       plp
18c3 : 8502                     sta zpt  
18c5 : 08                       php         ;flags after load/store sequence
18c6 : 49c3                     eor #$c3
18c8 : c50b                     cmp zp1     ;test result
                                trap_ne
                        
18cc : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
18cf : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
18d8 : ad1902                   lda abs1+1
18db : 08                       php         ;test stores do not alter flags
18dc : 49c3                     eor #$c3
18de : 28                       plp
18df : 8503                     sta zpt+1
18e1 : 08                       php         ;flags after load/store sequence
18e2 : 49c3                     eor #$c3
18e4 : c50c                     cmp zp1+1   ;test result
                                trap_ne
                        
18e8 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
18eb : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
18f4 : ad1a02                   lda abs1+2
AS65 Assembler for R6502 [1.42].                                     Page   70
------------------------------ func_test_1.a65 -------------------------------

18f7 : 08                       php         ;test stores do not alter flags
18f8 : 49c3                     eor #$c3
18fa : 28                       plp
18fb : 8504                     sta zpt+2
18fd : 08                       php         ;flags after load/store sequence
18fe : 49c3                     eor #$c3
1900 : c50d                     cmp zp1+2   ;test result
                                trap_ne
                        
1904 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1907 : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1910 : ad1b02                   lda abs1+3
1913 : 08                       php         ;test stores do not alter flags
1914 : 49c3                     eor #$c3
1916 : 28                       plp
1917 : 8505                     sta zpt+3
1919 : 08                       php         ;flags after load/store sequence
191a : 49c3                     eor #$c3
191c : c50e                     cmp zp1+3   ;test result
                                trap_ne
                        
1920 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1923 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                                set_stat 0  
                        
192c : a9c3                     lda #$c3
192e : 08                       php
192f : cd1802                   cmp abs1    ;test result
                                trap_ne
                        
1934 : 68                       pla         ;load status
                                eor_flag 0
                        
1937 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1940 : a982                     lda #$82
1942 : 08                       php
1943 : cd1902                   cmp abs1+1  ;test result
                                trap_ne
                        
1948 : 68                       pla         ;load status
                                eor_flag 0
                        
194b : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1954 : a941                     lda #$41
AS65 Assembler for R6502 [1.42].                                     Page   71
------------------------------ func_test_1.a65 -------------------------------

1956 : 08                       php
1957 : cd1a02                   cmp abs1+2  ;test result
                                trap_ne
                        
195c : 68                       pla         ;load status
                                eor_flag 0
                        
195f : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
                        
                                set_stat 0
                        
1968 : a900                     lda #0
196a : 08                       php
196b : cd1b02                   cmp abs1+3  ;test result
                                trap_ne
                        
1970 : 68                       pla         ;load status
                                eor_flag 0
                        
1973 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
                                set_stat $ff
                        
197c : a9c3                     lda #$c3  
197e : 08                       php
197f : cd1802                   cmp abs1    ;test result
                                trap_ne
                        
1984 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
1987 : cd1d02                   cmp fLDx    ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
1990 : a982                     lda #$82
1992 : 08                       php
1993 : cd1902                   cmp abs1+1  ;test result
                                trap_ne
                        
1998 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
199b : cd1e02                   cmp fLDx+1  ;test flags
                                trap_ne
                        
                                set_stat $ff
                        
19a4 : a941                     lda #$41
19a6 : 08                       php
19a7 : cd1a02                   cmp abs1+2  ;test result
                                trap_ne
                        
19ac : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
19af : cd1f02                   cmp fLDx+2  ;test flags
                                trap_ne
AS65 Assembler for R6502 [1.42].                                     Page   72
------------------------------ func_test_1.a65 -------------------------------

                        
                                set_stat $ff
                        
19b8 : a900                     lda #0
19ba : 08                       php
19bb : cd1b02                   cmp abs1+3  ;test result
                                trap_ne
                        
19c0 : 68                       pla         ;load status
                                eor_flag lo~fnz ;mask bits not altered
                        
19c3 : cd2002                   cmp fLDx+3  ;test flags
                                trap_ne
                        
                        
19c8 : a200                     ldx #0
19ca : a502                     lda zpt  
19cc : 49c3                     eor #$c3
19ce : c50b                     cmp zp1  
                                trap_ne     ;store to zp data
                        
19d2 : 8602                     stx zpt     ;clear                
19d4 : ad0302                   lda abst  
19d7 : 49c3                     eor #$c3
19d9 : cd1802                   cmp abs1  
                                trap_ne     ;store to abs data
                        
19de : 8e0302                   stx abst    ;clear                
19e1 : a503                     lda zpt+1
19e3 : 49c3                     eor #$c3
19e5 : c50c                     cmp zp1+1
                                trap_ne     ;store to zp data
                        
19e9 : 8603                     stx zpt+1   ;clear                
19eb : ad0402                   lda abst+1
19ee : 49c3                     eor #$c3
19f0 : cd1902                   cmp abs1+1
                                trap_ne     ;store to abs data
                        
19f5 : 8e0402                   stx abst+1  ;clear                
19f8 : a504                     lda zpt+2
19fa : 49c3                     eor #$c3
19fc : c50d                     cmp zp1+2
                                trap_ne     ;store to zp data
                        
1a00 : 8604                     stx zpt+2   ;clear                
1a02 : ad0502                   lda abst+2
1a05 : 49c3                     eor #$c3
1a07 : cd1a02                   cmp abs1+2
                                trap_ne     ;store to abs data
                        
1a0c : 8e0502                   stx abst+2  ;clear                
1a0f : a505                     lda zpt+3
1a11 : 49c3                     eor #$c3
1a13 : c50e                     cmp zp1+3
                                trap_ne     ;store to zp data
                        
1a17 : 8605                     stx zpt+3   ;clear                
1a19 : ad0602                   lda abst+3
1a1c : 49c3                     eor #$c3
1a1e : cd1b02                   cmp abs1+3
                                trap_ne     ;store to abs data
AS65 Assembler for R6502 [1.42].                                     Page   73
------------------------------ func_test_1.a65 -------------------------------

                        
1a23 : 8e0602                   stx abst+3  ;clear                
                                next_test
                        
                        
                        ; testing bit test & compares BIT CPX CPY CMP all addr
                        ; BIT - zp / abs
                                set_a $ff,0
                        
1a38 : 240e                     bit zp1+3   ;00 - should set Z / clear  NV
                                tst_a $ff,fz 
                        
                                set_a 1,0
                        
1a4c : 240d                     bit zp1+2   ;41 - should set V (M6) / clear NZ
                                tst_a 1,fv
                        
                                set_a 1,0
                        
1a60 : 240c                     bit zp1+1   ;82 - should set N (M7) & Z / clea
                                tst_a 1,fnz
                        
                                set_a 1,0
                        
1a74 : 240b                     bit zp1     ;c3 - should set N (M7) & V (M6) /
                                tst_a 1,fnv
                        
                                
                                set_a $ff,$ff
                        
1a88 : 240e                     bit zp1+3   ;00 - should set Z / clear  NV
                                tst_a $ff,~fnv 
                        
                                set_a 1,$ff
                        
1a9c : 240d                     bit zp1+2   ;41 - should set V (M6) / clear NZ
                                tst_a 1,~fnz
                        
                                set_a 1,$ff
                        
1ab0 : 240c                     bit zp1+1   ;82 - should set N (M7) & Z / clea
                                tst_a 1,~fv
                        
                                set_a 1,$ff
                        
1ac4 : 240b                     bit zp1     ;c3 - should set N (M7) & V (M6) /
                                tst_a 1,~fz
                        
                                
                                set_a $ff,0
                        
1ad8 : 2c1b02                   bit abs1+3  ;00 - should set Z / clear  NV
                                tst_a $ff,fz 
                        
                                set_a 1,0
                        
1aed : 2c1a02                   bit abs1+2  ;41 - should set V (M6) / clear NZ
                                tst_a 1,fv
                        
                                set_a 1,0
                        
1b02 : 2c1902                   bit abs1+1  ;82 - should set N (M7) & Z / clea
AS65 Assembler for R6502 [1.42].                                     Page   74
------------------------------ func_test_1.a65 -------------------------------

                                tst_a 1,fnz
                        
                                set_a 1,0
                        
1b17 : 2c1802                   bit abs1    ;c3 - should set N (M7) & V (M6) /
                                tst_a 1,fnv
                        
                                
                                set_a $ff,$ff
                        
1b2c : 2c1b02                   bit abs1+3  ;00 - should set Z / clear  NV
                                tst_a $ff,~fnv 
                        
                                set_a 1,$ff
                        
1b41 : 2c1a02                   bit abs1+2  ;41 - should set V (M6) / clear NZ
                                tst_a 1,~fnz
                        
                                set_a 1,$ff
                        
1b56 : 2c1902                   bit abs1+1  ;82 - should set N (M7) & Z / clea
                                tst_a 1,~fv
                        
                                set_a 1,$ff
                        
1b6b : 2c1802                   bit abs1    ;c3 - should set N (M7) & V (M6) /
                                tst_a 1,~fz
                        
                                next_test
                        
                                
                        ; CPX - zp / abs / #         
                                set_x $80,0
                        
1b8c : e40f                     cpx zp7f
                                tst_stat fc
                        
1b96 : ca                       dex
1b97 : e40f                     cpx zp7f
                                tst_stat fzc
                        
1ba1 : ca                       dex
1ba2 : e40f                     cpx zp7f
                                tst_x $7e,fn
                        
                                set_x $80,$ff
                        
1bb6 : e40f                     cpx zp7f
                                tst_stat ~fnz
                        
1bc0 : ca                       dex
1bc1 : e40f                     cpx zp7f
                                tst_stat ~fn
                        
1bcb : ca                       dex
1bcc : e40f                     cpx zp7f
                                tst_x $7e,~fzc
                        
                        
                                set_x $80,0
                        
1be0 : ec1c02                   cpx abs7f
AS65 Assembler for R6502 [1.42].                                     Page   75
------------------------------ func_test_1.a65 -------------------------------

                                tst_stat fc
                        
1beb : ca                       dex
1bec : ec1c02                   cpx abs7f
                                tst_stat fzc
                        
1bf7 : ca                       dex
1bf8 : ec1c02                   cpx abs7f
                                tst_x $7e,fn
                        
                                set_x $80,$ff
                        
1c0d : ec1c02                   cpx abs7f
                                tst_stat ~fnz
                        
1c18 : ca                       dex
1c19 : ec1c02                   cpx abs7f
                                tst_stat ~fn
                        
1c24 : ca                       dex
1c25 : ec1c02                   cpx abs7f
                                tst_x $7e,~fzc
                        
                        
                                set_x $80,0
                        
1c3a : e07f                     cpx #$7f
                                tst_stat fc
                        
1c44 : ca                       dex
1c45 : e07f                     cpx #$7f
                                tst_stat fzc
                        
1c4f : ca                       dex
1c50 : e07f                     cpx #$7f
                                tst_x $7e,fn
                        
                                set_x $80,$ff
                        
1c64 : e07f                     cpx #$7f
                                tst_stat ~fnz
                        
1c6e : ca                       dex
1c6f : e07f                     cpx #$7f
                                tst_stat ~fn
                        
1c79 : ca                       dex
1c7a : e07f                     cpx #$7f
                                tst_x $7e,~fzc
                        
                                next_test
                        
                        
                        ; CPY - zp / abs / #         
                                set_y $80,0
                        
1c9a : c40f                     cpy zp7f
                                tst_stat fc
                        
1ca4 : 88                       dey
1ca5 : c40f                     cpy zp7f
                                tst_stat fzc
AS65 Assembler for R6502 [1.42].                                     Page   76
------------------------------ func_test_1.a65 -------------------------------

                        
1caf : 88                       dey
1cb0 : c40f                     cpy zp7f
                                tst_y $7e,fn
                        
                                set_y $80,$ff
                        
1cc4 : c40f                     cpy zp7f
                                tst_stat ~fnz
                        
1cce : 88                       dey
1ccf : c40f                     cpy zp7f
                                tst_stat ~fn
                        
1cd9 : 88                       dey
1cda : c40f                     cpy zp7f
                                tst_y $7e,~fzc
                        
                        
                                set_y $80,0
                        
1cee : cc1c02                   cpy abs7f
                                tst_stat fc
                        
1cf9 : 88                       dey
1cfa : cc1c02                   cpy abs7f
                                tst_stat fzc
                        
1d05 : 88                       dey
1d06 : cc1c02                   cpy abs7f
                                tst_y $7e,fn
                        
                                set_y $80,$ff
                        
1d1b : cc1c02                   cpy abs7f
                                tst_stat ~fnz
                        
1d26 : 88                       dey
1d27 : cc1c02                   cpy abs7f
                                tst_stat ~fn
                        
1d32 : 88                       dey
1d33 : cc1c02                   cpy abs7f
                                tst_y $7e,~fzc
                        
                        
                                set_y $80,0
                        
1d48 : c07f                     cpy #$7f
                                tst_stat fc
                        
1d52 : 88                       dey
1d53 : c07f                     cpy #$7f
                                tst_stat fzc
                        
1d5d : 88                       dey
1d5e : c07f                     cpy #$7f
                                tst_y $7e,fn
                        
                                set_y $80,$ff
                        
1d72 : c07f                     cpy #$7f
AS65 Assembler for R6502 [1.42].                                     Page   77
------------------------------ func_test_1.a65 -------------------------------

                                tst_stat ~fnz
                        
1d7c : 88                       dey
1d7d : c07f                     cpy #$7f
                                tst_stat ~fn
                        
1d87 : 88                       dey
1d88 : c07f                     cpy #$7f
                                tst_y $7e,~fzc
                        
                                next_test
                        
                        
                        ; CMP - zp / abs / #         
                                set_a $80,0
                        
1da8 : c50f                     cmp zp7f
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
1dbc : c50f                     cmp zp7f
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
1dd0 : c50f                     cmp zp7f
                                tst_a $7e,fn
                        
                                set_a $80,$ff
                        
1de4 : c50f                     cmp zp7f
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
1df8 : c50f                     cmp zp7f
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
1e0c : c50f                     cmp zp7f
                                tst_a $7e,~fzc
                        
                        
                                set_a $80,0
                        
1e20 : cd1c02                   cmp abs7f
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
1e35 : cd1c02                   cmp abs7f
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
1e4a : cd1c02                   cmp abs7f
                                tst_a $7e,fn
                        
                                set_a $80,$ff
                        
AS65 Assembler for R6502 [1.42].                                     Page   78
------------------------------ func_test_1.a65 -------------------------------

1e5f : cd1c02                   cmp abs7f
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
1e74 : cd1c02                   cmp abs7f
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
1e89 : cd1c02                   cmp abs7f
                                tst_a $7e,~fzc
                        
                        
                                set_a $80,0
                        
1e9e : c97f                     cmp #$7f
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
1eb2 : c97f                     cmp #$7f
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
1ec6 : c97f                     cmp #$7f
                                tst_a $7e,fn
                        
                                set_a $80,$ff
                        
1eda : c97f                     cmp #$7f
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
1eee : c97f                     cmp #$7f
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
1f02 : c97f                     cmp #$7f
                                tst_a $7e,~fzc
                        
                        
1f10 : a204                     ldx #4          ;with indexing by X
                                set_a $80,0
                        
1f18 : d50b                     cmp zp1,x
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
1f2c : d50b                     cmp zp1,x
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
1f40 : d50b                     cmp zp1,x
                                tst_a $7e,fn
                        
                                set_a $80,$ff
AS65 Assembler for R6502 [1.42].                                     Page   79
------------------------------ func_test_1.a65 -------------------------------

                        
1f54 : d50b                     cmp zp1,x
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
1f68 : d50b                     cmp zp1,x
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
1f7c : d50b                     cmp zp1,x
                                tst_a $7e,~fzc
                        
                        
                                set_a $80,0
                        
1f90 : dd1802                   cmp abs1,x
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
1fa5 : dd1802                   cmp abs1,x
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
1fba : dd1802                   cmp abs1,x
                                tst_a $7e,fn
                        
                                set_a $80,$ff
                        
1fcf : dd1802                   cmp abs1,x
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
1fe4 : dd1802                   cmp abs1,x
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
1ff9 : dd1802                   cmp abs1,x
                                tst_a $7e,~fzc
                        
                        
2008 : a004                     ldy #4          ;with indexing by Y
200a : a208                     ldx #8          ;with indexed indirect
                                set_a $80,0
                        
2012 : d91802                   cmp abs1,y
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
2027 : d91802                   cmp abs1,y
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
203c : d91802                   cmp abs1,y
                                tst_a $7e,fn
AS65 Assembler for R6502 [1.42].                                     Page   80
------------------------------ func_test_1.a65 -------------------------------

                        
                                set_a $80,$ff
                        
2051 : d91802                   cmp abs1,y
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
2066 : d91802                   cmp abs1,y
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
207b : d91802                   cmp abs1,y
                                tst_a $7e,~fzc
                        
                        
                                set_a $80,0
                        
2090 : c11c                     cmp (ind1,x)
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
20a4 : c11c                     cmp (ind1,x)
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
20b8 : c11c                     cmp (ind1,x)
                                tst_a $7e,fn
                        
                                set_a $80,$ff
                        
20cc : c11c                     cmp (ind1,x)
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
20e0 : c11c                     cmp (ind1,x)
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
20f4 : c11c                     cmp (ind1,x)
                                tst_a $7e,~fzc
                        
                        
                                set_a $80,0
                        
2108 : d11c                     cmp (ind1),y
                                tst_a $80,fc
                        
                                set_a $7f,0
                        
211c : d11c                     cmp (ind1),y
                                tst_a $7f,fzc
                        
                                set_a $7e,0
                        
2130 : d11c                     cmp (ind1),y
                                tst_a $7e,fn
AS65 Assembler for R6502 [1.42].                                     Page   81
------------------------------ func_test_1.a65 -------------------------------

                        
                                set_a $80,$ff
                        
2144 : d11c                     cmp (ind1),y
                                tst_a $80,~fnz
                        
                                set_a $7f,$ff
                        
2158 : d11c                     cmp (ind1),y
                                tst_a $7f,~fn
                        
                                set_a $7e,$ff
                        
216c : d11c                     cmp (ind1),y
                                tst_a $7e,~fzc
                        
                                next_test
                        
                        
                        ; testing shifts - ASL LSR ROL ROR all addressing mode
                        ; shifts - accumulator
2186 : a205                     ldx #5
2188 :                  tasl
                                set_ax zps,0
                        
218e : 0a                       asl a
                                tst_ax rASL,fASL,0
                        
219d : ca                       dex
219e : 10e8                     bpl tasl
21a0 : a205                     ldx #5
21a2 :                  tasl1
                                set_ax zps,$ff
                        
21a8 : 0a                       asl a
                                tst_ax rASL,fASL,$ff-fnzc
                        
21b7 : ca                       dex
21b8 : 10e8                     bpl tasl1
                        
21ba : a205                     ldx #5
21bc :                  tlsr
                                set_ax zps,0
                        
21c2 : 4a                       lsr a
                                tst_ax rLSR,fLSR,0
                        
21d1 : ca                       dex
21d2 : 10e8                     bpl tlsr
21d4 : a205                     ldx #5
21d6 :                  tlsr1
                                set_ax zps,$ff
                        
21dc : 4a                       lsr a
                                tst_ax rLSR,fLSR,$ff-fnzc
                        
21eb : ca                       dex
21ec : 10e8                     bpl tlsr1
                        
21ee : a205                     ldx #5
21f0 :                  trol
                                set_ax zps,0
AS65 Assembler for R6502 [1.42].                                     Page   82
------------------------------ func_test_1.a65 -------------------------------

                        
21f6 : 2a                       rol a
                                tst_ax rROL,fROL,0
                        
2205 : ca                       dex
2206 : 10e8                     bpl trol
2208 : a205                     ldx #5
220a :                  trol1
                                set_ax zps,$ff-fc
                        
2210 : 2a                       rol a
                                tst_ax rROL,fROL,$ff-fnzc
                        
221f : ca                       dex
2220 : 10e8                     bpl trol1
                        
2222 : a205                     ldx #5
2224 :                  trolc
                                set_ax zps,fc
                        
222a : 2a                       rol a
                                tst_ax rROLc,fROLc,0
                        
2239 : ca                       dex
223a : 10e8                     bpl trolc
223c : a205                     ldx #5
223e :                  trolc1
                                set_ax zps,$ff
                        
2244 : 2a                       rol a
                                tst_ax rROLc,fROLc,$ff-fnzc
                        
2253 : ca                       dex
2254 : 10e8                     bpl trolc1
                        
2256 : a205                     ldx #5
2258 :                  tror
                                set_ax zps,0
                        
225e : 6a                       ror a
                                tst_ax rROR,fROR,0
                        
226d : ca                       dex
226e : 10e8                     bpl tror
2270 : a205                     ldx #5
2272 :                  tror1
                                set_ax zps,$ff-fc
                        
2278 : 6a                       ror a
                                tst_ax rROR,fROR,$ff-fnzc
                        
2287 : ca                       dex
2288 : 10e8                     bpl tror1
                        
228a : a205                     ldx #5
228c :                  trorc
                                set_ax zps,fc
                        
2292 : 6a                       ror a
                                tst_ax rRORc,fRORc,0
                        
22a1 : ca                       dex
AS65 Assembler for R6502 [1.42].                                     Page   83
------------------------------ func_test_1.a65 -------------------------------

22a2 : 10e8                     bpl trorc
22a4 : a205                     ldx #5
22a6 :                  trorc1
                                set_ax zps,$ff
                        
22ac : 6a                       ror a
                                tst_ax rRORc,fRORc,$ff-fnzc
                        
22bb : ca                       dex
22bc : 10e8                     bpl trorc1
                                next_test
                        
                        
                        ; shifts - zeropage
22ca : a205                     ldx #5
22cc :                  tasl2
                                set_z zps,0
                        
22d4 : 0602                     asl zpt
                                tst_z rASL,fASL,0
                        
22e6 : ca                       dex
22e7 : 10e3                     bpl tasl2
22e9 : a205                     ldx #5
22eb :                  tasl3
                                set_z zps,$ff
                        
22f3 : 0602                     asl zpt
                                tst_z rASL,fASL,$ff-fnzc
                        
2305 : ca                       dex
2306 : 10e3                     bpl tasl3
                        
2308 : a205                     ldx #5
230a :                  tlsr2
                                set_z zps,0
                        
2312 : 4602                     lsr zpt
                                tst_z rLSR,fLSR,0
                        
2324 : ca                       dex
2325 : 10e3                     bpl tlsr2
2327 : a205                     ldx #5
2329 :                  tlsr3
                                set_z zps,$ff
                        
2331 : 4602                     lsr zpt
                                tst_z rLSR,fLSR,$ff-fnzc
                        
2343 : ca                       dex
2344 : 10e3                     bpl tlsr3
                        
2346 : a205                     ldx #5
2348 :                  trol2
                                set_z zps,0
                        
2350 : 2602                     rol zpt
                                tst_z rROL,fROL,0
                        
2362 : ca                       dex
2363 : 10e3                     bpl trol2
2365 : a205                     ldx #5
AS65 Assembler for R6502 [1.42].                                     Page   84
------------------------------ func_test_1.a65 -------------------------------

2367 :                  trol3
                                set_z zps,$ff-fc
                        
236f : 2602                     rol zpt
                                tst_z rROL,fROL,$ff-fnzc
                        
2381 : ca                       dex
2382 : 10e3                     bpl trol3
                        
2384 : a205                     ldx #5
2386 :                  trolc2
                                set_z zps,fc
                        
238e : 2602                     rol zpt
                                tst_z rROLc,fROLc,0
                        
23a0 : ca                       dex
23a1 : 10e3                     bpl trolc2
23a3 : a205                     ldx #5
23a5 :                  trolc3
                                set_z zps,$ff
                        
23ad : 2602                     rol zpt
                                tst_z rROLc,fROLc,$ff-fnzc
                        
23bf : ca                       dex
23c0 : 10e3                     bpl trolc3
                        
23c2 : a205                     ldx #5
23c4 :                  tror2
                                set_z zps,0
                        
23cc : 6602                     ror zpt
                                tst_z rROR,fROR,0
                        
23de : ca                       dex
23df : 10e3                     bpl tror2
23e1 : a205                     ldx #5
23e3 :                  tror3
                                set_z zps,$ff-fc
                        
23eb : 6602                     ror zpt
                                tst_z rROR,fROR,$ff-fnzc
                        
23fd : ca                       dex
23fe : 10e3                     bpl tror3
                        
2400 : a205                     ldx #5
2402 :                  trorc2
                                set_z zps,fc
                        
240a : 6602                     ror zpt
                                tst_z rRORc,fRORc,0
                        
241c : ca                       dex
241d : 10e3                     bpl trorc2
241f : a205                     ldx #5
2421 :                  trorc3
                                set_z zps,$ff
                        
2429 : 6602                     ror zpt
                                tst_z rRORc,fRORc,$ff-fnzc
AS65 Assembler for R6502 [1.42].                                     Page   85
------------------------------ func_test_1.a65 -------------------------------

                        
243b : ca                       dex
243c : 10e3                     bpl trorc3
                                next_test
                        
                        
                        ; shifts - absolute
244a : a205                     ldx #5
244c :                  tasl4
                                set_abs zps,0
                        
2455 : 0e0302                   asl abst
                                tst_abs rASL,fASL,0
                        
2469 : ca                       dex
246a : 10e0                     bpl tasl4
246c : a205                     ldx #5
246e :                  tasl5
                                set_abs zps,$ff
                        
2477 : 0e0302                   asl abst
                                tst_abs rASL,fASL,$ff-fnzc
                        
248b : ca                       dex
248c : 10e0                     bpl tasl5
                        
248e : a205                     ldx #5
2490 :                  tlsr4
                                set_abs zps,0
                        
2499 : 4e0302                   lsr abst
                                tst_abs rLSR,fLSR,0
                        
24ad : ca                       dex
24ae : 10e0                     bpl tlsr4
24b0 : a205                     ldx #5
24b2 :                  tlsr5
                                set_abs zps,$ff
                        
24bb : 4e0302                   lsr abst
                                tst_abs rLSR,fLSR,$ff-fnzc
                        
24cf : ca                       dex
24d0 : 10e0                     bpl tlsr5
                        
24d2 : a205                     ldx #5
24d4 :                  trol4
                                set_abs zps,0
                        
24dd : 2e0302                   rol abst
                                tst_abs rROL,fROL,0
                        
24f1 : ca                       dex
24f2 : 10e0                     bpl trol4
24f4 : a205                     ldx #5
24f6 :                  trol5
                                set_abs zps,$ff-fc
                        
24ff : 2e0302                   rol abst
                                tst_abs rROL,fROL,$ff-fnzc
                        
2513 : ca                       dex
AS65 Assembler for R6502 [1.42].                                     Page   86
------------------------------ func_test_1.a65 -------------------------------

2514 : 10e0                     bpl trol5
                        
2516 : a205                     ldx #5
2518 :                  trolc4
                                set_abs zps,fc
                        
2521 : 2e0302                   rol abst
                                tst_abs rROLc,fROLc,0
                        
2535 : ca                       dex
2536 : 10e0                     bpl trolc4
2538 : a205                     ldx #5
253a :                  trolc5
                                set_abs zps,$ff
                        
2543 : 2e0302                   rol abst
                                tst_abs rROLc,fROLc,$ff-fnzc
                        
2557 : ca                       dex
2558 : 10e0                     bpl trolc5
                        
255a : a205                     ldx #5
255c :                  tror4
                                set_abs zps,0
                        
2565 : 6e0302                   ror abst
                                tst_abs rROR,fROR,0
                        
2579 : ca                       dex
257a : 10e0                     bpl tror4
257c : a205                     ldx #5
257e :                  tror5
                                set_abs zps,$ff-fc
                        
2587 : 6e0302                   ror abst
                                tst_abs rROR,fROR,$ff-fnzc
                        
259b : ca                       dex
259c : 10e0                     bpl tror5
                        
259e : a205                     ldx #5
25a0 :                  trorc4
                                set_abs zps,fc
                        
25a9 : 6e0302                   ror abst
                                tst_abs rRORc,fRORc,0
                        
25bd : ca                       dex
25be : 10e0                     bpl trorc4
25c0 : a205                     ldx #5
25c2 :                  trorc5
                                set_abs zps,$ff
                        
25cb : 6e0302                   ror abst
                                tst_abs rRORc,fRORc,$ff-fnzc
                        
25df : ca                       dex
25e0 : 10e0                     bpl trorc5
                                next_test
                        
                        
                        ; shifts - zp indexed
AS65 Assembler for R6502 [1.42].                                     Page   87
------------------------------ func_test_1.a65 -------------------------------

25ee : a205                     ldx #5
25f0 :                  tasl6
                                set_zx zps,0
                        
25f8 : 1602                     asl zpt,x
                                tst_zx rASL,fASL,0
                        
260a : ca                       dex
260b : 10e3                     bpl tasl6
260d : a205                     ldx #5
260f :                  tasl7
                                set_zx zps,$ff
                        
2617 : 1602                     asl zpt,x
                                tst_zx rASL,fASL,$ff-fnzc
                        
2629 : ca                       dex
262a : 10e3                     bpl tasl7
                        
262c : a205                     ldx #5
262e :                  tlsr6
                                set_zx zps,0
                        
2636 : 5602                     lsr zpt,x
                                tst_zx rLSR,fLSR,0
                        
2648 : ca                       dex
2649 : 10e3                     bpl tlsr6
264b : a205                     ldx #5
264d :                  tlsr7
                                set_zx zps,$ff
                        
2655 : 5602                     lsr zpt,x
                                tst_zx rLSR,fLSR,$ff-fnzc
                        
2667 : ca                       dex
2668 : 10e3                     bpl tlsr7
                        
266a : a205                     ldx #5
266c :                  trol6
                                set_zx zps,0
                        
2674 : 3602                     rol zpt,x
                                tst_zx rROL,fROL,0
                        
2686 : ca                       dex
2687 : 10e3                     bpl trol6
2689 : a205                     ldx #5
268b :                  trol7
                                set_zx zps,$ff-fc
                        
2693 : 3602                     rol zpt,x
                                tst_zx rROL,fROL,$ff-fnzc
                        
26a5 : ca                       dex
26a6 : 10e3                     bpl trol7
                        
26a8 : a205                     ldx #5
26aa :                  trolc6
                                set_zx zps,fc
                        
26b2 : 3602                     rol zpt,x
AS65 Assembler for R6502 [1.42].                                     Page   88
------------------------------ func_test_1.a65 -------------------------------

                                tst_zx rROLc,fROLc,0
                        
26c4 : ca                       dex
26c5 : 10e3                     bpl trolc6
26c7 : a205                     ldx #5
26c9 :                  trolc7
                                set_zx zps,$ff
                        
26d1 : 3602                     rol zpt,x
                                tst_zx rROLc,fROLc,$ff-fnzc
                        
26e3 : ca                       dex
26e4 : 10e3                     bpl trolc7
                        
26e6 : a205                     ldx #5
26e8 :                  tror6
                                set_zx zps,0
                        
26f0 : 7602                     ror zpt,x
                                tst_zx rROR,fROR,0
                        
2702 : ca                       dex
2703 : 10e3                     bpl tror6
2705 : a205                     ldx #5
2707 :                  tror7
                                set_zx zps,$ff-fc
                        
270f : 7602                     ror zpt,x
                                tst_zx rROR,fROR,$ff-fnzc
                        
2721 : ca                       dex
2722 : 10e3                     bpl tror7
                        
2724 : a205                     ldx #5
2726 :                  trorc6
                                set_zx zps,fc
                        
272e : 7602                     ror zpt,x
                                tst_zx rRORc,fRORc,0
                        
2740 : ca                       dex
2741 : 10e3                     bpl trorc6
2743 : a205                     ldx #5
2745 :                  trorc7
                                set_zx zps,$ff
                        
274d : 7602                     ror zpt,x
                                tst_zx rRORc,fRORc,$ff-fnzc
                        
275f : ca                       dex
2760 : 10e3                     bpl trorc7
                                next_test
                        
                                
                        ; shifts - abs indexed
276e : a205                     ldx #5
2770 :                  tasl8
                                set_absx zps,0
                        
2779 : 1e0302                   asl abst,x
                                tst_absx rASL,fASL,0
                        
AS65 Assembler for R6502 [1.42].                                     Page   89
------------------------------ func_test_1.a65 -------------------------------

278d : ca                       dex
278e : 10e0                     bpl tasl8
2790 : a205                     ldx #5
2792 :                  tasl9
                                set_absx zps,$ff
                        
279b : 1e0302                   asl abst,x
                                tst_absx rASL,fASL,$ff-fnzc
                        
27af : ca                       dex
27b0 : 10e0                     bpl tasl9
                        
27b2 : a205                     ldx #5
27b4 :                  tlsr8
                                set_absx zps,0
                        
27bd : 5e0302                   lsr abst,x
                                tst_absx rLSR,fLSR,0
                        
27d1 : ca                       dex
27d2 : 10e0                     bpl tlsr8
27d4 : a205                     ldx #5
27d6 :                  tlsr9
                                set_absx zps,$ff
                        
27df : 5e0302                   lsr abst,x
                                tst_absx rLSR,fLSR,$ff-fnzc
                        
27f3 : ca                       dex
27f4 : 10e0                     bpl tlsr9
                        
27f6 : a205                     ldx #5
27f8 :                  trol8
                                set_absx zps,0
                        
2801 : 3e0302                   rol abst,x
                                tst_absx rROL,fROL,0
                        
2815 : ca                       dex
2816 : 10e0                     bpl trol8
2818 : a205                     ldx #5
281a :                  trol9
                                set_absx zps,$ff-fc
                        
2823 : 3e0302                   rol abst,x
                                tst_absx rROL,fROL,$ff-fnzc
                        
2837 : ca                       dex
2838 : 10e0                     bpl trol9
                        
283a : a205                     ldx #5
283c :                  trolc8
                                set_absx zps,fc
                        
2845 : 3e0302                   rol abst,x
                                tst_absx rROLc,fROLc,0
                        
2859 : ca                       dex
285a : 10e0                     bpl trolc8
285c : a205                     ldx #5
285e :                  trolc9
                                set_absx zps,$ff
AS65 Assembler for R6502 [1.42].                                     Page   90
------------------------------ func_test_1.a65 -------------------------------

                        
2867 : 3e0302                   rol abst,x
                                tst_absx rROLc,fROLc,$ff-fnzc
                        
287b : ca                       dex
287c : 10e0                     bpl trolc9
                        
287e : a205                     ldx #5
2880 :                  tror8
                                set_absx zps,0
                        
2889 : 7e0302                   ror abst,x
                                tst_absx rROR,fROR,0
                        
289d : ca                       dex
289e : 10e0                     bpl tror8
28a0 : a205                     ldx #5
28a2 :                  tror9
                                set_absx zps,$ff-fc
                        
28ab : 7e0302                   ror abst,x
                                tst_absx rROR,fROR,$ff-fnzc
                        
28bf : ca                       dex
28c0 : 10e0                     bpl tror9
                        
28c2 : a205                     ldx #5
28c4 :                  trorc8
                                set_absx zps,fc
                        
28cd : 7e0302                   ror abst,x
                                tst_absx rRORc,fRORc,0
                        
28e1 : ca                       dex
28e2 : 10e0                     bpl trorc8
28e4 : a205                     ldx #5
28e6 :                  trorc9
                                set_absx zps,$ff
                        
28ef : 7e0302                   ror abst,x
                                tst_absx rRORc,fRORc,$ff-fnzc
                        
2903 : ca                       dex
2904 : 10e0                     bpl trorc9
                                next_test
                        
                        
                        ; testing memory increment/decrement - INC DEC all add
                        ; zeropage
2912 : a200                     ldx #0
2914 : a97e                     lda #$7e
2916 : 8502                     sta zpt
2918 :                  tinc    
                                set_stat 0
                        
291c : e602                     inc zpt
                                tst_z rINC,fINC,0
                        
292e : e8                       inx
292f : e002                     cpx #2
2931 : d004                     bne tinc1
2933 : a9fe                     lda #$fe
AS65 Assembler for R6502 [1.42].                                     Page   91
------------------------------ func_test_1.a65 -------------------------------

2935 : 8502                     sta zpt
2937 : e005             tinc1   cpx #5
2939 : d0dd                     bne tinc
293b : ca                       dex
293c : e602                     inc zpt
293e :                  tdec    
                                set_stat 0
                        
2942 : c602                     dec zpt
                                tst_z rINC,fINC,0
                        
2954 : ca                       dex
2955 : 300a                     bmi tdec1
2957 : e001                     cpx #1
2959 : d0e3                     bne tdec
295b : a981                     lda #$81
295d : 8502                     sta zpt
295f : d0dd                     bne tdec
2961 :                  tdec1
2961 : a200                     ldx #0
2963 : a97e                     lda #$7e
2965 : 8502                     sta zpt
2967 :                  tinc10    
                                set_stat $ff
                        
296b : e602                     inc zpt
                                tst_z rINC,fINC,$ff-fnz
                        
297d : e8                       inx
297e : e002                     cpx #2
2980 : d004                     bne tinc11
2982 : a9fe                     lda #$fe
2984 : 8502                     sta zpt
2986 : e005             tinc11  cpx #5
2988 : d0dd                     bne tinc10
298a : ca                       dex
298b : e602                     inc zpt
298d :                  tdec10    
                                set_stat $ff
                        
2991 : c602                     dec zpt
                                tst_z rINC,fINC,$ff-fnz
                        
29a3 : ca                       dex
29a4 : 300a                     bmi tdec11
29a6 : e001                     cpx #1
29a8 : d0e3                     bne tdec10
29aa : a981                     lda #$81
29ac : 8502                     sta zpt
29ae : d0dd                     bne tdec10
29b0 :                  tdec11
                                next_test
                        
                        
                        ; absolute memory
29bc : a200                     ldx #0
29be : a97e                     lda #$7e
29c0 : 8d0302                   sta abst
29c3 :                  tinc2    
                                set_stat 0
                        
29c7 : ee0302                   inc abst
AS65 Assembler for R6502 [1.42].                                     Page   92
------------------------------ func_test_1.a65 -------------------------------

                                tst_abs rINC,fINC,0
                        
29db : e8                       inx
29dc : e002                     cpx #2
29de : d005                     bne tinc3
29e0 : a9fe                     lda #$fe
29e2 : 8d0302                   sta abst
29e5 : e005             tinc3   cpx #5
29e7 : d0da                     bne tinc2
29e9 : ca                       dex
29ea : ee0302                   inc abst
29ed :                  tdec2    
                                set_stat 0
                        
29f1 : ce0302                   dec abst
                                tst_abs rINC,fINC,0
                        
2a05 : ca                       dex
2a06 : 300b                     bmi tdec3
2a08 : e001                     cpx #1
2a0a : d0e1                     bne tdec2
2a0c : a981                     lda #$81
2a0e : 8d0302                   sta abst
2a11 : d0da                     bne tdec2
2a13 :                  tdec3
2a13 : a200                     ldx #0
2a15 : a97e                     lda #$7e
2a17 : 8d0302                   sta abst
2a1a :                  tinc12    
                                set_stat $ff
                        
2a1e : ee0302                   inc abst
                                tst_abs rINC,fINC,$ff-fnz
                        
2a32 : e8                       inx
2a33 : e002                     cpx #2
2a35 : d005                     bne tinc13
2a37 : a9fe                     lda #$fe
2a39 : 8d0302                   sta abst
2a3c : e005             tinc13   cpx #5
2a3e : d0da                     bne tinc12
2a40 : ca                       dex
2a41 : ee0302                   inc abst
2a44 :                  tdec12    
                                set_stat $ff
                        
2a48 : ce0302                   dec abst
                                tst_abs rINC,fINC,$ff-fnz
                        
2a5c : ca                       dex
2a5d : 300b                     bmi tdec13
2a5f : e001                     cpx #1
2a61 : d0e1                     bne tdec12
2a63 : a981                     lda #$81
2a65 : 8d0302                   sta abst
2a68 : d0da                     bne tdec12
2a6a :                  tdec13
                                next_test
                        
                        
                        ; zeropage indexed
2a76 : a200                     ldx #0
AS65 Assembler for R6502 [1.42].                                     Page   93
------------------------------ func_test_1.a65 -------------------------------

2a78 : a97e                     lda #$7e
2a7a : 9502             tinc4   sta zpt,x
                                set_stat 0
                        
2a80 : f602                     inc zpt,x
                                tst_zx rINC,fINC,0
                        
2a92 : b502                     lda zpt,x
2a94 : e8                       inx
2a95 : e002                     cpx #2
2a97 : d002                     bne tinc5
2a99 : a9fe                     lda #$fe
2a9b : e005             tinc5   cpx #5
2a9d : d0db                     bne tinc4
2a9f : ca                       dex
2aa0 : a902                     lda #2
2aa2 : 9502             tdec4   sta zpt,x 
                                set_stat 0
                        
2aa8 : d602                     dec zpt,x
                                tst_zx rINC,fINC,0
                        
2aba : b502                     lda zpt,x
2abc : ca                       dex
2abd : 3008                     bmi tdec5
2abf : e001                     cpx #1
2ac1 : d0df                     bne tdec4
2ac3 : a981                     lda #$81
2ac5 : d0db                     bne tdec4
2ac7 :                  tdec5
2ac7 : a200                     ldx #0
2ac9 : a97e                     lda #$7e
2acb : 9502             tinc14  sta zpt,x
                                set_stat $ff
                        
2ad1 : f602                     inc zpt,x
                                tst_zx rINC,fINC,$ff-fnz
                        
2ae3 : b502                     lda zpt,x
2ae5 : e8                       inx
2ae6 : e002                     cpx #2
2ae8 : d002                     bne tinc15
2aea : a9fe                     lda #$fe
2aec : e005             tinc15  cpx #5
2aee : d0db                     bne tinc14
2af0 : ca                       dex
2af1 : a902                     lda #2
2af3 : 9502             tdec14  sta zpt,x 
                                set_stat $ff
                        
2af9 : d602                     dec zpt,x
                                tst_zx rINC,fINC,$ff-fnz
                        
2b0b : b502                     lda zpt,x
2b0d : ca                       dex
2b0e : 3008                     bmi tdec15
2b10 : e001                     cpx #1
2b12 : d0df                     bne tdec14
2b14 : a981                     lda #$81
2b16 : d0db                     bne tdec14
2b18 :                  tdec15
                                next_test
AS65 Assembler for R6502 [1.42].                                     Page   94
------------------------------ func_test_1.a65 -------------------------------

                        
                        
                        ; memory indexed
2b24 : a200                     ldx #0
2b26 : a97e                     lda #$7e
2b28 : 9d0302           tinc6   sta abst,x
                                set_stat 0
                        
2b2f : fe0302                   inc abst,x
                                tst_absx rINC,fINC,0
                        
2b43 : bd0302                   lda abst,x
2b46 : e8                       inx
2b47 : e002                     cpx #2
2b49 : d002                     bne tinc7
2b4b : a9fe                     lda #$fe
2b4d : e005             tinc7   cpx #5
2b4f : d0d7                     bne tinc6
2b51 : ca                       dex
2b52 : a902                     lda #2
2b54 : 9d0302           tdec6   sta abst,x 
                                set_stat 0
                        
2b5b : de0302                   dec abst,x
                                tst_absx rINC,fINC,0
                        
2b6f : bd0302                   lda abst,x
2b72 : ca                       dex
2b73 : 3008                     bmi tdec7
2b75 : e001                     cpx #1
2b77 : d0db                     bne tdec6
2b79 : a981                     lda #$81
2b7b : d0d7                     bne tdec6
2b7d :                  tdec7
2b7d : a200                     ldx #0
2b7f : a97e                     lda #$7e
2b81 : 9d0302           tinc16  sta abst,x
                                set_stat $ff
                        
2b88 : fe0302                   inc abst,x
                                tst_absx rINC,fINC,$ff-fnz
                        
2b9c : bd0302                   lda abst,x
2b9f : e8                       inx
2ba0 : e002                     cpx #2
2ba2 : d002                     bne tinc17
2ba4 : a9fe                     lda #$fe
2ba6 : e005             tinc17  cpx #5
2ba8 : d0d7                     bne tinc16
2baa : ca                       dex
2bab : a902                     lda #2
2bad : 9d0302           tdec16  sta abst,x 
                                set_stat $ff
                        
2bb4 : de0302                   dec abst,x
                                tst_absx rINC,fINC,$ff-fnz
                        
2bc8 : bd0302                   lda abst,x
2bcb : ca                       dex
2bcc : 3008                     bmi tdec17
2bce : e001                     cpx #1
2bd0 : d0db                     bne tdec16
AS65 Assembler for R6502 [1.42].                                     Page   95
------------------------------ func_test_1.a65 -------------------------------

2bd2 : a981                     lda #$81
2bd4 : d0d7                     bne tdec16
2bd6 :                  tdec17
                                next_test
                        
                        
                        ; testing logical instructions - AND EOR ORA all addre
                        ; AND
2be2 : a203                     ldx #3          ;immediate
2be4 : b514             tand    lda zpAN,x
2be6 : 8d0a02                   sta ex_andi+1   ;set AND # operand
                                set_ax  absANa,0
                        
2bf0 : 200902                   jsr ex_andi     ;execute AND # in RAM
                                tst_ax  absrlo,absflo,0
                        
2c01 : ca                       dex
2c02 : 10e0                     bpl tand
2c04 : a203                     ldx #3
2c06 : b514             tand1   lda zpAN,x
2c08 : 8d0a02                   sta ex_andi+1   ;set AND # operand
                                set_ax  absANa,$ff
                        
2c12 : 200902                   jsr ex_andi     ;execute AND # in RAM
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2c23 : ca                       dex
2c24 : 10e0                     bpl tand1
                            
2c26 : a203                     ldx #3      ;zp
2c28 : b514             tand2   lda zpAN,x
2c2a : 8502                     sta zpt
                                set_ax  absANa,0
                        
2c33 : 2502                     and zpt
                                tst_ax  absrlo,absflo,0
                        
2c43 : ca                       dex
2c44 : 10e2                     bpl tand2
2c46 : a203                     ldx #3
2c48 : b514             tand3   lda zpAN,x
2c4a : 8502                     sta zpt
                                set_ax  absANa,$ff
                        
2c53 : 2502                     and zpt
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2c63 : ca                       dex
2c64 : 10e2                     bpl tand3
                        
2c66 : a203                     ldx #3      ;abs
2c68 : b514             tand4   lda zpAN,x
2c6a : 8d0302                   sta abst
                                set_ax  absANa,0
                        
2c74 : 2d0302                   and abst
                                tst_ax  absrlo,absflo,0
                        
2c85 : ca                       dex
2c86 : 10e0                     bpl tand4
2c88 : a203                     ldx #3
2c8a : b514             tand5   lda zpAN,x
AS65 Assembler for R6502 [1.42].                                     Page   96
------------------------------ func_test_1.a65 -------------------------------

2c8c : 8d0302                   sta abst
                                set_ax  absANa,$ff
                        
2c96 : 2d0302                   and abst
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2ca7 : ca                       dex
2ca8 : 1002                     bpl tand6
                        
2caa : a203                     ldx #3      ;zp,x
2cac :                  tand6
                                set_ax  absANa,0
                        
2cb3 : 3514                     and zpAN,x
                                tst_ax  absrlo,absflo,0
                        
2cc3 : ca                       dex
2cc4 : 10e6                     bpl tand6
2cc6 : a203                     ldx #3
2cc8 :                  tand7
                                set_ax  absANa,$ff
                        
2ccf : 3514                     and zpAN,x
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2cdf : ca                       dex
2ce0 : 10e6                     bpl tand7
                        
2ce2 : a203                     ldx #3      ;abs,x
2ce4 :                  tand8
                                set_ax  absANa,0
                        
2ceb : 3d5f02                   and absAN,x
                                tst_ax  absrlo,absflo,0
                        
2cfc : ca                       dex
2cfd : 10e5                     bpl tand8
2cff : a203                     ldx #3
2d01 :                  tand9
                                set_ax  absANa,$ff
                        
2d08 : 3d5f02                   and absAN,x
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2d19 : ca                       dex
2d1a : 10e5                     bpl tand9
                        
2d1c : a003                     ldy #3      ;abs,y
2d1e :                  tand10
                                set_ay  absANa,0
                        
2d25 : 395f02                   and absAN,y
                                tst_ay  absrlo,absflo,0
                        
2d36 : 88                       dey
2d37 : 10e5                     bpl tand10
2d39 : a003                     ldy #3
2d3b :                  tand11
                                set_ay  absANa,$ff
                        
2d42 : 395f02                   and absAN,y
                                tst_ay  absrlo,absflo,$ff-fnz
AS65 Assembler for R6502 [1.42].                                     Page   97
------------------------------ func_test_1.a65 -------------------------------

                        
2d53 : 88                       dey
2d54 : 10e5                     bpl tand11
                        
2d56 : a206                     ldx #6      ;(zp,x)
2d58 : a003                     ldy #3
2d5a :                  tand12
                                set_ay  absANa,0
                        
2d61 : 2132                     and (indAN,x)
                                tst_ay  absrlo,absflo,0
                        
2d71 : ca                       dex
2d72 : ca                       dex
2d73 : 88                       dey
2d74 : 10e4                     bpl tand12
2d76 : a206                     ldx #6
2d78 : a003                     ldy #3
2d7a :                  tand13
                                set_ay  absANa,$ff
                        
2d81 : 2132                     and (indAN,x)
                                tst_ay  absrlo,absflo,$ff-fnz
                        
2d91 : ca                       dex
2d92 : ca                       dex
2d93 : 88                       dey
2d94 : 10e4                     bpl tand13
                        
2d96 : a003                     ldy #3      ;(zp),y
2d98 :                  tand14
                                set_ay  absANa,0
                        
2d9f : 3132                     and (indAN),y
                                tst_ay  absrlo,absflo,0
                        
2daf : 88                       dey
2db0 : 10e6                     bpl tand14
2db2 : a003                     ldy #3
2db4 :                  tand15
                                set_ay  absANa,$ff
                        
2dbb : 3132                     and (indAN),y
                                tst_ay  absrlo,absflo,$ff-fnz
                        
2dcb : 88                       dey
2dcc : 10e6                     bpl tand15
                                next_test
                        
                        
                        ; EOR
2dda : a203                     ldx #3          ;immediate - self modifying co
2ddc : b518             teor    lda zpEO,x
2dde : 8d0d02                   sta ex_eori+1   ;set EOR # operand
                                set_ax  absEOa,0
                        
2de8 : 200c02                   jsr ex_eori     ;execute EOR # in RAM
                                tst_ax  absrlo,absflo,0
                        
2df9 : ca                       dex
2dfa : 10e0                     bpl teor
2dfc : a203                     ldx #3
AS65 Assembler for R6502 [1.42].                                     Page   98
------------------------------ func_test_1.a65 -------------------------------

2dfe : b518             teor1   lda zpEO,x
2e00 : 8d0d02                   sta ex_eori+1   ;set EOR # operand
                                set_ax  absEOa,$ff
                        
2e0a : 200c02                   jsr ex_eori     ;execute EOR # in RAM
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2e1b : ca                       dex
2e1c : 10e0                     bpl teor1
                            
2e1e : a203                     ldx #3      ;zp
2e20 : b518             teor2    lda zpEO,x
2e22 : 8502                     sta zpt
                                set_ax  absEOa,0
                        
2e2b : 4502                     eor zpt
                                tst_ax  absrlo,absflo,0
                        
2e3b : ca                       dex
2e3c : 10e2                     bpl teor2
2e3e : a203                     ldx #3
2e40 : b518             teor3   lda zpEO,x
2e42 : 8502                     sta zpt
                                set_ax  absEOa,$ff
                        
2e4b : 4502                     eor zpt
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2e5b : ca                       dex
2e5c : 10e2                     bpl teor3
                        
2e5e : a203                     ldx #3      ;abs
2e60 : b518             teor4   lda zpEO,x
2e62 : 8d0302                   sta abst
                                set_ax  absEOa,0
                        
2e6c : 4d0302                   eor abst
                                tst_ax  absrlo,absflo,0
                        
2e7d : ca                       dex
2e7e : 10e0                     bpl teor4
2e80 : a203                     ldx #3
2e82 : b518             teor5   lda zpEO,x
2e84 : 8d0302                   sta abst
                                set_ax  absEOa,$ff
                        
2e8e : 4d0302                   eor abst
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2e9f : ca                       dex
2ea0 : 1002                     bpl teor6
                        
2ea2 : a203                     ldx #3      ;zp,x
2ea4 :                  teor6
                                set_ax  absEOa,0
                        
2eab : 5518                     eor zpEO,x
                                tst_ax  absrlo,absflo,0
                        
2ebb : ca                       dex
2ebc : 10e6                     bpl teor6
2ebe : a203                     ldx #3
AS65 Assembler for R6502 [1.42].                                     Page   99
------------------------------ func_test_1.a65 -------------------------------

2ec0 :                  teor7
                                set_ax  absEOa,$ff
                        
2ec7 : 5518                     eor zpEO,x
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2ed7 : ca                       dex
2ed8 : 10e6                     bpl teor7
                        
2eda : a203                     ldx #3      ;abs,x
2edc :                  teor8
                                set_ax  absEOa,0
                        
2ee3 : 5d6302                   eor absEO,x
                                tst_ax  absrlo,absflo,0
                        
2ef4 : ca                       dex
2ef5 : 10e5                     bpl teor8
2ef7 : a203                     ldx #3
2ef9 :                  teor9
                                set_ax  absEOa,$ff
                        
2f00 : 5d6302                   eor absEO,x
                                tst_ax  absrlo,absflo,$ff-fnz
                        
2f11 : ca                       dex
2f12 : 10e5                     bpl teor9
                        
2f14 : a003                     ldy #3      ;abs,y
2f16 :                  teor10
                                set_ay  absEOa,0
                        
2f1d : 596302                   eor absEO,y
                                tst_ay  absrlo,absflo,0
                        
2f2e : 88                       dey
2f2f : 10e5                     bpl teor10
2f31 : a003                     ldy #3
2f33 :                  teor11
                                set_ay  absEOa,$ff
                        
2f3a : 596302                   eor absEO,y
                                tst_ay  absrlo,absflo,$ff-fnz
                        
2f4b : 88                       dey
2f4c : 10e5                     bpl teor11
                        
2f4e : a206                     ldx #6      ;(zp,x)
2f50 : a003                     ldy #3
2f52 :                  teor12
                                set_ay  absEOa,0
                        
2f59 : 413a                     eor (indEO,x)
                                tst_ay  absrlo,absflo,0
                        
2f69 : ca                       dex
2f6a : ca                       dex
2f6b : 88                       dey
2f6c : 10e4                     bpl teor12
2f6e : a206                     ldx #6
2f70 : a003                     ldy #3
2f72 :                  teor13
AS65 Assembler for R6502 [1.42].                                     Page  100
------------------------------ func_test_1.a65 -------------------------------

                                set_ay  absEOa,$ff
                        
2f79 : 413a                     eor (indEO,x)
                                tst_ay  absrlo,absflo,$ff-fnz
                        
2f89 : ca                       dex
2f8a : ca                       dex
2f8b : 88                       dey
2f8c : 10e4                     bpl teor13
                        
2f8e : a003                     ldy #3      ;(zp),y
2f90 :                  teor14
                                set_ay  absEOa,0
                        
2f97 : 513a                     eor (indEO),y
                                tst_ay  absrlo,absflo,0
                        
2fa7 : 88                       dey
2fa8 : 10e6                     bpl teor14
2faa : a003                     ldy #3
2fac :                  teor15
                                set_ay  absEOa,$ff
                        
2fb3 : 513a                     eor (indEO),y
                                tst_ay  absrlo,absflo,$ff-fnz
                        
2fc3 : 88                       dey
2fc4 : 10e6                     bpl teor15
                                next_test
                        
                        
                        ; OR
2fd2 : a203                     ldx #3          ;immediate - self modifying co
2fd4 : b510             tora    lda zpOR,x
2fd6 : 8d1002                   sta ex_orai+1   ;set ORA # operand
                                set_ax  absORa,0
                        
2fe0 : 200f02                   jsr ex_orai     ;execute ORA # in RAM
                                tst_ax  absrlo,absflo,0
                        
2ff1 : ca                       dex
2ff2 : 10e0                     bpl tora
2ff4 : a203                     ldx #3
2ff6 : b510             tora1   lda zpOR,x
2ff8 : 8d1002                   sta ex_orai+1   ;set ORA # operand
                                set_ax  absORa,$ff
                        
3002 : 200f02                   jsr ex_orai     ;execute ORA # in RAM
                                tst_ax  absrlo,absflo,$ff-fnz
                        
3013 : ca                       dex
3014 : 10e0                     bpl tora1
                            
3016 : a203                     ldx #3      ;zp
3018 : b510             tora2   lda zpOR,x
301a : 8502                     sta zpt
                                set_ax  absORa,0
                        
3023 : 0502                     ora zpt
                                tst_ax  absrlo,absflo,0
                        
3033 : ca                       dex
AS65 Assembler for R6502 [1.42].                                     Page  101
------------------------------ func_test_1.a65 -------------------------------

3034 : 10e2                     bpl tora2
3036 : a203                     ldx #3
3038 : b510             tora3   lda zpOR,x
303a : 8502                     sta zpt
                                set_ax  absORa,$ff
                        
3043 : 0502                     ora zpt
                                tst_ax  absrlo,absflo,$ff-fnz
                        
3053 : ca                       dex
3054 : 10e2                     bpl tora3
                        
3056 : a203                     ldx #3      ;abs
3058 : b510             tora4   lda zpOR,x
305a : 8d0302                   sta abst
                                set_ax  absORa,0
                        
3064 : 0d0302                   ora abst
                                tst_ax  absrlo,absflo,0
                        
3075 : ca                       dex
3076 : 10e0                     bpl tora4
3078 : a203                     ldx #3
307a : b510             tora5   lda zpOR,x
307c : 8d0302                   sta abst
                                set_ax  absORa,$ff
                        
3086 : 0d0302                   ora abst
                                tst_ax  absrlo,absflo,$ff-fnz
                        
3097 : ca                       dex
3098 : 1002                     bpl tora6
                        
309a : a203                     ldx #3      ;zp,x
309c :                  tora6
                                set_ax  absORa,0
                        
30a3 : 1510                     ora zpOR,x
                                tst_ax  absrlo,absflo,0
                        
30b3 : ca                       dex
30b4 : 10e6                     bpl tora6
30b6 : a203                     ldx #3
30b8 :                  tora7
                                set_ax  absORa,$ff
                        
30bf : 1510                     ora zpOR,x
                                tst_ax  absrlo,absflo,$ff-fnz
                        
30cf : ca                       dex
30d0 : 10e6                     bpl tora7
                        
30d2 : a203                     ldx #3      ;abs,x
30d4 :                  tora8
                                set_ax  absORa,0
                        
30db : 1d5b02                   ora absOR,x
                                tst_ax  absrlo,absflo,0
                        
30ec : ca                       dex
30ed : 10e5                     bpl tora8
30ef : a203                     ldx #3
AS65 Assembler for R6502 [1.42].                                     Page  102
------------------------------ func_test_1.a65 -------------------------------

30f1 :                  tora9
                                set_ax  absORa,$ff
                        
30f8 : 1d5b02                   ora absOR,x
                                tst_ax  absrlo,absflo,$ff-fnz
                        
3109 : ca                       dex
310a : 10e5                     bpl tora9
                        
310c : a003                     ldy #3      ;abs,y
310e :                  tora10
                                set_ay  absORa,0
                        
3115 : 195b02                   ora absOR,y
                                tst_ay  absrlo,absflo,0
                        
3126 : 88                       dey
3127 : 10e5                     bpl tora10
3129 : a003                     ldy #3
312b :                  tora11
                                set_ay  absORa,$ff
                        
3132 : 195b02                   ora absOR,y
                                tst_ay  absrlo,absflo,$ff-fnz
                        
3143 : 88                       dey
3144 : 10e5                     bpl tora11
                        
3146 : a206                     ldx #6      ;(zp,x)
3148 : a003                     ldy #3
314a :                  tora12
                                set_ay  absORa,0
                        
3151 : 0142                     ora (indOR,x)
                                tst_ay  absrlo,absflo,0
                        
3161 : ca                       dex
3162 : ca                       dex
3163 : 88                       dey
3164 : 10e4                     bpl tora12
3166 : a206                     ldx #6
3168 : a003                     ldy #3
316a :                  tora13
                                set_ay  absORa,$ff
                        
3171 : 0142                     ora (indOR,x)
                                tst_ay  absrlo,absflo,$ff-fnz
                        
3181 : ca                       dex
3182 : ca                       dex
3183 : 88                       dey
3184 : 10e4                     bpl tora13
                        
3186 : a003                     ldy #3      ;(zp),y
3188 :                  tora14
                                set_ay  absORa,0
                        
318f : 1142                     ora (indOR),y
                                tst_ay  absrlo,absflo,0
                        
319f : 88                       dey
31a0 : 10e6                     bpl tora14
AS65 Assembler for R6502 [1.42].                                     Page  103
------------------------------ func_test_1.a65 -------------------------------

31a2 : a003                     ldy #3
31a4 :                  tora15
                                set_ay  absORa,$ff
                        
31ab : 1142                     ora (indOR),y
                                tst_ay  absrlo,absflo,$ff-fnz
                        
31bb : 88                       dey
31bc : 10e6                     bpl tora15
                            if I_flag = 3
31be : 58                       cli
                            endif                
                                next_test
                        
                        
                        ; full binary add/subtract test
                        ; iterates through all combinations of operands and ca
                        ; uses increments/decrements to predict result & resul
31cb : d8                       cld
31cc : a204                     ldx #ad2        ;for indexed test
31ce : a0ff                     ldy #$ff        ;max range
31d0 : a900                     lda #0          ;start with adding zeroes & no
31d2 : 8502                     sta adfc        ;carry in - for diag
31d4 : 8503                     sta ad1         ;operand 1 - accumulator
31d6 : 8504                     sta ad2         ;operand 2 - memory or immedia
31d8 : 8d0302                   sta ada2        ;non zp
31db : 8505                     sta adrl        ;expected result bits 0-7
31dd : 8506                     sta adrh        ;expected result bit 8 (carry 
31df : a9ff                     lda #$ff        ;complemented operand 2 for su
31e1 : 8508                     sta sb2
31e3 : 8d0402                   sta sba2        ;non zp
31e6 : a902                     lda #2          ;expected Z-flag
31e8 : 8507                     sta adrf
31ea : 18               tadd    clc             ;test with carry clear
31eb : 203632                   jsr chkadd
31ee : e602                     inc adfc        ;now with carry
31f0 : e605                     inc adrl        ;result +1
31f2 : 08                       php             ;save N & Z from low result
31f3 : 08                       php
31f4 : 68                       pla             ;accu holds expected flags
31f5 : 2982                     and #$82        ;mask N & Z
31f7 : 28                       plp
31f8 : d002                     bne tadd1
31fa : e606                     inc adrh        ;result bit 8 - carry
31fc : 0506             tadd1   ora adrh        ;merge C to expected flags
31fe : 8507                     sta adrf        ;save expected flags except ov
3200 : 38                       sec             ;test with carry set
3201 : 203632                   jsr chkadd
3204 : c602                     dec adfc        ;same for operand +1 but no ca
3206 : e603                     inc ad1
3208 : d0e0                     bne tadd        ;iterate op1
320a : a900                     lda #0          ;preset result to op2 when op1
320c : 8506                     sta adrh
320e : ee0302                   inc ada2
3211 : e604                     inc ad2
3213 : 08                       php             ;save NZ as operand 2 becomes 
3214 : 68                       pla
3215 : 2982                     and #$82        ;mask N00000Z0
3217 : 8507                     sta adrf        ;no need to check carry as we 
3219 : c608                     dec sb2         ;complement subtract operand 2
321b : ce0402                   dec sba2
321e : a504                     lda ad2         
AS65 Assembler for R6502 [1.42].                                     Page  104
------------------------------ func_test_1.a65 -------------------------------

3220 : 8505                     sta adrl
3222 : d0c6                     bne tadd        ;iterate op2
                            if disable_decimal < 1
                                next_test
                        
                        ; decimal add/subtract test
                        ; *** WARNING - tests documented behavior only! ***
                        ;   only valid BCD operands are tested, N V Z flags ar
                        ; iterates through all valid combinations of operands 
                        ; uses increments/decrements to predict result & carry
                                sed 
                                ldx #ad2        ;for indexed test
                                ldy #$ff        ;max range
                                lda #$99        ;start with adding 99 to 99 wi
                                sta ad1         ;operand 1 - accumulator
                                sta ad2         ;operand 2 - memory or immedia
                                sta ada2        ;non zp
                                sta adrl        ;expected result bits 0-7
                                lda #1          ;set carry in & out
                                sta adfc        ;carry in - for diag
                                sta adrh        ;expected result bit 8 (carry 
                                lda #0          ;complemented operand 2 for su
                                sta sb2
                                sta sba2        ;non zp
                        tdad    sec             ;test with carry set
                                jsr chkdad
                                dec adfc        ;now with carry clear
                                lda adrl        ;decimal adjust result
                                bne tdad1       ;skip clear carry & preset res
                                dec adrh
                                lda #$99
                                sta adrl
                                bne tdad3
                        tdad1   and #$f         ;lower nibble mask
                                bne tdad2       ;no decimal adjust needed
                                dec adrl        ;decimal adjust (?0-6)
                                dec adrl
                                dec adrl
                                dec adrl
                                dec adrl
                                dec adrl
                        tdad2   dec adrl        ;result -1
                        tdad3   clc             ;test with carry clear
                                jsr chkdad
                                inc adfc        ;same for operand -1 but with 
                                lda ad1         ;decimal adjust operand 1
                                beq tdad5       ;iterate operand 2
                                and #$f         ;lower nibble mask
                                bne tdad4       ;skip decimal adjust
                                dec ad1         ;decimal adjust (?0-6)
                                dec ad1
                                dec ad1
                                dec ad1
                                dec ad1
                                dec ad1
                        tdad4   dec ad1         ;operand 1 -1
                                jmp tdad        ;iterate op1
                        
                        tdad5   lda #$99        ;precharge op1 max
                                sta ad1
                                lda ad2         ;decimal adjust operand 2
                                beq tdad7       ;end of iteration
AS65 Assembler for R6502 [1.42].                                     Page  105
------------------------------ func_test_1.a65 -------------------------------

                                and #$f         ;lower nibble mask
                                bne tdad6       ;skip decimal adjust
                                dec ad2         ;decimal adjust (?0-6)
                                dec ad2
                                dec ad2
                                dec ad2
                                dec ad2
                                dec ad2
                                inc sb2         ;complemented decimal adjust f
                                inc sb2
                                inc sb2
                                inc sb2
                                inc sb2
                                inc sb2
                        tdad6   dec ad2         ;operand 2 -1
                                inc sb2         ;complemented operand for subt
                                lda sb2
                                sta sba2        ;copy as non zp operand
                                lda ad2
                                sta ada2        ;copy as non zp operand
                                sta adrl        ;new result since op1+carry=00
                                inc adrh        ;result carry
                                bne tdad        ;iterate op2
                        tdad7
                                next_test
                        
                        ; decimal/binary switch test
                        ; tests CLD, SED, PLP, RTI to properly switch between 
                        ;   tables
                                clc
                                cld
                                php
                                lda #$55
                                adc #$55
                                cmp #$aa
                                trap_ne         ;expected binary result after 
                                clc
                                sed
                                php
                                lda #$55
                                adc #$55
                                cmp #$10
                                trap_ne         ;expected decimal result after
                                cld
                                plp
                                lda #$55
                                adc #$55
                                cmp #$10
                                trap_ne         ;expected decimal result after
                                plp
                                lda #$55
                                adc #$55
                                cmp #$aa
                                trap_ne         ;expected binary result after 
                                clc
                                lda #hi bin_rti_ret ;emulated interrupt for rt
                                pha
                                lda #lo bin_rti_ret
                                pha
                                php
                                sed
                                lda #hi dec_rti_ret ;emulated interrupt for rt
AS65 Assembler for R6502 [1.42].                                     Page  106
------------------------------ func_test_1.a65 -------------------------------

                                pha
                                lda #lo dec_rti_ret
                                pha
                                php
                                cld
                                rti
                        dec_rti_ret
                                lda #$55
                                adc #$55
                                cmp #$10
                                trap_ne         ;expected decimal result after
                                rti
                        bin_rti_ret        
                                lda #$55
                                adc #$55
                                cmp #$aa
                                trap_ne         ;expected binary result after 
                            endif
                            
3224 : ad0002                   lda test_case
3227 : c929                     cmp #test_num
                                trap_ne         ;previous test is out of seque
                        
322b : a9f0                     lda #$f0        ;mark opcode testing complete
322d : 8d0002                   sta test_case
                                
                        ; final RAM integrity test
                        ;   verifies that none of the previous tests has alter
                        ;   designated write areas.
                                check_ram
                        
                        ; *** DEBUG INFO ***
                        ; to debug checksum errors uncomment check_ram in the 
                        ; narrow down the responsible opcode.
                        ; may give false errors when monitor, OS or other back
                        ; allowed during previous tests.
                        
                        
                        ; S U C C E S S **************************************
                        ; -------------       
                                success         ;if you get here everything we
                        
                        ; -------------       
                        ; S U C C E S S **************************************
3233 : 4c0004                   jmp start       ;run again      
                        
                            if disable_decimal < 1
                        ; core subroutine of the decimal add/subtract test
                        ; *** WARNING - tests documented behavior only! ***
                        ;   only valid BCD operands are tested, N V Z flags ar
                        ; iterates through all valid combinations of operands 
                        ; uses increments/decrements to predict result & carry
                        chkdad
                        ; decimal ADC / SBC zp
                                php             ;save carry for subtract
                                lda ad1
                                adc ad2         ;perform add
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
AS65 Assembler for R6502 [1.42].                                     Page  107
------------------------------ func_test_1.a65 -------------------------------

                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda ad1
                                sbc sb2         ;perform subtract
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad flags
                                plp
                        ; decimal ADC / SBC abs
                                php             ;save carry for subtract
                                lda ad1
                                adc ada2        ;perform add
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda ad1
                                sbc sba2        ;perform subtract
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                        ; decimal ADC / SBC #
                                php             ;save carry for subtract
                                lda ad2
                                sta ex_adci+1   ;set ADC # operand
                                lda ad1
                                jsr ex_adci     ;execute ADC # in RAM
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda sb2
                                sta ex_sbci+1   ;set SBC # operand
                                lda ad1
                                jsr ex_sbci     ;execute SBC # in RAM
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
AS65 Assembler for R6502 [1.42].                                     Page  108
------------------------------ func_test_1.a65 -------------------------------

                                trap_ne         ;bad carry
                                plp
                        ; decimal ADC / SBC zp,x
                                php             ;save carry for subtract
                                lda ad1
                                adc 0,x         ;perform add
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda ad1
                                sbc sb2-ad2,x   ;perform subtract
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                        ; decimal ADC / SBC abs,x
                                php             ;save carry for subtract
                                lda ad1
                                adc ada2-ad2,x  ;perform add
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda ad1
                                sbc sba2-ad2,x  ;perform subtract
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                        ; decimal ADC / SBC abs,y
                                php             ;save carry for subtract
                                lda ad1
                                adc ada2-$ff,y  ;perform add
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda ad1
AS65 Assembler for R6502 [1.42].                                     Page  109
------------------------------ func_test_1.a65 -------------------------------

                                sbc sba2-$ff,y  ;perform subtract
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                        ; decimal ADC / SBC (zp,x)
                                php             ;save carry for subtract
                                lda ad1
                                adc (lo adi2-ad2,x) ;perform add
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda ad1
                                sbc (lo sbi2-ad2,x) ;perform subtract
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                        ; decimal ADC / SBC (abs),y
                                php             ;save carry for subtract
                                lda ad1
                                adc (adiy2),y   ;perform add
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                php             ;save carry for next add
                                lda ad1
                                sbc (sbiy2),y   ;perform subtract
                                php          
                                cmp adrl        ;check result
                                trap_ne         ;bad result
                                pla             ;check flags
                                and #1          ;mask carry
                                cmp adrh
                                trap_ne         ;bad carry
                                plp
                                rts
                            endif
                        
                        ; core subroutine of the full binary add/subtract test
                        ; iterates through all combinations of operands and ca
                        ; uses increments/decrements to predict result & resul
3236 : a507             chkadd  lda adrf        ;add V-flag if overflow
AS65 Assembler for R6502 [1.42].                                     Page  110
------------------------------ func_test_1.a65 -------------------------------

3238 : 2983                     and #$83        ;keep N-----ZC / clear V
323a : 48                       pha
323b : a503                     lda ad1         ;test sign unequal between ope
323d : 4504                     eor ad2
323f : 300a                     bmi ckad1       ;no overflow possible - operan
3241 : a503                     lda ad1         ;test sign equal between opera
3243 : 4505                     eor adrl
3245 : 1004                     bpl ckad1       ;no overflow occured - operand
3247 : 68                       pla
3248 : 0940                     ora #$40        ;set V
324a : 48                       pha
324b : 68               ckad1   pla
324c : 8507                     sta adrf        ;save expected flags
                        ; binary ADC / SBC zp
324e : 08                       php             ;save carry for subtract
324f : a503                     lda ad1
3251 : 6504                     adc ad2         ;perform add
3253 : 08                       php          
3254 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
3258 : 68                       pla             ;check flags
3259 : 29c3                     and #$c3        ;mask NV----ZC
325b : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
325f : 28                       plp
3260 : 08                       php             ;save carry for next add
3261 : a503                     lda ad1
3263 : e508                     sbc sb2         ;perform subtract
3265 : 08                       php          
3266 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
326a : 68                       pla             ;check flags
326b : 29c3                     and #$c3        ;mask NV----ZC
326d : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
3271 : 28                       plp
                        ; binary ADC / SBC abs
3272 : 08                       php             ;save carry for subtract
3273 : a503                     lda ad1
3275 : 6d0302                   adc ada2        ;perform add
3278 : 08                       php          
3279 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
327d : 68                       pla             ;check flags
327e : 29c3                     and #$c3        ;mask NV----ZC
3280 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
3284 : 28                       plp
3285 : 08                       php             ;save carry for next add
3286 : a503                     lda ad1
3288 : ed0402                   sbc sba2        ;perform subtract
328b : 08                       php          
328c : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
3290 : 68                       pla             ;check flags
AS65 Assembler for R6502 [1.42].                                     Page  111
------------------------------ func_test_1.a65 -------------------------------

3291 : 29c3                     and #$c3        ;mask NV----ZC
3293 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
3297 : 28                       plp
                        ; binary ADC / SBC #
3298 : 08                       php             ;save carry for subtract
3299 : a504                     lda ad2
329b : 8d1302                   sta ex_adci+1   ;set ADC # operand
329e : a503                     lda ad1
32a0 : 201202                   jsr ex_adci     ;execute ADC # in RAM
32a3 : 08                       php          
32a4 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
32a8 : 68                       pla             ;check flags
32a9 : 29c3                     and #$c3        ;mask NV----ZC
32ab : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
32af : 28                       plp
32b0 : 08                       php             ;save carry for next add
32b1 : a508                     lda sb2
32b3 : 8d1602                   sta ex_sbci+1   ;set SBC # operand
32b6 : a503                     lda ad1
32b8 : 201502                   jsr ex_sbci     ;execute SBC # in RAM
32bb : 08                       php          
32bc : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
32c0 : 68                       pla             ;check flags
32c1 : 29c3                     and #$c3        ;mask NV----ZC
32c3 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
32c7 : 28                       plp
                        ; binary ADC / SBC zp,x
32c8 : 08                       php             ;save carry for subtract
32c9 : a503                     lda ad1
32cb : 7500                     adc 0,x         ;perform add
32cd : 08                       php          
32ce : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
32d2 : 68                       pla             ;check flags
32d3 : 29c3                     and #$c3        ;mask NV----ZC
32d5 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
32d9 : 28                       plp
32da : 08                       php             ;save carry for next add
32db : a503                     lda ad1
32dd : f504                     sbc sb2-ad2,x   ;perform subtract
32df : 08                       php          
32e0 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
32e4 : 68                       pla             ;check flags
32e5 : 29c3                     and #$c3        ;mask NV----ZC
32e7 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
AS65 Assembler for R6502 [1.42].                                     Page  112
------------------------------ func_test_1.a65 -------------------------------

32eb : 28                       plp
                        ; binary ADC / SBC abs,x
32ec : 08                       php             ;save carry for subtract
32ed : a503                     lda ad1
32ef : 7dff01                   adc ada2-ad2,x  ;perform add
32f2 : 08                       php          
32f3 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
32f7 : 68                       pla             ;check flags
32f8 : 29c3                     and #$c3        ;mask NV----ZC
32fa : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
32fe : 28                       plp
32ff : 08                       php             ;save carry for next add
3300 : a503                     lda ad1
3302 : fd0002                   sbc sba2-ad2,x  ;perform subtract
3305 : 08                       php          
3306 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
330a : 68                       pla             ;check flags
330b : 29c3                     and #$c3        ;mask NV----ZC
330d : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
3311 : 28                       plp
                        ; binary ADC / SBC abs,y
3312 : 08                       php             ;save carry for subtract
3313 : a503                     lda ad1
3315 : 790401                   adc ada2-$ff,y  ;perform add
3318 : 08                       php          
3319 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
331d : 68                       pla             ;check flags
331e : 29c3                     and #$c3        ;mask NV----ZC
3320 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
3324 : 28                       plp
3325 : 08                       php             ;save carry for next add
3326 : a503                     lda ad1
3328 : f90501                   sbc sba2-$ff,y  ;perform subtract
332b : 08                       php          
332c : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
3330 : 68                       pla             ;check flags
3331 : 29c3                     and #$c3        ;mask NV----ZC
3333 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
3337 : 28                       plp
                        ; binary ADC / SBC (zp,x)
3338 : 08                       php             ;save carry for subtract
3339 : a503                     lda ad1
333b : 6146                     adc (lo adi2-ad2,x) ;perform add
333d : 08                       php          
333e : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
AS65 Assembler for R6502 [1.42].                                     Page  113
------------------------------ func_test_1.a65 -------------------------------

                        
3342 : 68                       pla             ;check flags
3343 : 29c3                     and #$c3        ;mask NV----ZC
3345 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
3349 : 28                       plp
334a : 08                       php             ;save carry for next add
334b : a503                     lda ad1
334d : e148                     sbc (lo sbi2-ad2,x) ;perform subtract
334f : 08                       php          
3350 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
3354 : 68                       pla             ;check flags
3355 : 29c3                     and #$c3        ;mask NV----ZC
3357 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
335b : 28                       plp
                        ; binary ADC / SBC (abs),y
335c : 08                       php             ;save carry for subtract
335d : a503                     lda ad1
335f : 714e                     adc (adiy2),y   ;perform add
3361 : 08                       php          
3362 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
3366 : 68                       pla             ;check flags
3367 : 29c3                     and #$c3        ;mask NV----ZC
3369 : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
336d : 28                       plp
336e : 08                       php             ;save carry for next add
336f : a503                     lda ad1
3371 : f150                     sbc (sbiy2),y   ;perform subtract
3373 : 08                       php          
3374 : c505                     cmp adrl        ;check result
                                trap_ne         ;bad result
                        
3378 : 68                       pla             ;check flags
3379 : 29c3                     and #$c3        ;mask NV----ZC
337b : c507                     cmp adrf
                                trap_ne         ;bad flags
                        
337f : 28                       plp
3380 : 60                       rts
                        
                        ; target for the jump absolute test
3381 : 88                       dey
3382 : 88                       dey
3383 :                  test_far
3383 : 08                       php             ;either SP or Y count will fai
3384 : 88                       dey
3385 : 88                       dey
3386 : 88                       dey
3387 : 28                       plp
                                trap_cs         ;flags loaded?
                        
                                trap_vs
                        
AS65 Assembler for R6502 [1.42].                                     Page  114
------------------------------ func_test_1.a65 -------------------------------

                                trap_mi
                        
                                trap_eq 
                        
3390 : c946                     cmp #'F'        ;registers loaded?
                                trap_ne
                        
3394 : e041                     cpx #'A'
                                trap_ne        
                        
3398 : c04f                     cpy #('R'-3)
                                trap_ne
                        
339c : 48                       pha             ;save a,x
339d : 8a                       txa
339e : 48                       pha
339f : ba                       tsx
33a0 : e0fd                     cpx #$fd        ;check SP
                                trap_ne
                        
33a4 : 68                       pla             ;restore x
33a5 : aa                       tax
                                set_stat $ff
                        
33aa : 68                       pla             ;restore a
33ab : e8                       inx             ;return registers with modific
33ac : 49aa                     eor #$aa        ;N=1, V=1, Z=0, C=1
33ae : 4cd207                   jmp far_ret
                                
                        ; target for the jump indirect test
33b1 : 00                       align
33b2 : bb33             ptr_tst_ind dw test_ind
33b4 : 2708             ptr_ind_ret dw ind_ret
                                trap            ;runover protection
                        
33b9 : 88                       dey
33ba : 88                       dey
33bb :                  test_ind
33bb : 08                       php             ;either SP or Y count will fai
33bc : 88                       dey
33bd : 88                       dey
33be : 88                       dey
33bf : 28                       plp
                                trap_cs         ;flags loaded?
                        
                                trap_vs
                        
                                trap_mi
                        
                                trap_eq 
                        
33c8 : c949                     cmp #'I'        ;registers loaded?
                                trap_ne
                        
33cc : e04e                     cpx #'N'
                                trap_ne        
                        
33d0 : c041                     cpy #('D'-3)
                                trap_ne
                        
33d4 : 48                       pha             ;save a,x
33d5 : 8a                       txa
AS65 Assembler for R6502 [1.42].                                     Page  115
------------------------------ func_test_1.a65 -------------------------------

33d6 : 48                       pha
33d7 : ba                       tsx
33d8 : e0fd                     cpx #$fd        ;check SP
                                trap_ne
                        
33dc : 68                       pla             ;restore x
33dd : aa                       tax
                                set_stat $ff
                        
33e2 : 68                       pla             ;restore a
33e3 : e8                       inx             ;return registers with modific
33e4 : 49aa                     eor #$aa        ;N=1, V=1, Z=0, C=1
33e6 : 6cb433                   jmp (ptr_ind_ret)
                                trap            ;runover protection
                        
33ec : 4c0004                   jmp start       ;catastrophic error - cannot c
                        
                        ; target for the jump subroutine test
33ef : 88                       dey
33f0 : 88                       dey
33f1 :                  test_jsr
33f1 : 08                       php             ;either SP or Y count will fai
33f2 : 88                       dey
33f3 : 88                       dey
33f4 : 88                       dey
33f5 : 28                       plp
                                trap_cs         ;flags loaded?
                        
                                trap_vs
                        
                                trap_mi
                        
                                trap_eq 
                        
33fe : c94a                     cmp #'J'        ;registers loaded?
                                trap_ne
                        
3402 : e053                     cpx #'S'
                                trap_ne        
                        
3406 : c04f                     cpy #('R'-3)
                                trap_ne
                        
340a : 48                       pha             ;save a,x
340b : 8a                       txa
340c : 48                       pha       
340d : ba                       tsx             ;sp -4? (return addr,a,x)
340e : e0fb                     cpx #$fb
                                trap_ne
                        
3412 : adff01                   lda $1ff        ;propper return on stack
3415 : c908                     cmp #hi(jsr_ret)
                                trap_ne
                        
3419 : adfe01                   lda $1fe
341c : c95d                     cmp #lo(jsr_ret)
                                trap_ne
                        
                                set_stat $ff
                        
3424 : 68                       pla             ;pull x,a
3425 : aa                       tax
AS65 Assembler for R6502 [1.42].                                     Page  116
------------------------------ func_test_1.a65 -------------------------------

3426 : 68                       pla
3427 : e8                       inx             ;return registers with modific
3428 : 49aa                     eor #$aa        ;N=1, V=1, Z=0, C=1
342a : 60                       rts
                                trap            ;runover protection
                        
342e : 4c0004                   jmp start       ;catastrophic error - cannot c
                                
                        ;trap in case of unexpected IRQ, NMI, BRK, RESET - BRK
3431 :                  nmi_trap
                                trap            ;check stack for conditions at
                        
3434 : 4c0004                   jmp start       ;catastrophic error - cannot c
3437 :                  res_trap
                                trap            ;unexpected RESET
                        
343a : 4c0004                   jmp start       ;catastrophic error - cannot c
                                
343d : 88                       dey
343e : 88                       dey
343f :                  irq_trap                ;BRK test or unextpected BRK o
343f : 08                       php             ;either SP or Y count will fai
3440 : 88                       dey
3441 : 88                       dey
3442 : 88                       dey
                                ;next traps could be caused by unexpected BRK 
                                ;check stack for BREAK and originating locatio
                                ;possible jump/branch into weeds (uninitialize
3443 : c9bd                     cmp #$ff-'B'    ;BRK pass 2 registers loaded?
3445 : f042                     beq break2
3447 : c942                     cmp #'B'        ;BRK pass 1 registers loaded?
                                trap_ne
                        
344b : e052                     cpx #'R'
                                trap_ne        
                        
344f : c048                     cpy #'K'-3
                                trap_ne
                        
3453 : 8500                     sta irq_a       ;save registers during break t
3455 : 8601                     stx irq_x
3457 : ba                       tsx             ;test break on stack
3458 : bd0201                   lda $102,x
                                cmp_flag 0      ;break test should have B=1 & 
                        
                                trap_ne         ; - no break flag on stack
                        
345f : 68                       pla
                                cmp_flag intdis ;should have added interrupt d
                        
                                trap_ne
                        
3464 : ba                       tsx
3465 : e0fc                     cpx #$fc        ;sp -3? (return addr, flags)
                                trap_ne
                        
3469 : adff01                   lda $1ff        ;propper return on stack
346c : c908                     cmp #hi(brk_ret0)
                                trap_ne
                        
3470 : adfe01                   lda $1fe
3473 : c994                     cmp #lo(brk_ret0)
AS65 Assembler for R6502 [1.42].                                     Page  117
------------------------------ func_test_1.a65 -------------------------------

                                trap_ne
                        
                                load_flag $ff
                        
3479 : 48                       pha
347a : a601                     ldx irq_x
347c : e8                       inx             ;return registers with modific
347d : a500                     lda irq_a
347f : 49aa                     eor #$aa
3481 : 28                       plp             ;N=1, V=1, Z=1, C=1 but origin
3482 : 40                       rti
                                trap            ;runover protection
                        
3486 : 4c0004                   jmp start       ;catastrophic error - cannot c
                                
3489 :                  break2                  ;BRK pass 2        
3489 : e0ad                     cpx #$ff-'R'
                                trap_ne        
                        
348d : c0b1                     cpy #$ff-'K'-3
                                trap_ne
                        
3491 : 8500                     sta irq_a       ;save registers during break t
3493 : 8601                     stx irq_x
3495 : ba                       tsx             ;test break on stack
3496 : bd0201                   lda $102,x
                                cmp_flag $ff    ;break test should have B=1
                        
                                trap_ne         ; - no break flag on stack
                        
349d : 68                       pla
349e : 0908                     ora #decmode    ;ignore decmode cleared if 65c
                                cmp_flag $ff    ;actual passed flags
                        
                                trap_ne
                        
34a4 : ba                       tsx
34a5 : e0fc                     cpx #$fc        ;sp -3? (return addr, flags)
                                trap_ne
                        
34a9 : adff01                   lda $1ff        ;propper return on stack
34ac : c908                     cmp #hi(brk_ret1)
                                trap_ne
                        
34b0 : adfe01                   lda $1fe
34b3 : c9ba                     cmp #lo(brk_ret1)
                                trap_ne
                        
                                load_flag intdis
                        
34b9 : 48                       pha      
34ba : a601                     ldx irq_x
34bc : e8                       inx             ;return registers with modific
34bd : a500                     lda irq_a
34bf : 49aa                     eor #$aa
34c1 : 28                       plp             ;N=0, V=0, Z=0, C=0 but origin
34c2 : 40                       rti
                                trap            ;runover protection
                        
34c6 : 4c0004                   jmp start       ;catastrophic error - cannot c
                        
                            if report = 1
AS65 Assembler for R6502 [1.42].                                     Page  118
------------------------------ func_test_1.a65 -------------------------------

                                include "report.i65"
                            endif
                                
                        ;copy of data to initialize BSS segment
                            if load_data_direct != 1
                        zp_init
                        zps_    db  $80,1           ;additional shift pattern 
                        zp1_    db  $c3,$82,$41,0   ;test patterns for LDx BIT
                        zp7f_   db  $7f             ;test pattern for compare
                        ;logical zeropage operands
                        zpOR_   db  0,$1f,$71,$80   ;test pattern for OR
                        zpAN_   db  $0f,$ff,$7f,$80 ;test pattern for AND
                        zpEO_   db  $ff,$0f,$8f,$8f ;test pattern for EOR
                        ;indirect addressing pointers
                        ind1_   dw  abs1            ;indirect pointer to patte
                                dw  abs1+1
                                dw  abs1+2
                                dw  abs1+3
                                dw  abs7f
                        inw1_   dw  abs1-$f8        ;indirect pointer for wrap
                        indt_   dw  abst            ;indirect pointer to store
                                dw  abst+1
                                dw  abst+2
                                dw  abst+3
                        inwt_   dw  abst-$f8        ;indirect pointer for wrap
                        indAN_  dw  absAN           ;indirect pointer to AND p
                                dw  absAN+1
                                dw  absAN+2
                                dw  absAN+3
                        indEO_  dw  absEO           ;indirect pointer to EOR p
                                dw  absEO+1
                                dw  absEO+2
                                dw  absEO+3
                        indOR_  dw  absOR           ;indirect pointer to OR pa
                                dw  absOR+1
                                dw  absOR+2
                                dw  absOR+3
                        ;add/subtract indirect pointers
                        adi2_   dw  ada2            ;indirect pointer to opera
                        sbi2_   dw  sba2            ;indirect pointer to compl
                        adiy2_  dw  ada2-$ff        ;with offset for indirect 
                        sbiy2_  dw  sba2-$ff
                        zp_end
                            if (zp_end - zp_init) != (zp_bss_end - zp_bss)   
                                ;force assembler error if size is different   
                                ERROR ERROR ERROR   ;mismatch between bss and 
                            endif 
                        data_init
                        ex_and_ and #0              ;execute immediate opcodes
                                rts
                        ex_eor_ eor #0              ;execute immediate opcodes
                                rts
                        ex_ora_ ora #0              ;execute immediate opcodes
                                rts
                        ex_adc_ adc #0              ;execute immediate opcodes
                                rts
                        ex_sbc_ sbc #0              ;execute immediate opcodes
                                rts
                        ;zps    db  $80,1           ;additional shift patterns
                        abs1_   db  $c3,$82,$41,0   ;test patterns for LDx BIT
                        abs7f_  db  $7f             ;test pattern for compare
                        ;loads
AS65 Assembler for R6502 [1.42].                                     Page  119
------------------------------ func_test_1.a65 -------------------------------

                        fLDx_   db  fn,fn,0,fz              ;expected flags fo
                        ;shifts
                        rASL_                               ;expected result A
                        rROL_   db  0,2,$86,$04,$82,0
                        rROLc_  db  1,3,$87,$05,$83,1       ;expected result R
                        rLSR_                               ;expected result L
                        rROR_   db  $40,0,$61,$41,$20,0
                        rRORc_  db  $c0,$80,$e1,$c1,$a0,$80 ;expected result R
                        fASL_                               ;expected flags fo
                        fROL_   db  fzc,0,fnc,fc,fn,fz      ;no carry in
                        fROLc_  db  fc,0,fnc,fc,fn,0        ;carry in 
                        fLSR_
                        fROR_   db  0,fzc,fc,0,fc,fz        ;no carry in
                        fRORc_  db  fn,fnc,fnc,fn,fnc,fn    ;carry in
                        ;increments (decrements)
                        rINC_   db  $7f,$80,$ff,0,1         ;expected result f
                        fINC_   db  0,fn,fn,fz,0            ;expected flags fo
                        ;logical memory operand
                        absOR_  db  0,$1f,$71,$80           ;test pattern for 
                        absAN_  db  $0f,$ff,$7f,$80         ;test pattern for 
                        absEO_  db  $ff,$0f,$8f,$8f         ;test pattern for 
                        ;logical accu operand
                        absORa_ db  0,$f1,$1f,0             ;test pattern for 
                        absANa_ db  $f0,$ff,$ff,$ff         ;test pattern for 
                        absEOa_ db  $ff,$f0,$f0,$0f         ;test pattern for 
                        ;logical results
                        absrlo_ db  0,$ff,$7f,$80
                        absflo_ db  fz,fn,0,fn
                        data_end
                            if (data_end - data_init) != (data_bss_end - data_
                                ;force assembler error if size is different   
                                ERROR ERROR ERROR   ;mismatch between bss and 
                            endif 
                        
                        vec_init
                                dw  nmi_trap
                                dw  res_trap
                                dw  irq_trap
                        vec_bss equ $fffa
                            endif                   ;end of RAM init data
                            
                            if (load_data_direct = 1) & (ROM_vectors = 1)  
fffa =                          org $fffa       ;vectors
fffa : 3134                     dw  nmi_trap
fffc : 3734                     dw  res_trap
fffe : 3f34                     dw  irq_trap
                            endif
                        
fffa =                          end start
                                    
No errors in pass 2.
Wrote binary from address $0000 through $ffff.
Total size 65536 bytes.
Program start address is at $0400 (1024).
